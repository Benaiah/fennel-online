!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fengari=t():e.fengari=t()}(window,function(){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=40)}([function(e,t,r){"use strict";var a=void 0;a="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){for(var t=0,r=e.length,a=new Uint8Array(r);r>t;)a[t]=e[t++];return a};var n=void 0;if("function"==typeof(new Uint8Array).indexOf)n=function(e,t,r){return e.indexOf(t,r)};else{var u=[].indexOf;if(0!==u.call(new Uint8Array(1),0))throw Error("missing .indexOf");n=function(e,t,r){return u.call(e,t,r)}}var s=void 0;s="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return a(arguments)};var o=function(e){return e instanceof Uint8Array},l=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(e,t){return e[t.charCodeAt(0)]=!0,e},{}),i={},c=function(e,t){if("string"!=typeof e)throw new TypeError("to_luastring expects a javascript string");if(t){var r=i[e];if(o(r))return r}for(var n=e.length,u=Array(n),s=0,l=0;l<n;++l){var c=e.charCodeAt(l);if(c<=127)u[s++]=c;else if(c<=2047)u[s++]=192|c>>6,u[s++]=128|63&c;else{if(c>=55296&&c<=56319&&l+1<n){var _=e.charCodeAt(l+1);_>=56320&&_<=57343&&(l++,c=1024*(c-55296)+_+9216)}c<=65535?(u[s++]=224|c>>12,u[s++]=128|c>>6&63,u[s++]=128|63&c):(u[s++]=240|c>>18,u[s++]=128|c>>12&63,u[s++]=128|c>>6&63,u[s++]=128|63&c)}}return u=a(u),t&&(i[e]=u),u};e.exports.luastring_from=a,e.exports.luastring_indexOf=n,e.exports.luastring_of=s,e.exports.is_luastring=o,e.exports.luastring_eq=function(e,t){if(e!==t){var r=e.length;if(r!==t.length)return!1;for(var a=0;a<r;a++)if(e[a]!==t[a])return!1}return!0},e.exports.to_jsstring=function(e,t,r,a){if(!o(e))throw new TypeError("to_jsstring expects a Uint8Array");r=void 0===r?e.length:Math.min(e.length,r);for(var n="",u=void 0!==t?t:0;u<r;){var s=e[u++];if(s<128)n+=String.fromCharCode(s);else if(s<194||s>244){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½"}else if(s<=223){if(u>=r){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var l=e[u++];if(128!=(192&l)){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}n+=String.fromCharCode(((31&s)<<6)+(63&l))}else if(s<=239){if(u+1>=r){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var i=e[u++];if(128!=(192&i)){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var c=e[u++];if(128!=(192&c)){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var _=((15&s)<<12)+((63&i)<<6)+(63&c);if(_<=65535)n+=String.fromCharCode(_);else{var f=55296+((_-=65536)>>10),p=_%1024+56320;n+=String.fromCharCode(f,p)}}else{if(u+2>=r){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var v=e[u++];if(128!=(192&v)){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var h=e[u++];if(128!=(192&h)){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var d=e[u++];if(128!=(192&d)){if(!a)throw RangeError("cannot convert invalid utf8 to javascript string");n+="ï¿½";continue}var L=((7&s)<<18)+((63&v)<<12)+((63&h)<<6)+(63&d),A=55296+((L-=65536)>>10),g=L%1024+56320;n+=String.fromCharCode(A,g)}}return n},e.exports.to_uristring=function(e){if(!o(e))throw new TypeError("to_uristring expects a Uint8Array");for(var t="",r=0;r<e.length;r++){var a=e[r];l[a]?t+=String.fromCharCode(a):t+="%"+(a<16?"0":"")+a.toString(16)}return t},e.exports.to_luastring=c,e.exports.from_userstring=function(e){if(!o(e)){if("string"!=typeof e)throw new TypeError("expects an array of bytes or javascript string");e=c(e)}return e};var _=c("Lua");e.exports.LUA_SIGNATURE=_,e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSION="Lua 5.3",e.exports.LUA_RELEASE="Lua 5.3.4",e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";var f={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};f.LUA_TSHRSTR=0|f.LUA_TSTRING,f.LUA_TLNGSTR=16|f.LUA_TSTRING,f.LUA_TNUMFLT=0|f.LUA_TNUMBER,f.LUA_TNUMINT=16|f.LUA_TNUMBER,f.LUA_TLCL=0|f.LUA_TFUNCTION,f.LUA_TLCF=16|f.LUA_TFUNCTION,f.LUA_TCCL=32|f.LUA_TFUNCTION;var p=-r(3).LUAI_MAXSTACK-1e3;e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=p,e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.constant_types=f,e.exports.lua_Debug=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null},e.exports.lua_upvalueindex=function(e){return p-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(e,t,r){"use strict";var a=r(0),n=r(18),u=r(11),s=r(7),o=r(10);e.exports.LUA_AUTHORS=a.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=a.LUA_COPYRIGHT,e.exports.LUA_ERRERR=a.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=a.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=a.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=a.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=a.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=a.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=a.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=a.LUA_HOOKLINE,e.exports.LUA_HOOKRET=a.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=a.LUA_HOOKTAILCALL,e.exports.LUA_MASKCALL=a.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=a.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=a.LUA_MASKLINE,e.exports.LUA_MASKRET=a.LUA_MASKRET,e.exports.LUA_MINSTACK=a.LUA_MINSTACK,e.exports.LUA_MULTRET=a.LUA_MULTRET,e.exports.LUA_NUMTAGS=a.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=a.thread_status.LUA_OK,e.exports.LUA_OPADD=a.LUA_OPADD,e.exports.LUA_OPBAND=a.LUA_OPBAND,e.exports.LUA_OPBNOT=a.LUA_OPBNOT,e.exports.LUA_OPBOR=a.LUA_OPBOR,e.exports.LUA_OPBXOR=a.LUA_OPBXOR,e.exports.LUA_OPDIV=a.LUA_OPDIV,e.exports.LUA_OPEQ=a.LUA_OPEQ,e.exports.LUA_OPIDIV=a.LUA_OPIDIV,e.exports.LUA_OPLE=a.LUA_OPLE,e.exports.LUA_OPLT=a.LUA_OPLT,e.exports.LUA_OPMOD=a.LUA_OPMOD,e.exports.LUA_OPMUL=a.LUA_OPMUL,e.exports.LUA_OPPOW=a.LUA_OPPOW,e.exports.LUA_OPSHL=a.LUA_OPSHL,e.exports.LUA_OPSHR=a.LUA_OPSHR,e.exports.LUA_OPSUB=a.LUA_OPSUB,e.exports.LUA_OPUNM=a.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=a.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=a.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=a.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=a.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=a.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=a.LUA_SIGNATURE,e.exports.LUA_TNONE=a.constant_types.LUA_TNONE,e.exports.LUA_TNIL=a.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=a.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=a.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=a.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=a.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=a.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=a.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=a.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=a.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=a.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=a.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=a.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=a.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=a.LUA_VERSION_RELEASE,e.exports.LUA_YIELD=a.thread_status.LUA_YIELD,e.exports.lua_Debug=a.lua_Debug,e.exports.lua_upvalueindex=a.lua_upvalueindex,e.exports.lua_absindex=n.lua_absindex,e.exports.lua_arith=n.lua_arith,e.exports.lua_atpanic=n.lua_atpanic,e.exports.lua_atnativeerror=n.lua_atnativeerror,e.exports.lua_call=n.lua_call,e.exports.lua_callk=n.lua_callk,e.exports.lua_checkstack=n.lua_checkstack,e.exports.lua_close=o.lua_close,e.exports.lua_compare=n.lua_compare,e.exports.lua_concat=n.lua_concat,e.exports.lua_copy=n.lua_copy,e.exports.lua_createtable=n.lua_createtable,e.exports.lua_dump=n.lua_dump,e.exports.lua_error=n.lua_error,e.exports.lua_gc=n.lua_gc,e.exports.lua_getallocf=n.lua_getallocf,e.exports.lua_getextraspace=n.lua_getextraspace,e.exports.lua_getfield=n.lua_getfield,e.exports.lua_getglobal=n.lua_getglobal,e.exports.lua_gethook=u.lua_gethook,e.exports.lua_gethookcount=u.lua_gethookcount,e.exports.lua_gethookmask=u.lua_gethookmask,e.exports.lua_geti=n.lua_geti,e.exports.lua_getinfo=u.lua_getinfo,e.exports.lua_getlocal=u.lua_getlocal,e.exports.lua_getmetatable=n.lua_getmetatable,e.exports.lua_getstack=u.lua_getstack,e.exports.lua_gettable=n.lua_gettable,e.exports.lua_gettop=n.lua_gettop,e.exports.lua_getupvalue=n.lua_getupvalue,e.exports.lua_getuservalue=n.lua_getuservalue,e.exports.lua_insert=n.lua_insert,e.exports.lua_isboolean=n.lua_isboolean,e.exports.lua_iscfunction=n.lua_iscfunction,e.exports.lua_isfunction=n.lua_isfunction,e.exports.lua_isinteger=n.lua_isinteger,e.exports.lua_islightuserdata=n.lua_islightuserdata,e.exports.lua_isnil=n.lua_isnil,e.exports.lua_isnone=n.lua_isnone,e.exports.lua_isnoneornil=n.lua_isnoneornil,e.exports.lua_isnumber=n.lua_isnumber,e.exports.lua_isproxy=n.lua_isproxy,e.exports.lua_isstring=n.lua_isstring,e.exports.lua_istable=n.lua_istable,e.exports.lua_isthread=n.lua_isthread,e.exports.lua_isuserdata=n.lua_isuserdata,e.exports.lua_isyieldable=s.lua_isyieldable,e.exports.lua_len=n.lua_len,e.exports.lua_load=n.lua_load,e.exports.lua_newstate=o.lua_newstate,e.exports.lua_newtable=n.lua_newtable,e.exports.lua_newthread=o.lua_newthread,e.exports.lua_newuserdata=n.lua_newuserdata,e.exports.lua_next=n.lua_next,e.exports.lua_pcall=n.lua_pcall,e.exports.lua_pcallk=n.lua_pcallk,e.exports.lua_pop=n.lua_pop,e.exports.lua_pushboolean=n.lua_pushboolean,e.exports.lua_pushcclosure=n.lua_pushcclosure,e.exports.lua_pushcfunction=n.lua_pushcfunction,e.exports.lua_pushfstring=n.lua_pushfstring,e.exports.lua_pushglobaltable=n.lua_pushglobaltable,e.exports.lua_pushinteger=n.lua_pushinteger,e.exports.lua_pushjsclosure=n.lua_pushjsclosure,e.exports.lua_pushjsfunction=n.lua_pushjsfunction,e.exports.lua_pushlightuserdata=n.lua_pushlightuserdata,e.exports.lua_pushliteral=n.lua_pushliteral,e.exports.lua_pushlstring=n.lua_pushlstring,e.exports.lua_pushnil=n.lua_pushnil,e.exports.lua_pushnumber=n.lua_pushnumber,e.exports.lua_pushstring=n.lua_pushstring,e.exports.lua_pushthread=n.lua_pushthread,e.exports.lua_pushvalue=n.lua_pushvalue,e.exports.lua_pushvfstring=n.lua_pushvfstring,e.exports.lua_rawequal=n.lua_rawequal,e.exports.lua_rawget=n.lua_rawget,e.exports.lua_rawgeti=n.lua_rawgeti,e.exports.lua_rawgetp=n.lua_rawgetp,e.exports.lua_rawlen=n.lua_rawlen,e.exports.lua_rawset=n.lua_rawset,e.exports.lua_rawseti=n.lua_rawseti,e.exports.lua_rawsetp=n.lua_rawsetp,e.exports.lua_register=n.lua_register,e.exports.lua_remove=n.lua_remove,e.exports.lua_replace=n.lua_replace,e.exports.lua_resume=s.lua_resume,e.exports.lua_rotate=n.lua_rotate,e.exports.lua_setallof=s.lua_setallof,e.exports.lua_setfield=n.lua_setfield,e.exports.lua_setglobal=n.lua_setglobal,e.exports.lua_sethook=u.lua_sethook,e.exports.lua_seti=n.lua_seti,e.exports.lua_setlocal=u.lua_setlocal,e.exports.lua_setmetatable=n.lua_setmetatable,e.exports.lua_settable=n.lua_settable,e.exports.lua_settop=n.lua_settop,e.exports.lua_setupvalue=n.lua_setupvalue,e.exports.lua_setuservalue=n.lua_setuservalue,e.exports.lua_status=n.lua_status,e.exports.lua_stringtonumber=n.lua_stringtonumber,e.exports.lua_toboolean=n.lua_toboolean,e.exports.lua_todataview=n.lua_todataview,e.exports.lua_tointeger=n.lua_tointeger,e.exports.lua_tointegerx=n.lua_tointegerx,e.exports.lua_tojsstring=n.lua_tojsstring,e.exports.lua_tolstring=n.lua_tolstring,e.exports.lua_tonumber=n.lua_tonumber,e.exports.lua_tonumberx=n.lua_tonumberx,e.exports.lua_topointer=n.lua_topointer,e.exports.lua_toproxy=n.lua_toproxy,e.exports.lua_tostring=n.lua_tostring,e.exports.lua_tothread=n.lua_tothread,e.exports.lua_touserdata=n.lua_touserdata,e.exports.lua_type=n.lua_type,e.exports.lua_typename=n.lua_typename,e.exports.lua_upvalueid=n.lua_upvalueid,e.exports.lua_upvaluejoin=n.lua_upvaluejoin,e.exports.lua_version=n.lua_version,e.exports.lua_xmove=n.lua_xmove,e.exports.lua_yield=s.lua_yield,e.exports.lua_yieldk=s.lua_yieldk,e.exports.lua_tocfunction=n.lua_tocfunction},function(e,t,r){"use strict";var a=r(3).luai_apicheck,n=function(e){if(!e)throw Error("assertion failed")};e.exports.lua_assert=n,e.exports.luai_apicheck=a||function(e,t){return n(t)};e.exports.api_check=function(e,t,r){return a(e,t&&r)};e.exports.LUAI_MAXCCALLS=200;e.exports.LUA_MINBUFFER=32;e.exports.luai_nummod=function(e,t,r){var a=t%r;return a*r<0&&(a+=r),a};e.exports.MAX_INT=2147483647;e.exports.MIN_INT=-2147483648},function(e,t,r){"use strict";var a={},n=r(0),u=n.LUA_VERSION_MAJOR,s=n.LUA_VERSION_MINOR,o=n.to_luastring;e.exports.LUA_PATH_SEP=";";e.exports.LUA_PATH_MARK="?";e.exports.LUA_EXEC_DIR="!";var l=u+"."+s;e.exports.LUA_VDIR=l;e.exports.LUA_DIRSEP="/";var i="./lua/"+l+"/";e.exports.LUA_LDIR=i;var c="./lua/"+l+"/";e.exports.LUA_JSDIR=c;var _=o(i+"?.lua;"+i+"?/init.lua;"+c+"?.lua;"+c+"?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=_;var f=o(c+"?.js;"+c+"loadall.js;./?.js");e.exports.LUA_JSPATH_DEFAULT=f;var p=a.LUA_COMPAT_FLOATSTRING||!1,v=a.LUAI_MAXSTACK||1e6,h=a.LUA_IDSIZE||59,d=a.LUAL_BUFFERSIZE||8192,L=function(e,t){for(var r=Math.min(3,Math.ceil(Math.abs(t)/1023)),a=e,n=0;n<r;n++)a*=Math.pow(2,Math.floor((t+n)/r));return a};e.exports.LUAI_MAXSTACK=v,e.exports.LUA_COMPAT_FLOATSTRING=p,e.exports.LUA_IDSIZE=h,e.exports.LUA_INTEGER_FMT="%d",e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=-2147483648,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=d,e.exports.frexp=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var r=t.getUint32(0)>>>20&2047;0===r&&(t.setFloat64(0,e*Math.pow(2,64)),r=(t.getUint32(0)>>>20&2047)-64);var a=r-1022;return[L(e,-a),a]},e.exports.ldexp=L,e.exports.lua_getlocaledecpoint=function(){return 1.1.toLocaleString().charCodeAt(1)},e.exports.lua_integer2str=function(e){return String(e)},e.exports.lua_number2str=function(e){return String(Number(e.toPrecision(14)))},e.exports.lua_numbertointeger=function(e){return e>=-2147483648&&e<2147483648&&e},e.exports.luai_apicheck=function(e,t){if(!t)throw Error(t)}},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(3).LUAL_BUFFERSIZE,u=r(1),s=u.LUA_ERRERR,o=u.LUA_MULTRET,l=u.LUA_REGISTRYINDEX,i=u.LUA_SIGNATURE,c=u.LUA_TBOOLEAN,_=u.LUA_TLIGHTUSERDATA,f=u.LUA_TNIL,p=u.LUA_TNONE,v=u.LUA_TNUMBER,h=u.LUA_TSTRING,d=u.LUA_TTABLE,L=u.LUA_VERSION_NUM,A=u.lua_Debug,g=u.lua_absindex,b=u.lua_atpanic,T=u.lua_call,x=u.lua_checkstack,k=u.lua_concat,O=u.lua_copy,E=u.lua_createtable,m=u.lua_error,U=u.lua_getfield,R=u.lua_getinfo,N=u.lua_getmetatable,y=u.lua_getstack,S=u.lua_gettop,I=u.lua_insert,w=u.lua_isinteger,M=u.lua_isnil,P=u.lua_isnumber,D=u.lua_isstring,C=u.lua_istable,G=u.lua_len,V=u.lua_load,B=u.lua_newstate,K=u.lua_newtable,F=u.lua_next,j=u.lua_pcall,H=u.lua_pop,X=u.lua_pushboolean,z=u.lua_pushcclosure,q=u.lua_pushcfunction,Y=u.lua_pushfstring,J=u.lua_pushinteger,Z=u.lua_pushliteral,W=u.lua_pushlstring,Q=u.lua_pushnil,$=u.lua_pushstring,ee=u.lua_pushvalue,te=u.lua_pushvfstring,re=u.lua_rawequal,ae=u.lua_rawget,ne=u.lua_rawgeti,ue=u.lua_rawlen,se=u.lua_rawseti,oe=u.lua_remove,le=u.lua_setfield,ie=u.lua_setglobal,ce=u.lua_setmetatable,_e=u.lua_settop,fe=u.lua_toboolean,pe=u.lua_tointeger,ve=u.lua_tointegerx,he=u.lua_tojsstring,de=u.lua_tolstring,Le=u.lua_tonumber,Ae=u.lua_tonumberx,ge=u.lua_topointer,be=u.lua_tostring,Te=u.lua_touserdata,xe=u.lua_type,ke=u.lua_typename,Oe=u.lua_version,Ee=r(6),me=Ee.from_userstring,Ue=Ee.luastring_eq,Re=Ee.to_luastring,Ne=Ee.to_uristring,ye=s+1,Se=Re("_LOADED"),Ie=Re("_PRELOAD"),we=Re("FILE*"),Me=Re("__name"),Pe=Re("__tostring"),De=new Uint8Array(0),Ce=function e(){a(this,e),this.L=null,this.b=De,this.n=0},Ge=function(e,t){var r=S(e);if(R(e,Re("f"),t),U(e,l,Se),function e(t,r,a){if(0===a||!C(t,-1))return 0;for(Q(t);F(t,-2);){if(xe(t,-2)===h){if(re(t,r,-1))return H(t,1),1;if(e(t,r,a-1))return oe(t,-2),Z(t,"."),I(t,-2),k(t,3),1}H(t,1)}return 0}(e,r+1,2)){var a=be(e,-1);return 95===a[0]&&71===a[1]&&46===a[2]&&($(e,a.subarray(3)),oe(e,-2)),O(e,-1,r+1),H(e,2),1}return _e(e,r),0},Ve=function(e,t){Ge(e,t)?(Y(e,Re("function '%s'"),be(e,-1)),oe(e,-2)):0!==t.namewhat.length?Y(e,Re("%s '%s'"),t.namewhat,t.name):t.what&&109===t.what[0]?Z(e,"main chunk"):t.what&&76===t.what[0]?Y(e,Re("function <%s:%d>"),t.short_src,t.linedefined):Z(e,"?")},Be=function(e){var t="PANIC: unprotected error in call to Lua API ("+he(e,-1)+")";throw new Error(t)},Ke=function(e,t,r){var a=new A;return y(e,0,a)?(R(e,Re("n"),a),Ue(a.namewhat,Re("method"))&&0===--t?He(e,Re("calling '%s' on bad self (%s)"),a.name,r):(null===a.name&&(a.name=Ge(e,a)?be(e,-1):Re("?")),He(e,Re("bad argument #%d to '%s' (%s)"),t,a.name,r))):He(e,Re("bad argument #%d (%s)"),t,r)},Fe=function(e,t,r){var a=void 0;a=pt(e,t,Me)===h?be(e,-1):xe(e,t)===_?Re("light userdata",!0):Je(e,t);var n=Y(e,Re("%s expected, got %s"),r,a);return Ke(e,t,n)},je=function(e,t){var r=new A;y(e,t,r)&&(R(e,Re("Sl",!0),r),r.currentline>0)?Y(e,Re("%s:%d: "),r.short_src,r.currentline):$(e,Re(""))},He=function(e,t){je(e,1);for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return te(e,t,a),k(e,2),m(e)},Xe=function(e,t,r,a){return t?(X(e,1),1):(Q(e),r?Y(e,Re("%s: %s"),r,Re(a.message)):$(e,Re(a.message)),J(e,-a.errno),3)},ze=function(e,t){return U(e,l,t)},qe=function(e,t,r){var a=Te(e,t);return null!==a&&N(e,t)?(ze(e,r),re(e,-1,-2)||(a=null),H(e,2),a):null},Ye=function(e,t,r){Fe(e,t,ke(e,r))},Je=function(e,t){return ke(e,xe(e,t))},Ze=function(e,t){var r=de(e,t);return null!==r&&void 0!==r||Ye(e,t,h),r},We=Ze,Qe=function(e,t,r){return xe(e,t)<=0?null===r?null:me(r):Ze(e,t)},$e=Qe,et=function(e,t){var r=Ae(e,t);return!1===r&&Ye(e,t,v),r},tt=function(e,t){var r=ve(e,t);return!1===r&&function(e,t){P(e,t)?Ke(e,t,Re("number has no integer representation",!0)):Ye(e,t,v)}(e,t),r},rt=function(e,t){var r=e.n+t;if(e.b.length<r){var a=Math.max(2*e.b.length,r),n=new Uint8Array(a);n.set(e.b),e.b=n}return e.b.subarray(e.n,r)},at=function(e,t){t.L=e,t.b=De},nt=function(e,t,r){r>0&&(rt(e,r).set(t.subarray(0,r)),ot(e,r))},ut=function(e,t){nt(e,t,t.length)},st=function(e){W(e.L,e.b,e.n),e.n=0,e.b=De},ot=function(e,t){e.n+=t},lt=function(e,t,r,a){return xe(e,r)<=0?a:t(e,r)},it=function(e,t){var r=t.string;return t.string=null,r},ct=function(e,t,r,a,n){return V(e,it,{string:t},a,n)},_t=function(e,t,r,a){return ct(e,t,0,a,null)},ft=function(e,t){return _t(e,t,t.length,t)},pt=function(e,t,r){if(N(e,t)){$(e,r);var a=ae(e,-2);return a===f?H(e,2):oe(e,-2),a}return f},vt=function(e,t,r){return t=g(e,t),pt(e,t,r)!==f&&(ee(e,t),T(e,1,1),!0)},ht=Re("%I"),dt=Re("%f"),Lt=function(e,t,r){var a=r>>>0,n=t.length,u=e.length+1-n;e:for(;a<u;a++){for(var s=0;s<n;s++)if(e[a+s]!==t[s])continue e;return a}return-1},At=function(e,t,r){return U(e,t,r)===d||(H(e,1),t=g(e,t),K(e),ee(e,-1),le(e,t,r),!1)},gt=function(e,t,r){for(var a in bt(e,r,Re("too many upvalues",!0)),t){for(var n=0;n<r;n++)ee(e,-r);z(e,t[a],r),le(e,-(r+2),Re(a))}H(e,r)},bt=function(e,t,r){x(e,t)||(r?He(e,Re("stack overflow (%s)"),r):He(e,Re("stack overflow",!0)))},Tt=function(e,t,r,a){var n=a.message,u=be(e,r).subarray(1);return Y(e,Re("cannot %s %s: %s"),Re(t),u,Re(n)),oe(e,r),ye},xt=void 0,kt=[239,187,191],Ot=function(e){var t=function(e){e.n=0;var t=void 0,r=0;do{if(null===(t=xt(e))||t!==kt[r])return t;r++,e.buff[e.n++]=t}while(r<kt.length);return e.n=0,xt(e)}(e);if(35===t){do{t=xt(e)}while(t&&10!==t);return{skipped:!0,c:xt(e)}}return{skipped:!1,c:t}},Et=void 0,mt=function(e,t){var r=t;if(null!==r.f&&r.n>0){var a=r.n;return r.n=0,r.f=r.f.subarray(r.pos),r.buff.subarray(0,a)}var n=r.f;return r.f=null,n};xt=function(e){return e.pos<e.f.length?e.f[e.pos++]:null},Et=function(e,t,r){var n=new function e(){a(this,e),this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0},u=S(e)+1;if(null===t)throw new Error("Can't read stdin in the browser");Y(e,Re("@%s"),t);var s=Ne(t),o=new XMLHttpRequest;if(o.open("GET",s,!1),"undefined"==typeof window&&(o.responseType="arraybuffer"),o.send(),!(o.status>=200&&o.status<=299))return n.err=o.status,Tt(e,"open",u,{message:o.status+": "+o.statusText});"string"==typeof o.response?n.f=Re(o.response):n.f=new Uint8Array(o.response);var l=Ot(n);l.c===i[0]&&t||l.skipped&&(n.buff[n.n++]=10),null!==l.c&&(n.buff[n.n++]=l.c);var c=V(e,mt,n,be(e,-1),r),_=n.err;return _?(_e(e,u),Tt(e,"read",u,_)):(oe(e,u),c)};var Ut=function(e,t){return Et(e,t,null)},Rt=function(e,t,r){var a=Oe(e);72!=r&&He(e,Re("core and library have incompatible numeric types")),a!=Oe(null)?He(e,Re("multiple Lua VMs detected")):a!==t&&He(e,Re("version mismatch: app. needs %f, Lua core provides %f"),t,a)};e.exports.LUA_ERRFILE=ye,e.exports.LUA_FILEHANDLE=we,e.exports.LUA_LOADED_TABLE=Se,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=Ie,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=Ce,e.exports.luaL_addchar=function(e,t){rt(e,1),e.b[e.n++]=t},e.exports.luaL_addlstring=nt,e.exports.luaL_addsize=ot,e.exports.luaL_addstring=ut,e.exports.luaL_addvalue=function(e){var t=e.L,r=be(t,-1);nt(e,r,r.length),H(t,1)},e.exports.luaL_argcheck=function(e,t,r,a){t||Ke(e,r,a)},e.exports.luaL_argerror=Ke,e.exports.luaL_buffinit=at,e.exports.luaL_buffinitsize=function(e,t,r){return at(e,t),rt(t,r)},e.exports.luaL_callmeta=vt,e.exports.luaL_checkany=function(e,t){xe(e,t)===p&&Ke(e,t,Re("value expected",!0))},e.exports.luaL_checkinteger=tt,e.exports.luaL_checklstring=Ze,e.exports.luaL_checknumber=et,e.exports.luaL_checkoption=function(e,t,r,a){for(var n=null!==r?$e(e,t,r):We(e,t),u=0;a[u];u++)if(Ue(a[u],n))return u;return Ke(e,t,Y(e,Re("invalid option '%s'"),n))},e.exports.luaL_checkstack=bt,e.exports.luaL_checkstring=We,e.exports.luaL_checktype=function(e,t,r){xe(e,t)!==r&&Ye(e,t,r)},e.exports.luaL_checkudata=function(e,t,r){var a=qe(e,t,r);return null===a&&Fe(e,t,r),a},e.exports.luaL_checkversion=function(e){Rt(e,L,72)},e.exports.luaL_checkversion_=Rt,e.exports.luaL_dofile=function(e,t){return Ut(e,t)||j(e,0,o,0)},e.exports.luaL_dostring=function(e,t){return ft(e,t)||j(e,0,o,0)},e.exports.luaL_error=He,e.exports.luaL_execresult=function(e,t){var r=void 0,a=void 0;if(null===t)return X(e,1),Z(e,"exit"),J(e,0),3;if(t.status)r="exit",a=t.status;else{if(!t.signal)return Xe(e,0,null,t);r="signal",a=t.signal}return Q(e),Z(e,r),J(e,a),3},e.exports.luaL_fileresult=Xe,e.exports.luaL_getmetafield=pt,e.exports.luaL_getmetatable=ze,e.exports.luaL_getsubtable=At,e.exports.luaL_gsub=function(e,t,r,a){var n=void 0,u=new Ce;for(at(e,u);(n=Lt(t,r))>=0;)nt(u,t,n),ut(u,a),t=t.subarray(n+r.length);return ut(u,t),st(u),be(e,-1)},e.exports.luaL_len=function(e,t){G(e,t);var r=ve(e,-1);return!1===r&&He(e,Re("object length is not an integer",!0)),H(e,1),r},e.exports.luaL_loadbuffer=_t,e.exports.luaL_loadbufferx=ct,e.exports.luaL_loadfile=Ut,e.exports.luaL_loadfilex=Et,e.exports.luaL_loadstring=ft,e.exports.luaL_newlib=function(e,t){E(e),gt(e,t,0)},e.exports.luaL_newlibtable=function(e){E(e)},e.exports.luaL_newmetatable=function(e,t){return ze(e,t)!==f?0:(H(e,1),E(e,0,2),$(e,t),le(e,-2,Me),ee(e,-1),le(e,l,t),1)},e.exports.luaL_newstate=function(){var e=B();return e&&b(e,Be),e},e.exports.luaL_opt=lt,e.exports.luaL_optinteger=function(e,t,r){return lt(e,tt,t,r)},e.exports.luaL_optlstring=Qe,e.exports.luaL_optnumber=function(e,t,r){return lt(e,et,t,r)},e.exports.luaL_optstring=$e,e.exports.luaL_prepbuffer=function(e){return rt(e,n)},e.exports.luaL_prepbuffsize=rt,e.exports.luaL_pushresult=st,e.exports.luaL_pushresultsize=function(e,t){ot(e,t),st(e)},e.exports.luaL_ref=function(e,t){var r=void 0;return M(e,-1)?(H(e,1),-1):(t=g(e,t),ne(e,t,0),r=pe(e,-1),H(e,1),0!==r?(ne(e,t,r),se(e,t,0)):r=ue(e,t)+1,se(e,t,r),r)},e.exports.luaL_requiref=function(e,t,r,a){At(e,l,Se),U(e,-1,t),fe(e,-1)||(H(e,1),q(e,r),$(e,t),T(e,1,1),ee(e,-1),le(e,-3,t)),oe(e,-2),a&&(ee(e,-1),ie(e,t))},e.exports.luaL_setfuncs=gt,e.exports.luaL_setmetatable=function(e,t){ze(e,t),ce(e,-2)},e.exports.luaL_testudata=qe,e.exports.luaL_tolstring=function(e,t){if(vt(e,t,Pe))D(e,-1)||He(e,Re("'__tostring' must return a string"));else switch(xe(e,t)){case v:w(e,t)?Y(e,ht,pe(e,t)):Y(e,dt,Le(e,t));break;case h:ee(e,t);break;case c:Z(e,fe(e,t)?"true":"false");break;case f:Z(e,"nil");break;default:var r=pt(e,t,Me),a=r===h?be(e,-1):Je(e,t);Y(e,Re("%s: %p"),a,ge(e,t)),r!==f&&oe(e,-2)}return de(e,-1)},e.exports.luaL_traceback=function(e,t,r,a){var n=new A,u=S(e),s=function(e){for(var t=new A,r=1,a=1;y(e,a,t);)r=a,a*=2;for(;r<a;){var n=Math.floor((r+a)/2);y(e,n,t)?r=n+1:a=n}return a-1}(t),o=s-a>21?10:-1;for(r&&Y(e,Re("%s\n"),r),bt(e,10,null),Z(e,"stack traceback:");y(t,a++,n);)0==o--?(Z(e,"\n\t..."),a=s-11+1):(R(t,Re("Slnt",!0),n),Y(e,Re("\n\t%s:"),n.short_src),n.currentline>0&&Z(e,n.currentline+":"),Z(e," in "),Ve(e,n),n.istailcall&&Z(e,"\n\t(...tail calls..)"),k(e,S(e)-u));k(e,S(e)-u)},e.exports.luaL_typename=Je,e.exports.luaL_unref=function(e,t,r){r>=0&&(t=g(e,t),ne(e,t,0),se(e,t,r),J(e,r),se(e,t,0))},e.exports.luaL_where=je,e.exports.lua_writestringerror=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];do{var r=/([^\n]*)\n?([\d\D]*)/.exec(t);console.error(r[1]),t=r[2]}while(""!==t)}}},function(e,t,r){"use strict";var a,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=r(0),i=l.LUA_OPADD,c=l.LUA_OPBAND,_=l.LUA_OPBNOT,f=l.LUA_OPBOR,p=l.LUA_OPBXOR,v=l.LUA_OPDIV,h=l.LUA_OPIDIV,d=l.LUA_OPMOD,L=l.LUA_OPMUL,A=l.LUA_OPPOW,g=l.LUA_OPSHL,b=l.LUA_OPSHR,T=l.LUA_OPSUB,x=l.LUA_OPUNM,k=l.constant_types,O=k.LUA_NUMTAGS,E=k.LUA_TBOOLEAN,m=k.LUA_TCCL,U=k.LUA_TFUNCTION,R=k.LUA_TLCF,N=k.LUA_TLCL,y=k.LUA_TLIGHTUSERDATA,S=k.LUA_TLNGSTR,I=k.LUA_TNIL,w=k.LUA_TNUMBER,M=k.LUA_TNUMFLT,P=k.LUA_TNUMINT,D=k.LUA_TSHRSTR,C=k.LUA_TSTRING,G=k.LUA_TTABLE,V=k.LUA_TTHREAD,B=k.LUA_TUSERDATA,K=l.from_userstring,F=l.luastring_indexOf,j=l.luastring_of,H=l.to_jsstring,X=l.to_luastring,z=r(31),q=z.lisdigit,Y=z.lisprint,J=z.lisspace,Z=z.lisxdigit,W=r(11),Q=r(7),$=r(10),ee=r(8),te=ee.luaS_bless,re=ee.luaS_new,ae=r(9),ne=r(3),ue=ne.LUA_COMPAT_FLOATSTRING,se=ne.ldexp,oe=ne.lua_getlocaledecpoint,le=ne.lua_integer2str,ie=ne.lua_number2str,ce=r(14),_e=r(2),fe=_e.MAX_INT,pe=_e.luai_nummod,ve=_e.lua_assert,he=r(15),de=O,Le=O+1,Ae=function(){function e(t,r){o(this,e),this.type=t,this.value=r}return u(e,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(e){return this.type===e}},{key:"checktype",value:function(e){return this.ttnov()===e}},{key:"ttisnumber",value:function(){return this.checktype(w)}},{key:"ttisfloat",value:function(){return this.checktag(M)}},{key:"ttisinteger",value:function(){return this.checktag(P)}},{key:"ttisnil",value:function(){return this.checktag(I)}},{key:"ttisboolean",value:function(){return this.checktag(E)}},{key:"ttislightuserdata",value:function(){return this.checktag(y)}},{key:"ttisstring",value:function(){return this.checktype(C)}},{key:"ttisshrstring",value:function(){return this.checktag(D)}},{key:"ttislngstring",value:function(){return this.checktag(S)}},{key:"ttistable",value:function(){return this.checktag(G)}},{key:"ttisfunction",value:function(){return this.checktype(U)}},{key:"ttisclosure",value:function(){return(31&this.type)===U}},{key:"ttisCclosure",value:function(){return this.checktag(m)}},{key:"ttisLclosure",value:function(){return this.checktag(N)}},{key:"ttislcf",value:function(){return this.checktag(R)}},{key:"ttisfulluserdata",value:function(){return this.checktag(B)}},{key:"ttisthread",value:function(){return this.checktag(V)}},{key:"ttisdeadkey",value:function(){return this.checktag(Le)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}},{key:"setfltvalue",value:function(e){this.type=M,this.value=e}},{key:"chgfltvalue",value:function(e){ve(this.type==M),this.value=e}},{key:"setivalue",value:function(e){this.type=P,this.value=e}},{key:"chgivalue",value:function(e){ve(this.type==P),this.value=e}},{key:"setnilvalue",value:function(){this.type=I,this.value=null}},{key:"setfvalue",value:function(e){this.type=R,this.value=e}},{key:"setpvalue",value:function(e){this.type=y,this.value=e}},{key:"setbvalue",value:function(e){this.type=E,this.value=e}},{key:"setsvalue",value:function(e){this.type=S,this.value=e}},{key:"setuvalue",value:function(e){this.type=B,this.value=e}},{key:"setthvalue",value:function(e){this.type=V,this.value=e}},{key:"setclLvalue",value:function(e){this.type=N,this.value=e}},{key:"setclCvalue",value:function(e){this.type=m,this.value=e}},{key:"sethvalue",value:function(e){this.type=G,this.value=e}},{key:"setdeadvalue",value:function(){this.type=Le,this.value=null}},{key:"setfrom",value:function(e){this.type=e.type,this.value=e.value}},{key:"tsvalue",value:function(){return ve(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(e,t){return H(this.svalue(),e,t,!0)}}]),e}(),ge=function(e,t,r){e.stack[t].setsvalue(r)},be=new Ae(I,null);Object.freeze(be),e.exports.luaO_nilobject=be;var Te=function e(t,r){o(this,e),this.id=t.l_G.id_counter++,this.p=null,this.nupvalues=r,this.upvals=new Array(r)},xe=function e(t,r,a){for(o(this,e),this.id=t.l_G.id_counter++,this.f=r,this.nupvalues=a,this.upvalue=new Array(a);a--;)this.upvalue[a]=new Ae(I,null)},ke=function e(t,r){o(this,e),this.id=t.l_G.id_counter++,this.metatable=null,this.uservalue=new Ae(I,null),this.len=r,this.data=Object.create(null)},Oe=X("..."),Ee=X('[string "'),me=X('"]'),Ue=function(e){return q(e)?e-48:(223&e)-55},Re=function(e,t){var r=1;if(ve(t<=1114111),t<128)e[7]=t;else{var a=63;do{e[8-r++]=128|63&t,t>>=6,a>>=1}while(t>a);e[8-r]=~a<<1|t}return r},Ne=function(e,t){var r="x"===t?function(e){for(var t,r=0,a=oe(),n=0,u=0,s=0,o=0,l=!1;J(e[r]);)r++;if((t=45===e[r])?r++:43===e[r]&&r++,48!==e[r]||120!==e[r+1]&&88!==e[r+1])return null;for(r+=2;;r++)if(e[r]===a){if(l)break;l=!0}else{if(!Z(e[r]))break;0===u&&48===e[r]?s++:++u<=30?n=16*n+Ue(e[r]):o++,l&&o--}if(s+u===0)return null;if(o*=4,112===e[r]||80===e[r]){var i,c=0;if((i=45===e[++r])?r++:43===e[r]&&r++,!q(e[r]))return null;for(;q(e[r]);)c=10*c+e[r++]-48;i&&(c=-c),o+=c}return t&&(n=-n),{n:se(n,o),i:r}}(e):function(e){try{e=H(e)}catch(e){return null}var t=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(e);if(!t)return null;var r=parseFloat(t[0]);return isNaN(r)?null:{n:r,i:t[0].length}}(e);if(null===r)return null;for(;J(e[r.i]);)r.i++;return r.i===e.length||0===e[r.i]?r:null},ye=[46,120,88,110,78],Se=(s(a={},46,"."),s(a,120,"x"),s(a,88,"x"),s(a,110,"n"),s(a,78,"n"),a),Ie=Math.floor(fe/10),we=fe%10,Me=function(e,t){var r=void 0;if(t.ttisinteger())r=X(le(t.value));else{var a=ie(t.value);!ue&&/^[-0123456789]+$/.test(a)&&(a+=String.fromCharCode(oe())+"0"),r=X(a)}t.setsvalue(te(e,r))},Pe=function(e,t){Q.luaD_inctop(e),ge(e,e.top-1,re(e,t))},De=function(e,t,r){for(var a=0,u=0,s=0,o=void 0;-1!=(o=F(t,37,u));){switch(Pe(e,t.subarray(u,o)),t[o+1]){case 115:var l=r[s++];if(null===l)l=X("(null)",!0);else{l=K(l);var i=F(l,0);-1!==i&&(l=l.subarray(0,i))}Pe(e,l);break;case 99:var c=r[s++];Y(c)?Pe(e,j(c)):Ce(e,X("<\\%d>",!0),c);break;case 100:case 73:Q.luaD_inctop(e),e.stack[e.top-1].setivalue(r[s++]),Me(e,e.stack[e.top-1]);break;case 102:Q.luaD_inctop(e),e.stack[e.top-1].setfltvalue(r[s++]),Me(e,e.stack[e.top-1]);break;case 112:var _=r[s++];if(_ instanceof $.lua_State||_ instanceof ae.Table||_ instanceof ke||_ instanceof Te||_ instanceof xe)Pe(e,X("0x"+_.id.toString(16)));else switch(void 0===_?"undefined":n(_)){case"undefined":Pe(e,X("undefined"));break;case"number":Pe(e,X("Number("+_+")"));break;case"string":Pe(e,X("String("+JSON.stringify(_)+")"));break;case"boolean":Pe(e,X(_?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===_){Pe(e,X("null"));break}case"function":var f=e.l_G.ids.get(_);f||(f=e.l_G.id_counter++,e.l_G.ids.set(_,f)),Pe(e,X("0x"+f.toString(16)));break;default:Pe(e,X("<id NYI>"))}break;case 85:var p=new Uint8Array(8),v=Re(p,r[s++]);Pe(e,p.subarray(8-v));break;case 37:Pe(e,X("%",!0));break;default:W.luaG_runerror(e,X("invalid option '%%%c' to 'lua_pushfstring'"),t[o+1])}a+=2,u=o+2}return Q.luaD_checkstack(e,1),Pe(e,t.subarray(u)),a>0&&ce.luaV_concat(e,a+1),e.stack[e.top-1].svalue()},Ce=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return De(e,t,a)},Ge=function(e,t,r,a){switch(t){case i:return r+a|0;case T:return r-a|0;case L:return ce.luaV_imul(r,a);case d:return ce.luaV_mod(e,r,a);case h:return ce.luaV_div(e,r,a);case c:return r&a;case f:return r|a;case p:return r^a;case g:return ce.luaV_shiftl(r,a);case b:return ce.luaV_shiftl(r,-a);case x:return 0-r|0;case _:return-1^r;default:ve(0)}},Ve=function(e,t,r,a){switch(t){case i:return r+a;case T:return r-a;case L:return r*a;case v:return r/a;case A:return Math.pow(r,a);case h:return Math.floor(r/a);case x:return-r;case d:return pe(e,r,a);default:ve(0)}};e.exports.CClosure=xe,e.exports.LClosure=Te,e.exports.LUA_TDEADKEY=Le,e.exports.LUA_TPROTO=de,e.exports.LocVar=function e(){o(this,e),this.varname=null,this.startpc=NaN,this.endpc=NaN},e.exports.TValue=Ae,e.exports.Udata=ke,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=function(e,t,r,a,n){var u="number"==typeof n?e.stack[n]:n;switch(t){case c:case f:case p:case g:case b:case _:var s,o=void 0;if(!1!==(s=ce.tointeger(r))&&!1!==(o=ce.tointeger(a)))return void u.setivalue(Ge(e,t,s,o));break;case v:case A:var l,h=void 0;if(!1!==(l=ce.tonumber(r))&&!1!==(h=ce.tonumber(a)))return void u.setfltvalue(Ve(e,t,l,h));break;default:var d=void 0,L=void 0;if(r.ttisinteger()&&a.ttisinteger())return void u.setivalue(Ge(e,t,r.value,a.value));if(!1!==(d=ce.tonumber(r))&&!1!==(L=ce.tonumber(a)))return void u.setfltvalue(Ve(e,t,d,L))}ve(null!==e),he.luaT_trybinTM(e,r,a,n,t-i+he.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,t){var r=e.length,a=void 0;if(61===e[0])r<t?(a=new Uint8Array(r-1)).set(e.subarray(1)):(a=new Uint8Array(t)).set(e.subarray(1,t+1));else if(64===e[0])r<=t?(a=new Uint8Array(r-1)).set(e.subarray(1)):((a=new Uint8Array(t)).set(Oe),t-=Oe.length,a.set(e.subarray(r-t),Oe.length));else{a=new Uint8Array(t);var n=F(e,10);a.set(Ee);var u=Ee.length;r<(t-=Ee.length+Oe.length+me.length)&&-1===n?(a.set(e,u),u+=e.length):(-1!==n&&(r=n),r>t&&(r=t),a.set(e.subarray(0,r),u),u+=r,a.set(Oe,u),u+=Oe.length),a.set(me,u),u+=me.length,a=a.subarray(0,u)}return a},e.exports.luaO_hexavalue=Ue,e.exports.luaO_int2fb=function(e){var t=0;if(e<8)return e;for(;e>=128;)e=e+15>>4,t+=4;for(;e>=16;)e=e+1>>1,t++;return t+1<<3|e-8},e.exports.luaO_pushfstring=Ce,e.exports.luaO_pushvfstring=De,e.exports.luaO_str2num=function(e,t){var r=function(e){for(var t,r=0,a=0,n=!0;J(e[r]);)r++;if((t=45===e[r])?r++:43===e[r]&&r++,48!==e[r]||120!==e[r+1]&&88!==e[r+1])for(;r<e.length&&q(e[r]);r++){var u=e[r]-48;if(a>=Ie&&(a>Ie||u>we+t))return null;a=10*a+u|0,n=!1}else for(r+=2;r<e.length&&Z(e[r]);r++)a=16*a+Ue(e[r])|0,n=!1;for(;r<e.length&&J(e[r]);)r++;return n||r!==e.length&&0!==e[r]?null:{n:0|(t?-a:a),i:r}}(e);return null!==r?(t.setivalue(r.n),r.i+1):null!==(r=function(e){for(var t=e.length,r=0,a=0;a<t;a++){var n=e[a];if(-1!==ye.indexOf(n)){r=n;break}}var u=Se[r];return"n"===u?null:Ne(e,u)}(e))?(t.setfltvalue(r.n),r.i+1):0},e.exports.luaO_tostring=Me,e.exports.luaO_utf8esc=Re,e.exports.numarith=Ve,e.exports.pushobj2s=function(e,t){e.stack[e.top++]=new Ae(t.type,t.value)},e.exports.pushsvalue2s=function(e,t){e.stack[e.top++]=new Ae(S,t)},e.exports.setobjs2s=function(e,t,r){e.stack[t].setfrom(e.stack[r])},e.exports.setobj2s=function(e,t,r){e.stack[t].setfrom(r)},e.exports.setsvalue2s=ge},function(e,t,r){"use strict";var a=r(0),n="Fengari 0.1.0  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: "+a.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",e.exports.FENGARI_COPYRIGHT=n,e.exports.FENGARI_RELEASE="Fengari 0.1.0",e.exports.FENGARI_VERSION="Fengari 0.1",e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="1",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="0",e.exports.is_luastring=a.is_luastring,e.exports.luastring_eq=a.luastring_eq,e.exports.luastring_from=a.luastring_from,e.exports.luastring_indexOf=a.luastring_indexOf,e.exports.luastring_of=a.luastring_of,e.exports.to_jsstring=a.to_jsstring,e.exports.to_luastring=a.to_luastring,e.exports.to_uristring=a.to_uristring,e.exports.from_userstring=a.from_userstring},function(e,t,r){"use strict";var a=r(0),n=a.LUA_HOOKCALL,u=a.LUA_HOOKRET,s=a.LUA_HOOKTAILCALL,o=a.LUA_MASKCALL,l=a.LUA_MASKLINE,i=a.LUA_MASKRET,c=a.LUA_MINSTACK,_=a.LUA_MULTRET,f=a.LUA_SIGNATURE,p=a.constant_types,v=p.LUA_TCCL,h=p.LUA_TLCF,d=p.LUA_TLCL,L=p.LUA_TNIL,A=a.thread_status,g=A.LUA_ERRMEM,b=A.LUA_ERRERR,T=A.LUA_ERRRUN,x=A.LUA_ERRSYNTAX,k=A.LUA_OK,O=A.LUA_YIELD,E=a.lua_Debug,m=a.luastring_indexOf,U=a.to_luastring,R=r(18),N=r(11),y=r(16),S=r(2),I=S.api_check,w=S.lua_assert,M=S.LUAI_MAXCCALLS,P=r(5),D=r(13),C=r(30),G=r(10),V=r(8).luaS_newliteral,B=r(15),K=r(3).LUAI_MAXSTACK,F=r(38),j=r(14),H=r(17).MBuffer,X=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new P.TValue(L,null);else for(;e.top>t;)delete e.stack[--e.top]},z=function(e,t,r){for(var a=e.top;e.top<r+1;)e.stack[e.top++]=new P.TValue(L,null);switch(t){case g:P.setsvalue2s(e,r,V(e,"not enough memory"));break;case b:P.setsvalue2s(e,r,V(e,"error in error handling"));break;default:P.setobjs2s(e,r,a-1)}for(;e.top>r+1;)delete e.stack[--e.top]},q=K+200,Y=function(e,t){w(t<=K||t==q),w(e.stack_last==e.stack.length-G.EXTRA_STACK),e.stack.length=t,e.stack_last=t-G.EXTRA_STACK},J=function(e,t){var r=e.stack.length;if(r>K)se(e,b);else{var a=e.top+t+G.EXTRA_STACK,n=2*r;n>K&&(n=K),n<a&&(n=a),n>K?(Y(e,q),N.luaG_runerror(e,U("stack overflow",!0))):Y(e,n)}},Z=function(e,t){e.stack_last-e.top<=t&&J(e,t)},W=function(e){var t=function(e){for(var t=e.top,r=e.ci;null!==r;r=r.previous)t<r.top&&(t=r.top);return w(t<=e.stack_last),t+1}(e),r=t+Math.floor(t/8)+2*G.EXTRA_STACK;r>K&&(r=K),e.stack.length>K&&G.luaE_freeCI(e),t<=K-G.EXTRA_STACK&&r<e.stack.length&&Y(e,r)},Q=function e(t,r,a){var u=t.stack[r];switch(u.type){case v:case h:var s=u.type===v?u.value.f:u.value;Z(t,c);var l=G.luaE_extendCI(t);l.funcOff=r,l.nresults=a,l.func=u,l.top=t.top+c,w(l.top<=t.stack_last),l.callstatus=0,t.hookmask&o&&te(t,n,-1);var i=s(t);if("number"!=typeof i||i<0||(0|i)!==i)throw Error("invalid return value from JS function (expected integer)");return R.api_checknelems(t,i),$(t,l,t.top-i,i),!0;case d:var _=void 0,f=u.value.p,p=t.top-r-1,A=f.maxstacksize;if(Z(t,A),f.is_vararg)_=ae(t,f,p);else{for(;p<f.numparams;p++)t.stack[t.top++]=new P.TValue(L,null);_=r+1}var g=G.luaE_extendCI(t);return g.funcOff=r,g.nresults=a,g.func=u,g.l_base=_,g.top=_+A,X(t,g.top),g.l_code=f.code,g.l_savedpc=0,g.callstatus=G.CIST_LUA,t.hookmask&o&&re(t,g),!1;default:return Z(t,1),ne(t,r,u),e(t,r,a)}},$=function(e,t,r,a){var n=t.nresults;e.hookmask&(i|l)&&(e.hookmask&i&&te(e,u,-1),e.oldpc=t.previous.l_savedpc);var s=t.funcOff;return e.ci=t.previous,e.ci.next=null,ee(e,r,s,a,n)},ee=function(e,t,r,a,n){switch(n){case 0:break;case 1:0===a?e.stack[r].setnilvalue():P.setobjs2s(e,r,t);break;case _:for(var u=0;u<a;u++)P.setobjs2s(e,r+u,t+u);for(var s=e.top;s>=r+a;s--)delete e.stack[s];return e.top=r+a,!1;default:var o=void 0;if(n<=a)for(o=0;o<n;o++)P.setobjs2s(e,r+o,t+o);else{for(o=0;o<a;o++)P.setobjs2s(e,r+o,t+o);for(;o<n;o++)r+o>=e.top?e.stack[r+o]=new P.TValue(L,null):e.stack[r+o].setnilvalue()}}for(var l=r+n,i=e.top;i>=l;i--)delete e.stack[i];return e.top=l,!0},te=function(e,t,r){var a=e.hook;if(a&&e.allowhook){var n=e.ci,u=e.top,s=n.top,o=new E;o.event=t,o.currentline=r,o.i_ci=n,Z(e,c),n.top=e.top+c,w(n.top<=e.stack_last),e.allowhook=0,n.callstatus|=G.CIST_HOOKED,a(e,o),w(!e.allowhook),e.allowhook=1,n.top=s,X(e,u),n.callstatus&=~G.CIST_HOOKED}},re=function(e,t){var r=n;t.l_savedpc++,t.previous.callstatus&G.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==D.OpCodesI.OP_TAILCALL&&(t.callstatus|=G.CIST_TAIL,r=s),te(e,r,-1),t.l_savedpc--},ae=function(e,t,r){var a=t.numparams,n=e.top-r,u=e.top,s=void 0;for(s=0;s<a&&s<r;s++)P.pushobj2s(e,e.stack[n+s]),e.stack[n+s].setnilvalue();for(;s<a;s++)e.stack[e.top++]=new P.TValue(L,null);return u},ne=function(e,t,r){var a=B.luaT_gettmbyobj(e,r,B.TMS.TM_CALL);a.ttisfunction(a)||N.luaG_typeerror(e,r,U("call",!0)),P.pushobj2s(e,e.stack[e.top-1]);for(var n=e.top-2;n>t;n--)P.setobjs2s(e,n,n-1);P.setobj2s(e,t,a)},ue=function(e,t,r){++e.nCcalls>=M&&function(e){e.nCcalls===M?N.luaG_runerror(e,U("JS stack overflow",!0)):e.nCcalls>=M+(M>>3)&&se(e,b)}(e),Q(e,t,r)||j.luaV_execute(e),e.nCcalls--},se=function e(t,r){if(t.errorJmp)throw t.errorJmp.status=r,t.errorJmp;var a=t.l_G;if(t.status=r,!a.mainthread.errorJmp){var n=a.panic;throw n&&(z(t,r,t.top),t.ci.top<t.top&&(t.ci.top=t.top),n(t)),new Error("Aborted "+r)}a.mainthread.stack[a.mainthread.top++]=t.stack[t.top-1],e(a.mainthread,r)},oe=function(e,t,r){var a=e.nCcalls,n={status:k,previous:e.errorJmp};e.errorJmp=n;try{t(e,r)}catch(t){if(n.status===k){var u=e.l_G.atnativeerror;if(u)try{if(n.status=k,R.lua_pushcfunction(e,u),R.lua_pushlightuserdata(e,t),he(e,e.top-2,1),0!==e.errfunc){var s=e.errfunc;P.pushobj2s(e,e.stack[e.top-1]),P.setobjs2s(e,e.top-2,s),he(e,e.top-2,1)}n.status=T}catch(e){n.status===k&&(n.status=-1)}else n.status=-1}}return e.errorJmp=n.previous,e.nCcalls=a,n.status},le=function(e,t){var r=e.ci;w(null!==r.c_k&&0===e.nny),w(r.callstatus&G.CIST_YPCALL||t===O),r.callstatus&G.CIST_YPCALL&&(r.callstatus&=~G.CIST_YPCALL,e.errfunc=r.c_old_errfunc),r.nresults===_&&e.ci.top<e.top&&(e.ci.top=e.top);var a=(0,r.c_k)(e,t,r.c_ctx);R.api_checknelems(e,a),$(e,r,e.top-a,a)},ie=function(e,t){for(null!==t&&le(e,t);e.ci!==e.base_ci;)e.ci.callstatus&G.CIST_LUA?(j.luaV_finishOp(e),j.luaV_execute(e)):le(e,O)},ce=function(e,t){var r=function(e){for(var t=e.ci;null!==t;t=t.previous)if(t.callstatus&G.CIST_YPCALL)return t;return null}(e);if(null===r)return 0;var a=r.extra;return y.luaF_close(e,a),z(e,t,a),e.ci=r,e.allowhook=r.callstatus&G.CIST_OAH,e.nny=0,W(e),e.errfunc=r.c_old_errfunc,1},_e=function(e,t,r){var a=V(e,t);if(0===r)P.pushsvalue2s(e,a),I(e,e.top<=e.ci.top,"stack overflow");else{for(var n=1;n<r;n++)delete e.stack[--e.top];P.setsvalue2s(e,e.top-1,a)}return T},fe=function(e,t){var r=e.top-t,a=e.ci;e.status===k?Q(e,r-1,_)||j.luaV_execute(e):(w(e.status===O),e.status=k,a.funcOff=a.extra,a.func=e.stack[a.funcOff],a.callstatus&G.CIST_LUA?j.luaV_execute(e):(null!==a.c_k&&(t=a.c_k(e,O,a.c_ctx),R.api_checknelems(e,t),r=e.top-t),$(e,a,r,t)),ie(e,null))},pe=function(e,t,r,a){var n=e.ci;return R.api_checknelems(e,t),e.nny>0&&(e!==e.l_G.mainthread?N.luaG_runerror(e,U("attempt to yield across a JS-call boundary",!0)):N.luaG_runerror(e,U("attempt to yield from outside a coroutine",!0))),e.status=O,n.extra=n.funcOff,n.callstatus&G.CIST_LUA?I(e,null===a,"hooks cannot continue after yielding"):(n.c_k=a,null!==a&&(n.c_ctx=r),n.funcOff=e.top-t-1,n.func=e.stack[n.funcOff],se(e,O)),w(n.callstatus&G.CIST_HOOKED),0},ve=function(e,t,r,a,n){var u=e.ci,s=e.allowhook,o=e.nny,l=e.errfunc;e.errfunc=n;var i=oe(e,t,r);return i!==k&&(y.luaF_close(e,a),z(e,i,a),e.ci=u,e.allowhook=s,e.nny=o,W(e)),e.errfunc=l,i},he=function(e,t,r){e.nny++,ue(e,t,r),e.nny--},de=function e(t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.z=t,this.buff=new H,this.dyd=new C.Dyndata,this.mode=a,this.name=r},Le=function(e,t,r){t&&-1===m(t,r[0])&&(P.luaO_pushfstring(e,U("attempt to load a %s chunk (mode is '%s')"),r,t),se(e,x))},Ae=function(e,t){var r=void 0,a=t.z.zgetc();a===f[0]?(Le(e,t.mode,U("binary",!0)),r=F.luaU_undump(e,t.z,t.name)):(Le(e,t.mode,U("text",!0)),r=C.luaY_parser(e,t.z,t.buff,t.dyd,t.name,a)),w(r.nupvalues===r.p.upvalues.length),y.luaF_initupvals(e,r)};e.exports.adjust_top=X,e.exports.luaD_call=ue,e.exports.luaD_callnoyield=he,e.exports.luaD_checkstack=Z,e.exports.luaD_growstack=J,e.exports.luaD_hook=te,e.exports.luaD_inctop=function(e){Z(e,1),e.stack[e.top++]=new P.TValue(L,null)},e.exports.luaD_pcall=ve,e.exports.luaD_poscall=$,e.exports.luaD_precall=Q,e.exports.luaD_protectedparser=function(e,t,r,a){var n=new de(t,r,a);e.nny++;var u=ve(e,Ae,n,e.top,e.errfunc);return e.nny--,u},e.exports.luaD_rawrunprotected=oe,e.exports.luaD_reallocstack=Y,e.exports.luaD_throw=se,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,t,r){var a=e.nny;if(e.status===k){if(e.ci!==e.base_ci)return _e(e,"cannot resume non-suspended coroutine",r)}else if(e.status!==O)return _e(e,"cannot resume dead coroutine",r);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=M)return _e(e,"JS stack overflow",r);e.nny=0,R.api_checknelems(e,e.status===k?r+1:r);var n=oe(e,fe,r);if(-1===n)n=T;else{for(;n>O&&ce(e,n);)n=oe(e,ie,n);n>O?(e.status=n,z(e,n,e.top),e.ci.top=e.top):w(n===e.status)}return e.nny=a,e.nCcalls--,w(e.nCcalls===(t?t.nCcalls:0)),n},e.exports.lua_yield=function(e,t){pe(e,t,0,null)},e.exports.lua_yieldk=pe},function(e,t,r){"use strict";var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();var n=r(0),u=n.is_luastring,s=n.luastring_eq,o=n.luastring_from,l=n.to_luastring,i=r(2).lua_assert,c=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hash=null,this.realstring=r}return a(e,[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}]),e}(),_=function(e){i(u(e));for(var t=e.length,r="|",a=0;a<t;a++)r+=e[a].toString(16);return r},f=function(e,t){return i(t instanceof Uint8Array),new c(e,t)};e.exports.luaS_eqlngstr=function(e,t){return i(e instanceof c),i(t instanceof c),e==t||s(e.realstring,t.realstring)},e.exports.luaS_hash=_,e.exports.luaS_hashlongstr=function(e){return i(e instanceof c),null===e.hash&&(e.hash=_(e.getstr())),e.hash},e.exports.luaS_bless=f,e.exports.luaS_new=function(e,t){return f(e,o(t))},e.exports.luaS_newliteral=function(e,t){return f(e,l(t))},e.exports.TString=c},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=r(0),u=n.constant_types,s=u.LUA_TBOOLEAN,o=u.LUA_TCCL,l=u.LUA_TLCF,i=u.LUA_TLCL,c=u.LUA_TLIGHTUSERDATA,_=u.LUA_TLNGSTR,f=u.LUA_TNIL,p=u.LUA_TNUMFLT,v=u.LUA_TNUMINT,h=u.LUA_TSHRSTR,d=u.LUA_TTABLE,L=u.LUA_TTHREAD,A=u.LUA_TUSERDATA,g=n.to_luastring,b=r(2).lua_assert,T=r(11),x=r(5),k=r(8),O=k.luaS_hashlongstr,E=k.TString,m=r(10),U=new WeakMap,R=function(e){var t=U.get(e);return t||(t={},U.set(e,t)),t},N=function(e,t){switch(t.type){case f:return T.luaG_runerror(e,g("table index is nil",!0));case p:if(isNaN(t.value))return T.luaG_runerror(e,g("table index is NaN",!0));case v:case s:case d:case i:case l:case o:case A:case L:return t.value;case h:case _:return O(t.tsvalue());case c:var r=t.value;switch(void 0===r?"undefined":a(r)){case"string":return"*"+r;case"number":return"#"+r;case"boolean":return r?"?true":"?false";case"function":return R(r);case"object":if(r instanceof m.lua_State&&r.l_G===e.l_G||r instanceof y||r instanceof x.Udata||r instanceof x.LClosure||r instanceof x.CClosure)return R(r);default:return r}default:throw new Error("unknown key type: "+t.type)}},y=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1},S=function(e,t,r,a){e.dead_strong.clear(),e.dead_weak=void 0;var n=null,u={key:r,value:a,p:n=e.l,n:void 0};e.f||(e.f=u),n&&(n.n=u),e.strong.set(t,u),e.l=u},I=function(e,t){var r,n=e.strong.get(t);if(n){n.key.setdeadvalue(),n.value=void 0;var u=n.n,s=n.p;n.p=void 0,s&&(s.n=u),u&&(u.p=s),e.f===n&&(e.f=u),e.l===n&&(e.l=s),e.strong.delete(t),("object"===(void 0===(r=t)?"undefined":a(r))?null!==r:"function"==typeof r)?(e.dead_weak||(e.dead_weak=new WeakMap),e.dead_weak.set(t,n)):e.dead_strong.set(t,n)}},w=function(e,t){var r=e.strong.get(t);return r?r.value:x.luaO_nilobject},M=function(e,t){return b("number"==typeof t&&(0|t)===t),w(e,t)};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_delete=function(e,t,r){b(r instanceof x.TValue);var a=N(e,r);return I(t,a)},e.exports.luaH_get=function(e,t,r){return b(r instanceof x.TValue),r.ttisnil()||r.ttisfloat()&&isNaN(r.value)?x.luaO_nilobject:w(t,N(e,r))},e.exports.luaH_getint=M,e.exports.luaH_getn=function(e){for(var t=0,r=e.strong.size+1;r-t>1;){var a=Math.floor((t+r)/2);M(e,a).ttisnil()?r=a:t=a}return t},e.exports.luaH_getstr=function(e,t){return b(t instanceof E),w(e,O(t))},e.exports.luaH_set=function(e,t,r){return b(r instanceof x.TValue),function(e,t,r){var a=e.strong.get(t);if(a)return a.value;var n=r.value;r=r.ttisfloat()&&(0|n)===n?new x.TValue(v,n):new x.TValue(r.type,n);var u=new x.TValue(f,null);return S(e,t,r,u),u}(t,N(e,r),r)},e.exports.luaH_setint=function(e,t,r){b("number"==typeof t&&(0|t)===t&&r instanceof x.TValue);var a=t;if(r.ttisnil())I(e,a);else{var n=e.strong.get(a);if(n)n.value.setfrom(r);else{var u=new x.TValue(v,t),s=new x.TValue(r.type,r.value);S(e,a,u,s)}}},e.exports.luaH_new=function(e){return new y(e)},e.exports.luaH_next=function(e,t,r){var a=e.stack[r],n=void 0;if(a.type===f){if(!(n=t.f))return!1}else{var u=N(e,a);if(n=t.strong.get(u)){if(!(n=n.n))return!1}else{if(!(n=t.dead_weak&&t.dead_weak.get(u)||t.dead_strong.get(u)))return T.luaG_runerror(e,g("invalid key to 'next'"));do{if(!(n=n.n))return!1}while(n.key.ttisdeadkey())}}return x.setobj2s(e,r,n.key),x.setobj2s(e,r+1,n.value),!0},e.exports.Table=y},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.LUA_MINSTACK,s=n.LUA_RIDX_GLOBALS,o=n.LUA_RIDX_MAINTHREAD,l=n.constant_types,i=l.LUA_NUMTAGS,c=l.LUA_TNIL,_=l.LUA_TTABLE,f=l.LUA_TTHREAD,p=n.thread_status.LUA_OK,v=r(5),h=r(7),d=r(18),L=r(9),A=r(15),g=2*u,b=function e(){a(this,e),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN},T=function e(t){a(this,e),this.id=t.id_counter++,this.base_ci=new b,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=t,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=p,this.errfunc=0},x=function(e){e.ci.next=null},k=function(e,t){e.stack=new Array(g),e.top=0,e.stack_last=g-5;var r=e.base_ci;r.next=r.previous=null,r.callstatus=0,r.funcOff=e.top,r.func=e.stack[e.top],e.stack[e.top++]=new v.TValue(c,null),r.top=e.top+u,e.ci=r},O=function(e){e.ci=e.base_ci,x(e),e.stack=null},E=function(e){var t=e.l_G;k(e),function(e,t){var r=L.luaH_new(e);t.l_registry.sethvalue(r),L.luaH_setint(r,o,new v.TValue(f,e)),L.luaH_setint(r,s,new v.TValue(_,L.luaH_new(e)))}(e,t),A.luaT_init(e),t.version=d.lua_version(null)};e.exports.lua_State=T,e.exports.CallInfo=b,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=function(e){!function(e){O(e)}(e=e.l_G.mainthread)},e.exports.lua_newstate=function(){var e=new function e(){a(this,e),this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new v.TValue(c,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(A.TMS.TM_N),this.mt=new Array(i)},t=new T(e);return e.mainthread=t,h.luaD_rawrunprotected(t,E,null)!==p&&(t=null),t},e.exports.lua_newthread=function(e){var t=e.l_G,r=new T(t);return e.stack[e.top]=new v.TValue(f,r),d.api_incr_top(e),r.hookmask=e.hookmask,r.basehookcount=e.basehookcount,r.hook=e.hook,r.hookcount=r.basehookcount,k(r),r},e.exports.luaE_extendCI=function(e){var t=new b;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},e.exports.luaE_freeCI=x,e.exports.luaE_freethread=function(e,t){O(t)}},function(e,t,r){"use strict";var a=r(0),n=a.LUA_HOOKCOUNT,u=a.LUA_HOOKLINE,s=a.LUA_MASKCOUNT,o=a.LUA_MASKLINE,l=a.constant_types,i=l.LUA_TBOOLEAN,c=l.LUA_TNIL,_=l.LUA_TTABLE,f=a.thread_status,p=f.LUA_ERRRUN,v=f.LUA_YIELD,h=a.from_userstring,d=a.luastring_eq,L=a.luastring_indexOf,A=a.to_luastring,g=r(2),b=g.api_check,T=g.lua_assert,x=r(3).LUA_IDSIZE,k=r(18),O=r(7),E=r(16),m=r(19),U=r(5),R=r(13),N=r(10),y=r(9),S=r(15),I=r(14),w=function(e){return T(e.callstatus&N.CIST_LUA),e.l_savedpc-1},M=function(e){return 0!==e.func.value.p.lineinfo.length?e.func.value.p.lineinfo[w(e)]:-1},P=function(e){if(e.status===v){var t=e.ci,r=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=r}},D=function(e,t){T(t<e.upvalues.length);var r=e.upvalues[t].name;return null===r?A("?",!0):r.getstr()},C=function(e,t,r){var a=void 0,n=null;if(t.callstatus&N.CIST_LUA){if(r<0)return function(e,t){var r=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-r?null:{pos:e.funcOff+r+t,name:A("(*vararg)",!0)}}(t,-r);a=t.l_base,n=E.luaF_getlocalname(t.func.value.p,r,w(t))}else a=t.funcOff+1;if(null===n){if(!((t===e.ci?e.top:t.next.funcOff)-a>=r&&r>0))return null;n=A("(*temporary)",!0)}return{pos:a+(r-1),name:n}},G=function(e,t){if(null===t||t instanceof U.CClosure)e.source=A("=[JS]",!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=A("J",!0);else{var r=t.p;e.source=r.source?r.source.getstr():A("=?",!0),e.linedefined=r.linedefined,e.lastlinedefined=r.lastlinedefined,e.what=0===e.linedefined?A("main",!0):A("Lua",!0)}e.short_src=U.luaO_chunkid(e.source,x)},V=function(e,t){var r={name:null,funcname:null};return null===t?null:t.callstatus&N.CIST_FIN?(r.name=A("__gc",!0),r.funcname=A("metamethod",!0),r):!(t.callstatus&N.CIST_TAIL)&&t.previous.callstatus&N.CIST_LUA?j(e,t.previous):null},B=function(e,t,r){var a={name:null,funcname:null};if(R.ISK(r)){var n=e.k[R.INDEXK(r)];if(n.ttisstring())return a.name=n.svalue(),a}else{var u=F(e,t,r);if(u&&99===u.funcname[0])return u}return a.name=A("?",!0),a},K=function(e,t){return e<t?-1:e},F=function e(t,r,a){var n={name:E.luaF_getlocalname(t,a+1,r),funcname:null};if(n.name)return n.funcname=A("local",!0),n;var u=function(e,t,r){for(var a=-1,n=0,u=R.OpCodesI,s=0;s<t;s++){var o=e.code[s],l=o.A;switch(o.opcode){case u.OP_LOADNIL:var i=o.B;l<=r&&r<=l+i&&(a=K(s,n));break;case u.OP_TFORCALL:r>=l+2&&(a=K(s,n));break;case u.OP_CALL:case u.OP_TAILCALL:r>=l&&(a=K(s,n));break;case u.OP_JMP:var c=s+1+o.sBx;s<c&&c<=t&&c>n&&(n=c);break;default:R.testAMode(o.opcode)&&r===l&&(a=K(s,n))}}return a}(t,r,a),s=R.OpCodesI;if(-1!==u){var o=t.code[u];switch(o.opcode){case s.OP_MOVE:var l=o.B;if(l<o.A)return e(t,u,l);break;case s.OP_GETTABUP:case s.OP_GETTABLE:var i=o.C,c=o.B,_=o.opcode===s.OP_GETTABLE?E.luaF_getlocalname(t,c+1,u):D(t,c);return n.name=B(t,u,i).name,n.funcname=_&&d(_,m.LUA_ENV)?A("global",!0):A("field",!0),n;case s.OP_GETUPVAL:return n.name=D(t,o.B),n.funcname=A("upvalue",!0),n;case s.OP_LOADK:case s.OP_LOADKX:var f=o.opcode===s.OP_LOADK?o.Bx:t.code[u+1].Ax;if(t.k[f].ttisstring())return n.name=t.k[f].svalue(),n.funcname=A("constant",!0),n;break;case s.OP_SELF:var p=o.C;return n.name=B(t,u,p).name,n.funcname=A("method",!0),n}}return null},j=function(e,t){var r={name:null,funcname:null},a=0,n=t.func.value.p,u=w(t),s=n.code[u],o=R.OpCodesI;if(t.callstatus&N.CIST_HOOKED)return r.name=A("?",!0),r.funcname=A("hook",!0),r;switch(s.opcode){case o.OP_CALL:case o.OP_TAILCALL:return F(n,u,s.A);case o.OP_TFORCALL:return r.name=A("for iterator",!0),r.funcname=A("for iterator",!0),r;case o.OP_SELF:case o.OP_GETTABUP:case o.OP_GETTABLE:a=S.TMS.TM_INDEX;break;case o.OP_SETTABUP:case o.OP_SETTABLE:a=S.TMS.TM_NEWINDEX;break;case o.OP_ADD:a=S.TMS.TM_ADD;break;case o.OP_SUB:a=S.TMS.TM_SUB;break;case o.OP_MUL:a=S.TMS.TM_MUL;break;case o.OP_MOD:a=S.TMS.TM_MOD;break;case o.OP_POW:a=S.TMS.TM_POW;break;case o.OP_DIV:a=S.TMS.TM_DIV;break;case o.OP_IDIV:a=S.TMS.TM_IDIV;break;case o.OP_BAND:a=S.TMS.TM_BAND;break;case o.OP_BOR:a=S.TMS.TM_BOR;break;case o.OP_BXOR:a=S.TMS.TM_BXOR;break;case o.OP_SHL:a=S.TMS.TM_SHL;break;case o.OP_SHR:a=S.TMS.TM_SHR;break;case o.OP_UNM:a=S.TMS.TM_UNM;break;case o.OP_BNOT:a=S.TMS.TM_BNOT;break;case o.OP_LEN:a=S.TMS.TM_LEN;break;case o.OP_CONCAT:a=S.TMS.TM_CONCAT;break;case o.OP_EQ:a=S.TMS.TM_EQ;break;case o.OP_LT:a=S.TMS.TM_LT;break;case o.OP_LE:a=S.TMS.TM_LE;break;default:return null}return r.name=e.l_G.tmname[a].getstr(),r.funcname=A("metamethod",!0),r},H=function(e,t){var r=e.ci,a=null;if(r.callstatus&N.CIST_LUA){a=function(e,t,r){for(var a=t.func.value,n=0;n<a.nupvalues;n++)if(a.upvals[n]===r)return{name:D(a.p,n),funcname:A("upvalue",!0)};return null}(0,r,t);var n=function(e,t,r){for(var a=t.l_base;a<t.top;a++)if(e.stack[a]===r)return a;return!1}(e,r,t);!a&&n&&(a=F(r.func.value.p,w(r),n-r.l_base))}return a?U.luaO_pushfstring(e,A(" (%s '%s')",!0),a.funcname,a.name):A("",!0)},X=function(e,t,r){var a=S.luaT_objtypename(e,t);q(e,A("attempt to %s a %s value%s",!0),r,a,H(e,t))},z=function(e,t,r,a){var n=void 0;return n=r?U.luaO_chunkid(r.getstr(),x):A("?",!0),U.luaO_pushfstring(e,A("%s:%d: %s",!0),n,a,t)},q=function(e,t){for(var r=e.ci,a=arguments.length,n=Array(a>2?a-2:0),u=2;u<a;u++)n[u-2]=arguments[u];var s=U.luaO_pushvfstring(e,t,n);r.callstatus&N.CIST_LUA&&z(e,s,r.func.value.p.source,M(r)),Y(e)},Y=function(e){if(0!==e.errfunc){var t=e.errfunc;U.pushobj2s(e,e.stack[e.top-1]),U.setobjs2s(e,e.top-2,t),O.luaD_callnoyield(e,e.top-2,1)}O.luaD_throw(e,p)};e.exports.luaG_addinfo=z,e.exports.luaG_concaterror=function(e,t,r){(t.ttisstring()||I.cvt2str(t))&&(t=r),X(e,t,A("concatenate",!0))},e.exports.luaG_errormsg=Y,e.exports.luaG_opinterror=function(e,t,r,a){!1===I.tonumber(t)&&(r=t),X(e,r,a)},e.exports.luaG_ordererror=function(e,t,r){var a=S.luaT_objtypename(e,t),n=S.luaT_objtypename(e,r);d(a,n)?q(e,A("attempt to compare two %s values",!0),a):q(e,A("attempt to compare %s with %s",!0),a,n)},e.exports.luaG_runerror=q,e.exports.luaG_tointerror=function(e,t,r){!1===I.tointeger(t)&&(r=t),q(e,A("number%s has no integer representation",!0),H(e,r))},e.exports.luaG_traceexec=function(e){var t=e.ci,r=e.hookmask,a=0==--e.hookcount&&r&s;if(a)e.hookcount=e.basehookcount;else if(!(r&o))return;if(t.callstatus&N.CIST_HOOKYIELD)t.callstatus&=~N.CIST_HOOKYIELD;else{if(a&&O.luaD_hook(e,n,-1),r&o){var l=t.func.value.p,i=t.l_savedpc-1,c=0!==l.lineinfo.length?l.lineinfo[i]:-1;(0===i||t.l_savedpc<=e.oldpc||c!==(0!==l.lineinfo.length?l.lineinfo[e.oldpc-1]:-1))&&O.luaD_hook(e,u,c)}e.oldpc=t.l_savedpc,e.status===v&&(a&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=N.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],O.luaD_throw(e,v))}},e.exports.luaG_typeerror=X,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,t,r){t=h(t);var a,n,u=void 0,s=void 0;return P(e),62===t[0]?(u=null,s=e.stack[e.top-1],b(e,s.ttisfunction(),"function expected"),t=t.subarray(1),e.top--):(s=(u=r.i_ci).func,T(u.func.ttisfunction())),a=function(e,t,r,a,n){for(var u=1;t.length>0;t=t.subarray(1))switch(t[0]){case 83:G(r,a);break;case 108:r.currentline=n&&n.callstatus&N.CIST_LUA?M(n):-1;break;case 117:r.nups=null===a?0:a.nupvalues,null===a||a instanceof U.CClosure?(r.isvararg=!0,r.nparams=0):(r.isvararg=a.p.is_vararg,r.nparams=a.p.numparams);break;case 116:r.istailcall=n?n.callstatus&N.CIST_TAIL:0;break;case 110:var s=V(e,n);null===s?(r.namewhat=A("",!0),r.name=null):(r.namewhat=s.funcname,r.name=s.name);break;case 76:case 102:break;default:u=0}return u}(e,t,r,n=s.ttisclosure()?s.value:null,u),L(t,102)>=0&&(U.pushobj2s(e,s),b(e,e.top<=e.ci.top,"stack overflow")),P(e),L(t,76)>=0&&function(e,t){if(null===t||t instanceof U.CClosure)e.stack[e.top]=new U.TValue(c,null),k.api_incr_top(e);else{var r=t.p.lineinfo,a=y.luaH_new(e);e.stack[e.top]=new U.TValue(_,a),k.api_incr_top(e);for(var n=new U.TValue(i,!0),u=0;u<r.length;u++)y.luaH_setint(a,r[u],n)}}(e,n),a},e.exports.lua_getlocal=function(e,t,r){var a=void 0;if(P(e),null===t)a=e.stack[e.top-1].ttisLclosure()?E.luaF_getlocalname(e.stack[e.top-1].value.p,r,0):null;else{var n=C(e,t.i_ci,r);n?(a=n.name,U.pushobj2s(e,e.stack[n.pos]),b(e,e.top<=e.ci.top,"stack overflow")):a=null}return P(e),a},e.exports.lua_getstack=function(e,t,r){var a=void 0,n=void 0;if(t<0)return 0;for(a=e.ci;t>0&&a!==e.base_ci;a=a.previous)t--;return 0===t&&a!==e.base_ci?(n=1,r.i_ci=a):n=0,n},e.exports.lua_sethook=function(e,t,r,a){null!==t&&0!==r||(r=0,t=null),e.ci.callstatus&N.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=a,e.hookcount=e.basehookcount,e.hookmask=r},e.exports.lua_setlocal=function(e,t,r){var a=void 0;P(e);var n=C(e,t.i_ci,r);return n?(a=n.name,U.setobjs2s(e,n.pos,e.top-1),delete e.stack[--e.top]):a=null,P(e),a}},function(e,t,r){"use strict";var a=r(1),n="_"+a.LUA_VERSION_MAJOR+"_"+a.LUA_VERSION_MINOR;e.exports.LUA_VERSUFFIX=n,e.exports.lua_assert=function(e){};e.exports.LUA_COLIBNAME="coroutine",e.exports.luaopen_coroutine=r(29).luaopen_coroutine;e.exports.LUA_TABLIBNAME="table",e.exports.luaopen_table=r(28).luaopen_table;e.exports.LUA_OSLIBNAME="os",e.exports.luaopen_os=r(27).luaopen_os;e.exports.LUA_STRLIBNAME="string",e.exports.luaopen_string=r(26).luaopen_string;e.exports.LUA_UTF8LIBNAME="utf8",e.exports.luaopen_utf8=r(25).luaopen_utf8;e.exports.LUA_BITLIBNAME="bit32";e.exports.LUA_MATHLIBNAME="math",e.exports.luaopen_math=r(24).luaopen_math;e.exports.LUA_DBLIBNAME="debug",e.exports.luaopen_debug=r(23).luaopen_debug;e.exports.LUA_LOADLIBNAME="package",e.exports.luaopen_package=r(22).luaopen_package;e.exports.LUA_FENGARILIBNAME="fengari",e.exports.luaopen_fengari=r(21).luaopen_fengari;var u=r(34);e.exports.luaL_openlibs=u.luaL_openlibs},function(e,t,r){"use strict";var a=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],n=function(e,t){return~(-1<<e)<<t},u=function(e,t){return~n(e,t)},s=function(e,t,r,a){return e.code=e.code&u(a,r)|t<<r&n(a,r),l(e)},o=function(e,t){return s(e,t,14,18)},l=function(e){if("number"==typeof e)return{code:e,opcode:e>>0&n(6,0),A:e>>6&n(8,0),B:e>>23&n(9,0),C:e>>14&n(9,0),Bx:e>>14&n(18,0),Ax:e>>6&n(26,0),sBx:(e>>14&n(18,0))-131071};var t=e.code;return e.opcode=t>>0&n(6,0),e.A=t>>6&n(8,0),e.B=t>>23&n(9,0),e.C=t>>14&n(9,0),e.Bx=t>>14&n(18,0),e.Ax=t>>6&n(26,0),e.sBx=(t>>14&n(18,0))-131071,e};e.exports.BITRK=256,e.exports.CREATE_ABC=function(e,t,r,a){return l(e<<0|t<<6|r<<23|a<<14)},e.exports.CREATE_ABx=function(e,t,r){return l(e<<0|t<<6|r<<14)},e.exports.CREATE_Ax=function(e,t){return l(e<<0|t<<6)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return-257&e},e.exports.ISK=function(e){return 256&e},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=262143,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=131071,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=14,e.exports.POS_C=14,e.exports.POS_OP=0,e.exports.RKASK=function(e){return 256|e},e.exports.SETARG_A=function(e,t){return s(e,t,6,8)},e.exports.SETARG_Ax=function(e,t){return s(e,t,6,26)},e.exports.SETARG_B=function(e,t){return s(e,t,23,9)},e.exports.SETARG_Bx=o,e.exports.SETARG_C=function(e,t){return s(e,t,14,9)},e.exports.SETARG_sBx=function(e,t){return o(e,t+131071)},e.exports.SET_OPCODE=function(e,t){return e.code=e.code&u(6,0)|t<<0&n(6,0),l(e)},e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=18,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=l,e.exports.getBMode=function(e){return a[e]>>4&3},e.exports.getCMode=function(e){return a[e]>>2&3},e.exports.getOpMode=function(e){return 3&a[e]},e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=function(e){return 64&a[e]},e.exports.testTMode=function(e){return 128&a[e]}},function(e,t,r){"use strict";var a=r(0),n=a.LUA_MASKLINE,u=a.LUA_MASKCOUNT,s=a.LUA_MULTRET,o=a.constant_types,l=o.LUA_TBOOLEAN,i=o.LUA_TLCF,c=o.LUA_TLIGHTUSERDATA,_=o.LUA_TLNGSTR,f=o.LUA_TNIL,p=o.LUA_TNUMBER,v=o.LUA_TNUMFLT,h=o.LUA_TNUMINT,d=o.LUA_TSHRSTR,L=o.LUA_TTABLE,A=o.LUA_TUSERDATA,g=a.to_luastring,b=r(13),T=b.INDEXK,x=b.ISK,k=b.LFIELDS_PER_FLUSH,O=b.OpCodesI,E=O.OP_ADD,m=O.OP_BAND,U=O.OP_BNOT,R=O.OP_BOR,N=O.OP_BXOR,y=O.OP_CALL,S=O.OP_CLOSURE,I=O.OP_CONCAT,w=O.OP_DIV,M=O.OP_EQ,P=O.OP_EXTRAARG,D=O.OP_FORLOOP,C=O.OP_FORPREP,G=O.OP_GETTABLE,V=O.OP_GETTABUP,B=O.OP_GETUPVAL,K=O.OP_IDIV,F=O.OP_JMP,j=O.OP_LE,H=O.OP_LEN,X=O.OP_LOADBOOL,z=O.OP_LOADK,q=O.OP_LOADKX,Y=O.OP_LOADNIL,J=O.OP_LT,Z=O.OP_MOD,W=O.OP_MOVE,Q=O.OP_MUL,$=O.OP_NEWTABLE,ee=O.OP_NOT,te=O.OP_POW,re=O.OP_RETURN,ae=O.OP_SELF,ne=O.OP_SETLIST,ue=O.OP_SETTABLE,se=O.OP_SETTABUP,oe=O.OP_SETUPVAL,le=O.OP_SHL,ie=O.OP_SHR,ce=O.OP_SUB,_e=O.OP_TAILCALL,fe=O.OP_TEST,pe=O.OP_TESTSET,ve=O.OP_TFORCALL,he=O.OP_TFORLOOP,de=O.OP_UNM,Le=O.OP_VARARG,Ae=r(3),ge=Ae.LUA_MAXINTEGER,be=Ae.LUA_MININTEGER,Te=Ae.lua_numbertointeger,xe=r(2),ke=xe.lua_assert,Oe=xe.luai_nummod,Ee=r(5),me=r(16),Ue=r(10),Re=r(8),Ne=Re.luaS_bless,ye=Re.luaS_eqlngstr,Se=Re.luaS_hashlongstr,Ie=r(7),we=r(15),Me=r(9),Pe=r(11),De=function(e,t,r){return t+r.A},Ce=function(e,t,r){return t+r.B},Ge=function(e,t,r,a){return x(a.B)?r[T(a.B)]:e.stack[t+a.B]},Ve=function(e,t,r,a){return x(a.C)?r[T(a.C)]:e.stack[t+a.C]},Be=function(e,t,r,a){var n=r.A;0!==n&&me.luaF_close(e,t.l_base+n-1),t.l_savedpc+=r.sBx+a},Ke=function(e,t){Be(e,t,t.l_code[t.l_savedpc],1)},Fe=function(e,t,r){if(t.ttisnumber()&&r.ttisnumber())return Je(t,r)?1:0;if(t.ttisstring()&&r.ttisstring())return We(t.tsvalue(),r.tsvalue())<0?1:0;var a=we.luaT_callorderTM(e,t,r,we.TMS.TM_LT);return null===a&&Pe.luaG_ordererror(e,t,r),a?1:0},je=function(e,t,r){var a=void 0;return t.ttisnumber()&&r.ttisnumber()?Ze(t,r)?1:0:t.ttisstring()&&r.ttisstring()?We(t.tsvalue(),r.tsvalue())<=0?1:0:null!==(a=we.luaT_callorderTM(e,t,r,we.TMS.TM_LE))?a?1:0:(e.ci.callstatus|=Ue.CIST_LEQ,a=we.luaT_callorderTM(e,r,t,we.TMS.TM_LT),e.ci.callstatus^=Ue.CIST_LEQ,null===a&&Pe.luaG_ordererror(e,t,r),a?0:1)},He=function(e,t,r){if(t.ttype()!==r.ttype())return t.ttnov()!==r.ttnov()||t.ttnov()!==p?0:t.value===r.value?1:0;var a=void 0;switch(t.ttype()){case f:return 1;case l:return t.value==r.value?1:0;case c:case h:case v:case i:return t.value===r.value?1:0;case d:case _:return ye(t.tsvalue(),r.tsvalue())?1:0;case A:case L:if(t.value===r.value)return 1;if(null===e)return 0;null===(a=we.fasttm(e,t.value.metatable,we.TMS.TM_EQ))&&(a=we.fasttm(e,r.value.metatable,we.TMS.TM_EQ));break;default:return t.value===r.value?1:0}if(null===a)return 0;var n=new Ee.TValue;return we.luaT_callTM(e,a,t,r,n,1),n.l_isfalse()?0:1},Xe=function(e,t){var r=!1,a=ze(e,t<0?2:1);if(!1===a){var n=Ye(e);if(!1===n)return!1;0<n?(a=ge,t<0&&(r=!0)):(a=be,t>=0&&(r=!0))}return{stopnow:r,ilimit:a}},ze=function e(t,r){if(t.ttisfloat()){var a=t.value,n=Math.floor(a);if(a!==n){if(0===r)return!1;r>1&&(n+=1)}return Te(n)}if(t.ttisinteger())return t.value;if(st(t)){var u=new Ee.TValue;if(Ee.luaO_str2num(t.svalue(),u)===t.vslen()+1)return e(u,r)}return!1},qe=function(e){return e.ttisinteger()?e.value:ze(e,0)},Ye=function(e){if(e.ttnov()===p)return e.value;if(st(e)){var t=new Ee.TValue;if(Ee.luaO_str2num(e.svalue(),t)===e.vslen()+1)return t.value}return!1},Je=function(e,t){return e.value<t.value},Ze=function(e,t){return e.value<=t.value},We=function(e,t){var r=Se(e),a=Se(t);return r===a?0:r<a?-1:1},Qe=function(e,t,r){var a=void 0;switch(r.ttype()){case L:var n=r.value;if(null!==(a=we.fasttm(e,n.metatable,we.TMS.TM_LEN)))break;return void t.setivalue(Me.luaH_getn(n));case d:case _:return void t.setivalue(r.vslen());default:(a=we.luaT_gettmbyobj(e,r,we.TMS.TM_LEN)).ttisnil()&&Pe.luaG_typeerror(e,r,g("get length of",!0))}we.luaT_callTM(e,a,r,r,t,1)},$e=Math.imul||function(e,t){var r=65535&e,a=65535&t;return r*a+((e>>>16&65535)*a+r*(t>>>16&65535)<<16>>>0)|0},et=function(e,t,r){return 0===r&&Pe.luaG_runerror(e,g("attempt to divide by zero")),0|Math.floor(t/r)},tt=function(e,t,r){return 0===r&&Pe.luaG_runerror(e,g("attempt to perform 'n%%0'")),t-Math.floor(t/r)*r|0},rt=function(e,t){return t<0?t<=-32?0:e>>>-t:t>=32?0:e<<t},at=function(e,t,r,a){var n=e.cache;if(null!==n)for(var u=e.upvalues,s=u.length,o=0;o<s;o++){var l=u[o].instack?r[a+u[o].idx]:t[u[o].idx];if(n.upvals[o]!==l)return null}return n},nt=function(e,t,r,a,n){var u=t.upvalues.length,s=t.upvalues,o=new Ee.LClosure(e,u);o.p=t,e.stack[n].setclLvalue(o);for(var l=0;l<u;l++)s[l].instack?o.upvals[l]=me.luaF_findupval(e,a+s[l].idx):o.upvals[l]=r[s[l].idx];t.cache=o},ut=function(e){return e.ttisnumber()},st=function(e){return e.ttisstring()},ot=function(e,t){var r=e.stack[t];return!!r.ttisstring()||!!ut(r)&&(Ee.luaO_tostring(e,r),!0)},lt=function(e){return e.ttisstring()&&0===e.vslen()},it=function(e,t,r,a){var n=0;do{var u=e.stack[t-r],s=u.vslen(),o=u.svalue();a.set(o,n),n+=s}while(--r>0)},ct=function(e,t){ke(t>=2);do{var r=e.top,a=2;if((e.stack[r-2].ttisstring()||ut(e.stack[r-2]))&&ot(e,r-1))if(lt(e.stack[r-1]))ot(e,r-2);else if(lt(e.stack[r-2]))Ee.setobjs2s(e,r-2,r-1);else{var n=e.stack[r-1].vslen();for(a=1;a<t&&ot(e,r-a-1);a++){n+=e.stack[r-a-1].vslen()}var u=new Uint8Array(n);it(e,r,a,u);var s=Ne(e,u);Ee.setsvalue2s(e,r-a,s)}else we.luaT_trybinTM(e,e.stack[r-2],e.stack[r-1],e.stack[r-2],we.TMS.TM_CONCAT);for(t-=a-1;e.top>r-(a-1);)delete e.stack[--e.top]}while(t>1)},_t=function(e,t,r,a){for(var n=0;n<2e3;n++){var u=void 0;if(t.ttistable()){var s=Me.luaH_get(e,t.value,r);if(!s.ttisnil())return void Ee.setobj2s(e,a,s);if(null===(u=we.fasttm(e,t.value.metatable,we.TMS.TM_INDEX)))return void e.stack[a].setnilvalue()}else(u=we.luaT_gettmbyobj(e,t,we.TMS.TM_INDEX)).ttisnil()&&Pe.luaG_typeerror(e,t,g("index",!0));if(u.ttisfunction())return void we.luaT_callTM(e,u,t,r,e.stack[a],1);t=u}Pe.luaG_runerror(e,g("'__index' chain too long; possible loop",!0))},ft=function(e,t,r,a){for(var n=0;n<2e3;n++){var u=void 0;if(t.ttistable()){var s=t.value,o=Me.luaH_set(e,s,r);if(!o.ttisnil()||null===(u=we.fasttm(e,s.metatable,we.TMS.TM_NEWINDEX)))return a.ttisnil()?Me.luaH_delete(e,s,r):o.setfrom(a),void Me.invalidateTMcache(s)}else(u=we.luaT_gettmbyobj(e,t,we.TMS.TM_NEWINDEX)).ttisnil()&&Pe.luaG_typeerror(e,t,g("index",!0));if(u.ttisfunction())return void we.luaT_callTM(e,u,t,r,a,0);t=u}Pe.luaG_runerror(e,g("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=ut,e.exports.cvt2num=st,e.exports.luaV_gettable=_t,e.exports.luaV_concat=ct,e.exports.luaV_div=et,e.exports.luaV_equalobj=He,e.exports.luaV_execute=function(e){var t=e.ci;t.callstatus|=Ue.CIST_FRESH;e:for(;;){ke(t===e.ci);var r=t.func.value,a=r.p.k,o=t.l_base,l=t.l_code[t.l_savedpc++];e.hookmask&(n|u)&&Pe.luaG_traceexec(e);var i=De(0,o,l);switch(l.opcode){case W:Ee.setobjs2s(e,i,Ce(0,o,l));break;case z:var c=a[l.Bx];Ee.setobj2s(e,i,c);break;case q:ke(t.l_code[t.l_savedpc].opcode===P);var _=a[t.l_code[t.l_savedpc++].Ax];Ee.setobj2s(e,i,_);break;case X:e.stack[i].setbvalue(0!==l.B),0!==l.C&&t.l_savedpc++;break;case Y:for(var f=0;f<=l.B;f++)e.stack[i+f].setnilvalue();break;case B:var p=l.B;Ee.setobj2s(e,i,r.upvals[p]);break;case V:var v=r.upvals[l.B],h=Ve(e,o,a,l);_t(e,v,h,i);break;case G:var d=e.stack[Ce(0,o,l)],L=Ve(e,o,a,l);_t(e,d,L,i);break;case se:var A=r.upvals[l.A],b=Ge(e,o,a,l),T=Ve(e,o,a,l);ft(e,A,b,T);break;case oe:r.upvals[l.B].setfrom(e.stack[i]);break;case ue:var x=e.stack[i],O=Ge(e,o,a,l),Ae=Ve(e,o,a,l);ft(e,x,O,Ae);break;case $:e.stack[i].sethvalue(Me.luaH_new(e));break;case ae:var ge=Ce(0,o,l),be=Ve(e,o,a,l);Ee.setobjs2s(e,i+1,ge),_t(e,e.stack[ge],be,i);break;case E:var Te=Ge(e,o,a,l),xe=Ve(e,o,a,l),Re=void 0,Ne=void 0;Te.ttisinteger()&&xe.ttisinteger()?e.stack[i].setivalue(Te.value+xe.value|0):!1!==(Re=Ye(Te))&&!1!==(Ne=Ye(xe))?e.stack[i].setfltvalue(Re+Ne):we.luaT_trybinTM(e,Te,xe,e.stack[i],we.TMS.TM_ADD);break;case ce:var ye=Ge(e,o,a,l),Se=Ve(e,o,a,l),ze=void 0,Je=void 0;ye.ttisinteger()&&Se.ttisinteger()?e.stack[i].setivalue(ye.value-Se.value|0):!1!==(ze=Ye(ye))&&!1!==(Je=Ye(Se))?e.stack[i].setfltvalue(ze-Je):we.luaT_trybinTM(e,ye,Se,e.stack[i],we.TMS.TM_SUB);break;case Q:var Ze=Ge(e,o,a,l),We=Ve(e,o,a,l),ut=void 0,st=void 0;Ze.ttisinteger()&&We.ttisinteger()?e.stack[i].setivalue($e(Ze.value,We.value)):!1!==(ut=Ye(Ze))&&!1!==(st=Ye(We))?e.stack[i].setfltvalue(ut*st):we.luaT_trybinTM(e,Ze,We,e.stack[i],we.TMS.TM_MUL);break;case Z:var ot=Ge(e,o,a,l),lt=Ve(e,o,a,l),it=void 0,pt=void 0;ot.ttisinteger()&&lt.ttisinteger()?e.stack[i].setivalue(tt(e,ot.value,lt.value)):!1!==(it=Ye(ot))&&!1!==(pt=Ye(lt))?e.stack[i].setfltvalue(Oe(e,it,pt)):we.luaT_trybinTM(e,ot,lt,e.stack[i],we.TMS.TM_MOD);break;case te:var vt,ht=Ge(e,o,a,l),dt=Ve(e,o,a,l),Lt=void 0;!1!==(vt=Ye(ht))&&!1!==(Lt=Ye(dt))?e.stack[i].setfltvalue(Math.pow(vt,Lt)):we.luaT_trybinTM(e,ht,dt,e.stack[i],we.TMS.TM_POW);break;case w:var At,gt=Ge(e,o,a,l),bt=Ve(e,o,a,l),Tt=void 0;!1!==(At=Ye(gt))&&!1!==(Tt=Ye(bt))?e.stack[i].setfltvalue(At/Tt):we.luaT_trybinTM(e,gt,bt,e.stack[i],we.TMS.TM_DIV);break;case K:var xt=Ge(e,o,a,l),kt=Ve(e,o,a,l),Ot=void 0,Et=void 0;xt.ttisinteger()&&kt.ttisinteger()?e.stack[i].setivalue(et(e,xt.value,kt.value)):!1!==(Ot=Ye(xt))&&!1!==(Et=Ye(kt))?e.stack[i].setfltvalue(Math.floor(Ot/Et)):we.luaT_trybinTM(e,xt,kt,e.stack[i],we.TMS.TM_IDIV);break;case m:var mt,Ut=Ge(e,o,a,l),Rt=Ve(e,o,a,l),Nt=void 0;!1!==(mt=qe(Ut))&&!1!==(Nt=qe(Rt))?e.stack[i].setivalue(mt&Nt):we.luaT_trybinTM(e,Ut,Rt,e.stack[i],we.TMS.TM_BAND);break;case R:var yt,St=Ge(e,o,a,l),It=Ve(e,o,a,l),wt=void 0;!1!==(yt=qe(St))&&!1!==(wt=qe(It))?e.stack[i].setivalue(yt|wt):we.luaT_trybinTM(e,St,It,e.stack[i],we.TMS.TM_BOR);break;case N:var Mt,Pt=Ge(e,o,a,l),Dt=Ve(e,o,a,l),Ct=void 0;!1!==(Mt=qe(Pt))&&!1!==(Ct=qe(Dt))?e.stack[i].setivalue(Mt^Ct):we.luaT_trybinTM(e,Pt,Dt,e.stack[i],we.TMS.TM_BXOR);break;case le:var Gt,Vt=Ge(e,o,a,l),Bt=Ve(e,o,a,l),Kt=void 0;!1!==(Gt=qe(Vt))&&!1!==(Kt=qe(Bt))?e.stack[i].setivalue(rt(Gt,Kt)):we.luaT_trybinTM(e,Vt,Bt,e.stack[i],we.TMS.TM_SHL);break;case ie:var Ft,jt=Ge(e,o,a,l),Ht=Ve(e,o,a,l),Xt=void 0;!1!==(Ft=qe(jt))&&!1!==(Xt=qe(Ht))?e.stack[i].setivalue(rt(Ft,-Xt)):we.luaT_trybinTM(e,jt,Ht,e.stack[i],we.TMS.TM_SHR);break;case de:var zt=e.stack[Ce(0,o,l)],qt=void 0;zt.ttisinteger()?e.stack[i].setivalue(0|-zt.value):!1!==(qt=Ye(zt))?e.stack[i].setfltvalue(-qt):we.luaT_trybinTM(e,zt,zt,e.stack[i],we.TMS.TM_UNM);break;case U:var Yt=e.stack[Ce(0,o,l)];Yt.ttisinteger()?e.stack[i].setivalue(~Yt.value):we.luaT_trybinTM(e,Yt,Yt,e.stack[i],we.TMS.TM_BNOT);break;case ee:var Jt=e.stack[Ce(0,o,l)];e.stack[i].setbvalue(Jt.l_isfalse());break;case H:Qe(e,e.stack[i],e.stack[Ce(0,o,l)]);break;case I:var Zt=l.B,Wt=l.C;e.top=o+Wt+1,ct(e,Wt-Zt+1);var Qt=o+Zt;Ee.setobjs2s(e,i,Qt),Ie.adjust_top(e,t.top);break;case F:Be(e,t,l,0);break;case M:He(e,Ge(e,o,a,l),Ve(e,o,a,l))!==l.A?t.l_savedpc++:Ke(e,t);break;case J:Fe(e,Ge(e,o,a,l),Ve(e,o,a,l))!==l.A?t.l_savedpc++:Ke(e,t);break;case j:je(e,Ge(e,o,a,l),Ve(e,o,a,l))!==l.A?t.l_savedpc++:Ke(e,t);break;case fe:(l.C?e.stack[i].l_isfalse():!e.stack[i].l_isfalse())?t.l_savedpc++:Ke(e,t);break;case pe:var $t=Ce(0,o,l),er=e.stack[$t];(l.C?er.l_isfalse():!er.l_isfalse())?t.l_savedpc++:(Ee.setobjs2s(e,i,$t),Ke(e,t));break;case y:var tr=l.B,rr=l.C-1;if(0!==tr&&Ie.adjust_top(e,i+tr),!Ie.luaD_precall(e,i,rr)){t=e.ci;continue e}rr>=0&&Ie.adjust_top(e,t.top);break;case _e:var ar=l.B;if(0!==ar&&Ie.adjust_top(e,i+ar),!Ie.luaD_precall(e,i,s)){var nr=e.ci,ur=nr.previous,sr=nr.func,or=nr.funcOff,lr=ur.funcOff,ir=nr.l_base+sr.value.p.numparams;r.p.p.length>0&&me.luaF_close(e,ur.l_base);for(var cr=0;or+cr<ir;cr++)Ee.setobjs2s(e,lr+cr,or+cr);ur.l_base=lr+(nr.l_base-or),ur.top=lr+(e.top-or),Ie.adjust_top(e,ur.top),ur.l_code=nr.l_code,ur.l_savedpc=nr.l_savedpc,ur.callstatus|=Ue.CIST_TAIL,ur.next=null,t=e.ci=ur,ke(e.top===ur.l_base+e.stack[lr].value.p.maxstacksize);continue e}break;case re:r.p.p.length>0&&me.luaF_close(e,o);var _r=Ie.luaD_poscall(e,t,i,0!==l.B?l.B-1:e.top-i);if(t.callstatus&Ue.CIST_FRESH)return;t=e.ci,_r&&Ie.adjust_top(e,t.top),ke(t.callstatus&Ue.CIST_LUA),ke(t.l_code[t.l_savedpc-1].opcode===y);continue e;case D:if(e.stack[i].ttisinteger()){var fr=e.stack[i+2].value,pr=e.stack[i].value+fr|0,vr=e.stack[i+1].value;(0<fr?pr<=vr:vr<=pr)&&(t.l_savedpc+=l.sBx,e.stack[i].chgivalue(pr),e.stack[i+3].setivalue(pr))}else{var hr=e.stack[i+2].value,dr=e.stack[i].value+hr,Lr=e.stack[i+1].value;(0<hr?dr<=Lr:Lr<=dr)&&(t.l_savedpc+=l.sBx,e.stack[i].chgfltvalue(dr),e.stack[i+3].setfltvalue(dr))}break;case C:var Ar=e.stack[i],gr=e.stack[i+1],br=e.stack[i+2],Tr=void 0;if(Ar.ttisinteger()&&br.ttisinteger()&&(Tr=Xe(gr,br.value))){var xr=Tr.stopnow?0:Ar.value;gr.value=Tr.ilimit,Ar.value=xr-br.value|0}else{var kr,Or,Er;!1===(kr=Ye(gr))&&Pe.luaG_runerror(e,g("'for' limit must be a number",!0)),e.stack[i+1].setfltvalue(kr),!1===(Or=Ye(br))&&Pe.luaG_runerror(e,g("'for' step must be a number",!0)),e.stack[i+2].setfltvalue(Or),!1===(Er=Ye(Ar))&&Pe.luaG_runerror(e,g("'for' initial value must be a number",!0)),e.stack[i].setfltvalue(Er-Or)}t.l_savedpc+=l.sBx;break;case ve:var mr=i+3;Ee.setobjs2s(e,mr+2,i+2),Ee.setobjs2s(e,mr+1,i+1),Ee.setobjs2s(e,mr,i),Ie.adjust_top(e,mr+3),Ie.luaD_call(e,mr,l.C),Ie.adjust_top(e,t.top),l=t.l_code[t.l_savedpc++],i=De(0,o,l),ke(l.opcode===he);case he:e.stack[i+1].ttisnil()||(Ee.setobjs2s(e,i,i+1),t.l_savedpc+=l.sBx);break;case ne:var Ur=l.B,Rr=l.C;0===Ur&&(Ur=e.top-i-1),0===Rr&&(ke(t.l_code[t.l_savedpc].opcode===P),Rr=t.l_code[t.l_savedpc++].Ax);for(var Nr=e.stack[i].value,yr=(Rr-1)*k+Ur;Ur>0;Ur--)Me.luaH_setint(Nr,yr--,e.stack[i+Ur]);Ie.adjust_top(e,t.top);break;case S:var Sr=r.p.p[l.Bx],Ir=at(Sr,r.upvals,e.stack,o);null===Ir?nt(e,Sr,r.upvals,o,i):e.stack[i].setclLvalue(Ir);break;case Le:var wr=l.B-1,Mr=o-t.funcOff-r.p.numparams-1,Pr=void 0;for(Mr<0&&(Mr=0),wr<0&&(wr=Mr,Ie.luaD_checkstack(e,Mr),Ie.adjust_top(e,i+Mr)),Pr=0;Pr<wr&&Pr<Mr;Pr++)Ee.setobjs2s(e,i+Pr,o-Mr+Pr);for(;Pr<wr;Pr++)e.stack[i+Pr].setnilvalue();break;case P:throw Error("invalid opcode")}}},e.exports.luaV_finishOp=function(e){var t=e.ci,r=t.l_base,a=t.l_code[t.l_savedpc-1],n=a.opcode;switch(n){case E:case ce:case Q:case w:case K:case m:case R:case N:case le:case ie:case Z:case te:case de:case U:case H:case V:case G:case ae:Ee.setobjs2s(e,r+a.A,e.top-1),delete e.stack[--e.top];break;case j:case J:case M:var u=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&Ue.CIST_LEQ&&(ke(n===j),t.callstatus^=Ue.CIST_LEQ,u=!u),ke(t.l_code[t.l_savedpc].opcode===F),u!==!!a.A&&t.l_savedpc++;break;case I:var s=e.top-1,o=s-1-(r+a.B);Ee.setobjs2s(e,s-2,s),o>1&&(e.top=s-1,ct(e,o)),Ee.setobjs2s(e,t.l_base+a.A,e.top-1),Ie.adjust_top(e,t.top);break;case ve:ke(t.l_code[t.l_savedpc].opcode===he),Ie.adjust_top(e,t.top);break;case y:a.C-1>=0&&Ie.adjust_top(e,t.top)}},e.exports.luaV_imul=$e,e.exports.luaV_lessequal=je,e.exports.luaV_lessthan=Fe,e.exports.luaV_mod=tt,e.exports.luaV_objlen=Qe,e.exports.luaV_rawequalobj=function(e,t){return He(null,e,t)},e.exports.luaV_shiftl=rt,e.exports.luaV_tointeger=ze,e.exports.settable=ft,e.exports.tointeger=qe,e.exports.tonumber=Ye},function(e,t,r){"use strict";var a=r(0),n=a.constant_types,u=n.LUA_TTABLE,s=n.LUA_TUSERDATA,o=a.to_luastring,l=r(2).lua_assert,i=r(5),c=r(7),_=r(10),f=r(8),p=f.luaS_bless,v=f.luaS_new,h=r(9),d=r(11),L=r(14),A=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(function(e){return o(e)}),g=function(e){return A[e+1]},b={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},T=o("__name",!0),x=function(e,t,r,a,n,u){var s=e.top;if(i.pushobj2s(e,t),i.pushobj2s(e,r),i.pushobj2s(e,a),u||i.pushobj2s(e,n),e.ci.callstatus&_.CIST_LUA?c.luaD_call(e,s,u):c.luaD_callnoyield(e,s,u),u){var o=e.stack[e.top-1];delete e.stack[--e.top],n.setfrom(o)}},k=function(e,t,r,a,n){var u=E(e,t,n);return u.ttisnil()&&(u=E(e,r,n)),!u.ttisnil()&&(x(e,u,t,r,a,1),!0)},O=function(e,t,r){var a=h.luaH_getstr(e,r);return l(t<=b.TM_EQ),a.ttisnil()?(e.flags|=1<<t,null):a},E=function(e,t,r){var a=void 0;switch(t.ttnov()){case u:case s:a=t.value.metatable;break;default:a=e.l_G.mt[t.ttnov()]}return a?h.luaH_getstr(a,e.l_G.tmname[r]):i.luaO_nilobject};e.exports.fasttm=function(e,t,r){return null===t?null:t.flags&1<<r?null:O(t,r,e.l_G.tmname[r])},e.exports.TMS=b,e.exports.luaT_callTM=x,e.exports.luaT_callbinTM=k,e.exports.luaT_trybinTM=function(e,t,r,a,n){if(!k(e,t,r,a,n))switch(n){case b.TM_CONCAT:return d.luaG_concaterror(e,t,r);case b.TM_BAND:case b.TM_BOR:case b.TM_BXOR:case b.TM_SHL:case b.TM_SHR:case b.TM_BNOT:var u=L.tonumber(t),s=L.tonumber(r);return!1!==u&&!1!==s?d.luaG_tointerror(e,t,r):d.luaG_opinterror(e,t,r,o("perform bitwise operation on",!0));default:return d.luaG_opinterror(e,t,r,o("perform arithmetic on",!0))}},e.exports.luaT_callorderTM=function(e,t,r,a){var n=new i.TValue;return k(e,t,r,n,a)?!n.l_isfalse():null},e.exports.luaT_gettm=O,e.exports.luaT_gettmbyobj=E,e.exports.luaT_init=function(e){e.l_G.tmname[b.TM_INDEX]=new v(e,o("__index",!0)),e.l_G.tmname[b.TM_NEWINDEX]=new v(e,o("__newindex",!0)),e.l_G.tmname[b.TM_GC]=new v(e,o("__gc",!0)),e.l_G.tmname[b.TM_MODE]=new v(e,o("__mode",!0)),e.l_G.tmname[b.TM_LEN]=new v(e,o("__len",!0)),e.l_G.tmname[b.TM_EQ]=new v(e,o("__eq",!0)),e.l_G.tmname[b.TM_ADD]=new v(e,o("__add",!0)),e.l_G.tmname[b.TM_SUB]=new v(e,o("__sub",!0)),e.l_G.tmname[b.TM_MUL]=new v(e,o("__mul",!0)),e.l_G.tmname[b.TM_MOD]=new v(e,o("__mod",!0)),e.l_G.tmname[b.TM_POW]=new v(e,o("__pow",!0)),e.l_G.tmname[b.TM_DIV]=new v(e,o("__div",!0)),e.l_G.tmname[b.TM_IDIV]=new v(e,o("__idiv",!0)),e.l_G.tmname[b.TM_BAND]=new v(e,o("__band",!0)),e.l_G.tmname[b.TM_BOR]=new v(e,o("__bor",!0)),e.l_G.tmname[b.TM_BXOR]=new v(e,o("__bxor",!0)),e.l_G.tmname[b.TM_SHL]=new v(e,o("__shl",!0)),e.l_G.tmname[b.TM_SHR]=new v(e,o("__shr",!0)),e.l_G.tmname[b.TM_UNM]=new v(e,o("__unm",!0)),e.l_G.tmname[b.TM_BNOT]=new v(e,o("__bnot",!0)),e.l_G.tmname[b.TM_LT]=new v(e,o("__lt",!0)),e.l_G.tmname[b.TM_LE]=new v(e,o("__le",!0)),e.l_G.tmname[b.TM_CONCAT]=new v(e,o("__concat",!0)),e.l_G.tmname[b.TM_CALL]=new v(e,o("__call",!0))},e.exports.luaT_objtypename=function(e,t){var r=void 0;if(t.ttistable()&&null!==(r=t.value.metatable)||t.ttisfulluserdata()&&null!==(r=t.value.metatable)){var a=h.luaH_getstr(r,p(e,T));if(a.ttisstring())return a.svalue()}return g(t.ttnov())},e.exports.ttypename=g},function(e,t,r){"use strict";var a=r(0).constant_types.LUA_TNIL,n=r(5);e.exports.MAXUPVAL=255,e.exports.Proto=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null},e.exports.luaF_findupval=function(e,t){return e.stack[t]},e.exports.luaF_close=function(e,t){for(var r=t;r<e.top;r++){var a=e.stack[r];e.stack[r]=new n.TValue(a.type,a.value)}},e.exports.luaF_getlocalname=function(e,t,r){for(var a=0;a<e.locvars.length&&e.locvars[a].startpc<=r;a++)if(r<e.locvars[a].endpc&&0==--t)return e.locvars[a].varname.getstr();return null},e.exports.luaF_initupvals=function(e,t){for(var r=0;r<t.nupvalues;r++)t.upvals[r]=new n.TValue(a,null)},e.exports.luaF_newLclosure=function(e,t){return new n.LClosure(e,t)}},function(e,t,r){"use strict";var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=r(2).lua_assert,s=function(){function e(t,r,a){n(this,e),this.L=t,u("function"==typeof r,"ZIO requires a reader"),this.reader=r,this.data=a,this.n=0,this.buffer=null,this.off=0}return a(e,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:o(this)}}]),e}(),o=function(e){var t=e.reader(e.L,e.data);if(null===t)return-1;u(t instanceof Uint8Array,"Should only load binary of array of bytes");var r=t.length;return 0===r?-1:(e.buffer=t,e.off=0,e.n=r-1,e.buffer[e.off++])};e.exports.EOZ=-1,e.exports.luaZ_buffer=function(e){return e.buffer.subarray(0,e.n)},e.exports.luaZ_buffremove=function(e,t){e.n-=t},e.exports.luaZ_fill=o,e.exports.luaZ_read=function(e,t,r,a){for(;a;){if(0===e.n){if(-1===o(e))return a;e.n++,e.off--}for(var n=a<=e.n?a:e.n,u=0;u<n;u++)t[r++]=e.buffer[e.off++];e.n-=n,0===e.n&&(e.buffer=null),a-=n}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0},e.exports.luaZ_resizebuffer=function(e,t,r){var a=new Uint8Array(r);t.buffer&&a.set(t.buffer),t.buffer=a},e.exports.MBuffer=function e(){n(this,e),this.buffer=null,this.n=0},e.exports.ZIO=s},function(e,t,r){"use strict";var a=r(0),n=a.LUA_MULTRET,u=a.LUA_OPBNOT,s=a.LUA_OPEQ,o=a.LUA_OPLE,l=a.LUA_OPLT,i=a.LUA_OPUNM,c=a.LUA_REGISTRYINDEX,_=a.LUA_RIDX_GLOBALS,f=a.LUA_VERSION_NUM,p=a.constant_types,v=p.LUA_NUMTAGS,h=p.LUA_TBOOLEAN,d=p.LUA_TCCL,L=p.LUA_TFUNCTION,A=p.LUA_TLCF,g=p.LUA_TLCL,b=p.LUA_TLIGHTUSERDATA,T=p.LUA_TLNGSTR,x=p.LUA_TNIL,k=p.LUA_TNONE,O=p.LUA_TNUMFLT,E=p.LUA_TNUMINT,m=p.LUA_TSHRSTR,U=p.LUA_TTABLE,R=p.LUA_TTHREAD,N=p.LUA_TUSERDATA,y=a.thread_status.LUA_OK,S=a.from_userstring,I=a.to_luastring,w=r(2).api_check,M=r(11),P=r(7),D=r(37).luaU_dump,C=r(16),G=r(5),V=r(10),B=r(8),K=B.luaS_bless,F=B.luaS_new,j=B.luaS_newliteral,H=r(15),X=r(3).LUAI_MAXSTACK,z=r(14),q=r(9),Y=r(17).ZIO,J=G.TValue,Z=G.CClosure,W=function(e){e.top++,w(e,e.top<=e.ci.top,"stack overflow")},Q=function(e,t){w(e,t<e.top-e.ci.funcOff,"not enough elements in the stack")},$=function(e){if(!e)throw TypeError("invalid argument")},ee=function(e){$("number"==typeof e&&(0|e)===e)},te=function(e){return e!==G.luaO_nilobject},re=function(e,t){var r=e.ci;if(t>0){var a=r.funcOff+t;return w(e,t<=r.top-(r.funcOff+1),"unacceptable index"),a>=e.top?G.luaO_nilobject:e.stack[a]}return t>c?(w(e,0!==t&&-t<=e.top,"invalid index"),e.stack[e.top+t]):t===c?e.l_G.l_registry:(w(e,(t=c-t)<=C.MAXUPVAL+1,"upvalue index too large"),r.func.ttislcf()?G.luaO_nilobject:t<=r.func.value.nupvalues?r.func.value.upvalue[t-1]:G.luaO_nilobject)},ae=function(e,t){var r=e.ci;if(t>0){var a=r.funcOff+t;return w(e,t<=r.top-(r.funcOff+1),"unacceptable index"),a>=e.top?null:a}if(t>c)return w(e,0!==t&&-t<=e.top,"invalid index"),e.top+t;throw Error("attempt to use pseudo-index")},ne=function(e,t){var r=e.ci.funcOff,a=void 0;t>=0?(w(e,t<=e.stack_last-(r+1),"new top too large"),a=r+1+t):(w(e,-(t+1)<=e.top-(r+1),"invalid new top"),a=e.top+t+1),P.adjust_top(e,a)},ue=function(e,t){ne(e,-t-1)},se=function(e,t,r){for(;t<r;t++,r--){var a=e.stack[t],n=new J(a.type,a.value);G.setobjs2s(e,t,r),G.setobj2s(e,r,n)}},oe=function(e,t,r){var a=e.top-1,n=ae(e,t),u=e.stack[n];w(e,te(u)&&t>c,"index not in the stack"),w(e,(r>=0?r:-r)<=a-n+1,"invalid 'n'");var s=r>=0?a-r:n-r-1;se(e,n,s),se(e,s+1,e.top-1),se(e,n,e.top-1)},le=function(e,t,r){var a=re(e,t);re(e,r).setfrom(a)},ie=function(e,t,r){if($("function"==typeof t),ee(r),0===r)e.stack[e.top]=new J(A,t);else{Q(e,r),w(e,r<=C.MAXUPVAL,"upvalue index too large");for(var a=new Z(e,t,r),n=0;n<r;n++)a.upvalue[n].setfrom(e.stack[e.top-r+n]);for(var u=1;u<r;u++)delete e.stack[--e.top];r>0&&--e.top,e.stack[e.top].setclCvalue(a)}W(e)},ce=ie,_e=function(e,t){ie(e,t,0)},fe=_e,pe=function(e,t,r){var a=F(e,S(r));Q(e,1),G.pushsvalue2s(e,a),w(e,e.top<=e.ci.top,"stack overflow"),z.settable(e,t,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},ve=function(e,t){pe(e,q.luaH_getint(e.l_G.l_registry.value,_),t)},he=function(e,t,r){var a=F(e,S(r));return G.pushsvalue2s(e,a),w(e,e.top<=e.ci.top,"stack overflow"),z.luaV_gettable(e,t,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},de=function(e,t,r){var a=re(e,t);return ee(r),w(e,a.ttistable(),"table expected"),G.pushobj2s(e,q.luaH_getint(a.value,r)),w(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},Le=function(e,t,r){var a=new G.TValue(U,q.luaH_new(e));e.stack[e.top]=a,W(e)},Ae=function(e,t,r){switch(ee(r),t.ttype()){case d:var a=t.value;return 1<=r&&r<=a.nupvalues?{name:I("",!0),val:a.upvalue[r-1]}:null;case g:var n=t.value,u=n.p;if(!(1<=r&&r<=u.upvalues.length))return null;var s=u.upvalues[r-1].name;return{name:s?s.getstr():I("(*no name)",!0),val:n.upvals[r-1]};default:return null}},ge=function(e,t){var r=re(e,t);if(!r.ttisstring()){if(!z.cvt2str(r))return null;G.luaO_tostring(e,r)}return r.svalue()},be=ge,Te=function(e,t){return z.tointeger(re(e,t))},xe=function(e,t){return z.tonumber(re(e,t))},ke=new WeakMap,Oe=function(e,t){P.luaD_callnoyield(e,t.funcOff,t.nresults)},Ee=function(e,t){var r=re(e,t);return te(r)?r.ttnov():k},me=I("?"),Ue=function(e,t,r){w(e,r===n||e.ci.top-e.top>=r-t,"results from function overflow current stack size")},Re=function(e,t,r,a,u){w(e,null===u||!(e.ci.callstatus&V.CIST_LUA),"cannot use continuations inside hooks"),Q(e,t+1),w(e,e.status===y,"cannot do calls on non-normal thread"),Ue(e,t,r);var s=e.top-(t+1);null!==u&&0===e.nny?(e.ci.c_k=u,e.ci.c_ctx=a,P.luaD_call(e,s,r)):P.luaD_callnoyield(e,s,r),r===n&&e.ci.top<e.top&&(e.ci.top=e.top)},Ne=function(e,t,r,a,u,s){w(e,null===s||!(e.ci.callstatus&V.CIST_LUA),"cannot use continuations inside hooks"),Q(e,t+1),w(e,e.status===y,"cannot do calls on non-normal thread"),Ue(e,t,r);var o=void 0,l=void 0;l=0===a?0:ae(e,a);var i=e.top-(t+1);if(null===s||e.nny>0){var c={funcOff:i,nresults:r};o=P.luaD_pcall(e,Oe,c,i,l)}else{var _=e.ci;_.c_k=s,_.c_ctx=u,_.extra=i,_.c_old_errfunc=e.errfunc,e.errfunc=l,_.callstatus&=~V.CIST_OAH|e.allowhook,_.callstatus|=V.CIST_YPCALL,P.luaD_call(e,i,r),_.callstatus&=~V.CIST_YPCALL,e.errfunc=_.c_old_errfunc,o=y}return r===n&&e.ci.top<e.top&&(e.ci.top=e.top),o},ye=function(e,t,r){var a=re(e,t);w(e,a.ttisLclosure(),"Lua function expected");var n=a.value;return ee(r),w(e,1<=r&&r<=n.p.upvalues.length,"invalid upvalue index"),{f:n,i:r-1}};e.exports.api_incr_top=W,e.exports.api_checknelems=Q,e.exports.lua_absindex=function(e,t){return t>0||t<=c?t:e.top-e.ci.funcOff+t},e.exports.lua_arith=function(e,t){t!==i&&t!==u?Q(e,2):(Q(e,1),G.pushobj2s(e,e.stack[e.top-1]),w(e,e.top<=e.ci.top,"stack overflow")),G.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,t){var r=e.l_G.panic;return e.l_G.panic=t,r},e.exports.lua_atnativeerror=function(e,t){var r=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,r},e.exports.lua_call=function(e,t,r){Re(e,t,r,0,null)},e.exports.lua_callk=Re,e.exports.lua_checkstack=function(e,t){var r=void 0,a=e.ci;w(e,t>=0,"negative 'n'"),e.stack_last-e.top>t?r=!0:e.top+V.EXTRA_STACK>X-t?r=!1:(P.luaD_growstack(e,t),r=!0);return r&&a.top<e.top+t&&(a.top=e.top+t),r},e.exports.lua_compare=function(e,t,r,a){var n=re(e,t),u=re(e,r),i=0;if(te(n)&&te(u))switch(a){case s:i=z.luaV_equalobj(e,n,u);break;case l:i=z.luaV_lessthan(e,n,u);break;case o:i=z.luaV_lessequal(e,n,u);break;default:w(e,!1,"invalid option")}return i},e.exports.lua_concat=function(e,t){Q(e,t),t>=2?z.luaV_concat(e,t):0===t&&(G.pushsvalue2s(e,K(e,I("",!0))),w(e,e.top<=e.ci.top,"stack overflow"))},e.exports.lua_copy=le,e.exports.lua_createtable=Le,e.exports.lua_dump=function(e,t,r,a){Q(e,1);var n=e.stack[e.top-1];return n.ttisLclosure()?D(e,n.value.p,t,r,a):1},e.exports.lua_error=function(e){Q(e,1),M.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},e.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},e.exports.lua_getfield=function(e,t,r){return he(e,re(e,t),r)},e.exports.lua_getglobal=function(e,t){return he(e,q.luaH_getint(e.l_G.l_registry.value,_),t)},e.exports.lua_geti=function(e,t,r){var a=re(e,t);return ee(r),e.stack[e.top]=new J(E,r),W(e),z.luaV_gettable(e,a,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,t){var r=re(e,t),a=void 0,n=!1;switch(r.ttnov()){case U:case N:a=r.value.metatable;break;default:a=e.l_G.mt[r.ttnov()]}return null!==a&&void 0!==a&&(e.stack[e.top]=new J(U,a),W(e),n=!0),n},e.exports.lua_gettable=function(e,t){var r=re(e,t);return z.luaV_gettable(e,r,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,t,r){var a=Ae(0,re(e,t),r);if(a){var n=a.name,u=a.val;return G.pushobj2s(e,u),w(e,e.top<=e.ci.top,"stack overflow"),n}return null},e.exports.lua_getuservalue=function(e,t){var r=re(e,t);w(e,r.ttisfulluserdata(),"full userdata expected");var a=r.value.uservalue;return e.stack[e.top]=new J(a.type,a.value),W(e),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,t){oe(e,t,1)},e.exports.lua_isboolean=function(e,t){return Ee(e,t)===h},e.exports.lua_iscfunction=function(e,t){var r=re(e,t);return r.ttislcf(r)||r.ttisCclosure()},e.exports.lua_isfunction=function(e,t){return Ee(e,t)===L},e.exports.lua_isinteger=function(e,t){return re(e,t).ttisinteger()},e.exports.lua_islightuserdata=function(e,t){return Ee(e,t)===b},e.exports.lua_isnil=function(e,t){return Ee(e,t)===x},e.exports.lua_isnone=function(e,t){return Ee(e,t)===k},e.exports.lua_isnoneornil=function(e,t){return Ee(e,t)<=0},e.exports.lua_isnumber=function(e,t){return!1!==z.tonumber(re(e,t))},e.exports.lua_isproxy=function(e,t){var r=ke.get(e);return!!r&&(null===t||t.l_G===r)},e.exports.lua_isstring=function(e,t){var r=re(e,t);return r.ttisstring()||z.cvt2str(r)},e.exports.lua_istable=function(e,t){return re(e,t).ttistable()},e.exports.lua_isthread=function(e,t){return Ee(e,t)===R},e.exports.lua_isuserdata=function(e,t){var r=re(e,t);return r.ttisfulluserdata(r)||r.ttislightuserdata()},e.exports.lua_len=function(e,t){var r=re(e,t),a=new J;z.luaV_objlen(e,a,r),e.stack[e.top]=a,W(e)},e.exports.lua_load=function(e,t,r,a,n){a=a?S(a):me,null!==n&&(n=S(n));var u=new Y(e,t,r),s=P.luaD_protectedparser(e,u,a,n);if(s===y){var o=e.stack[e.top-1].value;if(o.nupvalues>=1){var l=q.luaH_getint(e.l_G.l_registry.value,_);o.upvals[0].setfrom(l)}}return s},e.exports.lua_newtable=function(e){Le(e)},e.exports.lua_newuserdata=function(e,t){var r=function(e,t){return new G.Udata(e,t)}(e,t);return e.stack[e.top]=new G.TValue(N,r),W(e),r.data},e.exports.lua_next=function(e,t){var r=re(e,t);return w(e,r.ttistable(),"table expected"),e.stack[e.top]=new J,q.luaH_next(e,r.value,e.top-1)?(W(e),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,t,r,a){return Ne(e,t,r,a,0,null)},e.exports.lua_pcallk=Ne,e.exports.lua_pop=ue,e.exports.lua_pushboolean=function(e,t){e.stack[e.top]=new J(h,!!t),W(e)},e.exports.lua_pushcclosure=ie,e.exports.lua_pushcfunction=_e,e.exports.lua_pushfstring=function(e,t){t=S(t);for(var r=arguments.length,a=Array(r>2?r-2:0),n=2;n<r;n++)a[n-2]=arguments[n];return G.luaO_pushvfstring(e,t,a)},e.exports.lua_pushglobaltable=function(e){de(e,c,_)},e.exports.lua_pushinteger=function(e,t){ee(t),e.stack[e.top]=new J(E,t),W(e)},e.exports.lua_pushjsclosure=ce,e.exports.lua_pushjsfunction=fe,e.exports.lua_pushlightuserdata=function(e,t){e.stack[e.top]=new J(b,t),W(e)},e.exports.lua_pushliteral=function(e,t){if(void 0===t||null===t)e.stack[e.top]=new J(x,null),e.top++;else{$("string"==typeof t);var r=j(e,t);G.pushsvalue2s(e,r),t=r.getstr()}return w(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushlstring=function(e,t,r){ee(r);var a=void 0;return 0===r?(t=I("",!0),a=K(e,t)):(t=S(t),w(e,t.length>=r,"invalid length to lua_pushlstring"),a=F(e,t.subarray(0,r))),G.pushsvalue2s(e,a),w(e,e.top<=e.ci.top,"stack overflow"),a.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new J(x,null),W(e)},e.exports.lua_pushnumber=function(e,t){$("number"==typeof t),e.stack[e.top]=new J(O,t),W(e)},e.exports.lua_pushstring=function(e,t){if(void 0===t||null===t)e.stack[e.top]=new J(x,null),e.top++;else{var r=F(e,S(t));G.pushsvalue2s(e,r),t=r.getstr()}return w(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new J(R,e),W(e),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,t){G.pushobj2s(e,re(e,t)),w(e,e.top<=e.ci.top,"stack overflow")},e.exports.lua_pushvfstring=function(e,t,r){return t=S(t),G.luaO_pushvfstring(e,t,r)},e.exports.lua_rawequal=function(e,t,r){var a=re(e,t),n=re(e,r);return te(a)&&te(n)?z.luaV_equalobj(null,a,n):0},e.exports.lua_rawget=function(e,t){var r=re(e,t);return w(e,r.ttistable(r),"table expected"),G.setobj2s(e,e.top-1,q.luaH_get(e,r.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=de,e.exports.lua_rawgetp=function(e,t,r){var a=re(e,t);w(e,a.ttistable(),"table expected");var n=new J(b,r);return G.pushobj2s(e,q.luaH_get(e,a.value,n)),w(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,t){var r=re(e,t);switch(r.ttype()){case m:case T:return r.vslen();case N:return r.value.len;case U:return q.luaH_getn(r.value);default:return 0}},e.exports.lua_rawset=function(e,t){Q(e,2);var r=re(e,t);w(e,r.ttistable(),"table expected");var a=e.stack[e.top-2],n=e.stack[e.top-1];n.ttisnil()?q.luaH_delete(e,r.value,a):q.luaH_set(e,r.value,a).setfrom(n);q.invalidateTMcache(r.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,t,r){ee(r),Q(e,1);var a=re(e,t);w(e,a.ttistable(),"table expected"),q.luaH_setint(a.value,r,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,t,r){Q(e,1);var a=re(e,t);w(e,a.ttistable(),"table expected");var n=new J(b,r),u=e.stack[e.top-1];u.ttisnil()?q.luaH_delete(e,a.value,n):q.luaH_set(e,a.value,n).setfrom(u);delete e.stack[--e.top]},e.exports.lua_register=function(e,t,r){_e(e,r),ve(e,t)},e.exports.lua_remove=function(e,t){oe(e,t,-1),ue(e,1)},e.exports.lua_replace=function(e,t){le(e,-1,t),ue(e,1)},e.exports.lua_rotate=oe,e.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},e.exports.lua_setfield=function(e,t,r){pe(e,re(e,t),r)},e.exports.lua_setglobal=ve,e.exports.lua_seti=function(e,t,r){ee(r),Q(e,1);var a=re(e,t);e.stack[e.top]=new J(E,r),W(e),z.settable(e,a,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,t){Q(e,1);var r=void 0,a=re(e,t);switch(e.stack[e.top-1].ttisnil()?r=null:(w(e,e.stack[e.top-1].ttistable(),"table expected"),r=e.stack[e.top-1].value),a.ttnov()){case N:case U:a.value.metatable=r;break;default:e.l_G.mt[a.ttnov()]=r}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,t){Q(e,2);var r=re(e,t);z.settable(e,r,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=ne,e.exports.lua_setupvalue=function(e,t,r){var a=re(e,t);Q(e,1);var n=Ae(0,a,r);if(n){var u=n.name;return n.val.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],u}return null},e.exports.lua_setuservalue=function(e,t){Q(e,1);var r=re(e,t);w(e,r.ttisfulluserdata(),"full userdata expected"),r.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,t){var r=new J,a=G.luaO_str2num(t,r);return 0!==a&&(e.stack[e.top]=r,W(e)),a},e.exports.lua_toboolean=function(e,t){return!re(e,t).l_isfalse()},e.exports.lua_tocfunction=function(e,t){var r=re(e,t);return r.ttislcf()||r.ttisCclosure()?r.value:null},e.exports.lua_todataview=function(e,t){var r=ge(e,t);return new DataView(r.buffer,r.byteOffset,r.byteLength)},e.exports.lua_tointeger=function(e,t){var r=Te(e,t);return!1===r?0:r},e.exports.lua_tointegerx=Te,e.exports.lua_tojsstring=function(e,t){var r=re(e,t);if(!r.ttisstring()){if(!z.cvt2str(r))return null;G.luaO_tostring(e,r)}return r.jsstring()},e.exports.lua_tolstring=ge,e.exports.lua_tonumber=function(e,t){var r=xe(e,t);return!1===r?0:r},e.exports.lua_tonumberx=xe,e.exports.lua_topointer=function(e,t){var r=re(e,t);switch(r.ttype()){case U:case g:case d:case A:case R:case N:case b:return r.value;default:return null}},e.exports.lua_toproxy=function(e,t){var r,a,n,u,s=re(e,t);return r=e.l_G,a=s.type,n=s.value,u=function(e){w(e,e instanceof V.lua_State&&r===e.l_G,"must be from same global state"),e.stack[e.top]=new J(a,n),W(e)},ke.set(u,r),u},e.exports.lua_tostring=be,e.exports.lua_tothread=function(e,t){var r=re(e,t);return r.ttisthread()?r.value:null},e.exports.lua_touserdata=function(e,t){var r=re(e,t);switch(r.ttnov()){case N:return r.value.data;case b:return r.value;default:return null}},e.exports.lua_type=Ee,e.exports.lua_typename=function(e,t){return w(e,k<=t&&t<v,"invalid tag"),H.ttypename(t)},e.exports.lua_upvalueid=function(e,t,r){var a=re(e,t);switch(a.ttype()){case g:var n=ye(e,t,r);return n.f.upvals[n.i];case d:var u=a.value;return w(e,r|0===r&&1<=r&&r<=u.nupvalues,"invalid upvalue index"),u.upvalue[r-1];default:return w(e,!1,"closure expected"),null}},e.exports.lua_upvaluejoin=function(e,t,r,a,n){var u=ye(e,t,r),s=ye(e,a,n),o=s.f.upvals[s.i];u.f.upvals[u.i]=o},e.exports.lua_version=function(e){return null===e?f:e.l_G.version},e.exports.lua_xmove=function(e,t,r){if(e!==t){Q(e,r),w(e,e.l_G===t.l_G,"moving among independent states"),w(e,t.ci.top-t.top>=r,"stack overflow"),e.top-=r;for(var a=0;a<r;a++)t.stack[t.top]=new G.TValue,G.setobj2s(t,t.top,e.stack[e.top+a]),delete e.stack[e.top+a],t.top++}}},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(0),u=n.constant_types.LUA_TLNGSTR,s=n.thread_status.LUA_ERRSYNTAX,o=n.to_luastring,l=r(2),i=l.LUA_MINBUFFER,c=l.MAX_INT,_=l.lua_assert,f=r(11),p=r(7),v=r(31),h=v.lisdigit,d=v.lislalnum,L=v.lislalpha,A=v.lisspace,g=v.lisxdigit,b=r(5),T=r(8),x=T.luaS_bless,k=T.luaS_hash,O=T.luaS_hashlongstr,E=T.luaS_new,m=r(9),U=r(17),R=U.EOZ,N=U.luaZ_buffer,y=U.luaZ_buffremove,S=U.luaZ_resetbuffer,I=U.luaZ_resizebuffer,w=o("_ENV",!0),M={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},P=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map(function(e,t){return o(e)}),D=function e(){a(this,e),this.r=NaN,this.i=NaN,this.ts=null},C=function e(){a(this,e),this.token=NaN,this.seminfo=new D},G=function(e,t){var r=e.buff;if(r.n+1>r.buffer.length){r.buffer.length>=c/2&&Y(e,o("lexical element too long",!0),0);var a=2*r.buffer.length;I(e.L,r,a)}r.buffer[r.n++]=t<0?255+t+1:t},V=function(e,t){if(t<257)return b.luaO_pushfstring(e.L,o("'%c'",!0),t);var r=P[t-257];return t<289?b.luaO_pushfstring(e.L,o("'%s'",!0),r):r},B=function(e){return 10===e.current||13===e.current},K=function(e){e.current=e.z.zgetc()},F=function(e){G(e,e.current),K(e)},j=function(e,t){var r=e.L,a=E(r,t),n=m.luaH_set(r,e.h,new b.TValue(u,a));if(n.ttisnil())n.setbvalue(!0);else{var s=e.h.strong.get(O(a));_(s.value==n),a=s.key.tsvalue()}return a},H=function(e){var t=e.current;_(B(e)),K(e),B(e)&&e.current!==t&&K(e),++e.linenumber>=c&&Y(e,o("chunk has too many lines",!0),0)},X=function(e,t){return e.current===t&&(K(e),!0)},z=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(F(e),!0)},q=function(e,t){var r="Ee",a=e.current;for(_(h(e.current)),F(e),48===a&&z(e,"xX")&&(r="Pp");;)if(z(e,r)&&z(e,"-+"),g(e.current))F(e);else{if(46!==e.current)break;F(e)}var n=new b.TValue;return 0===b.luaO_str2num(N(e.buff),n)&&Y(e,o("malformed number",!0),290),n.ttisinteger()?(t.i=n.value,291):(_(n.ttisfloat()),t.r=n.value,290)},Y=function(e,t,r){t=f.luaG_addinfo(e.L,t,e.source,e.linenumber),r&&b.luaO_pushfstring(e.L,o("%s near %s"),t,function(e,t){switch(t){case 292:case 293:case 290:case 291:return b.luaO_pushfstring(e.L,o("'%s'",!0),N(e.buff));default:return V(e,t)}}(e,r)),p.luaD_throw(e.L,s)},J=function(e){var t=0,r=e.current;for(_(91===r||93===r),F(e);61===e.current;)F(e),t++;return e.current===r?t:-t-1},Z=function(e,t,r){var a=e.linenumber;F(e),B(e)&&H(e);for(var n=!1;!n;)switch(e.current){case R:Y(e,o("unfinished long "+(t?"string":"comment")+" (starting at line "+a+")"),289);break;case 93:J(e)===r&&(F(e),n=!0);break;case 10:case 13:G(e,10),H(e),t||S(e.buff);break;default:t?F(e):K(e)}t&&(t.ts=j(e,e.buff.buffer.subarray(2+r,e.buff.n-(2+r))))},W=function(e,t,r){t||(e.current!==R&&F(e),Y(e,r,293))},Q=function(e){return F(e),W(e,g(e.current),o("hexadecimal digit expected",!0)),b.luaO_hexavalue(e.current)},$=function(e){var t=Q(e);return t=(t<<4)+Q(e),y(e.buff,2),t},ee=function(e){for(var t=new Uint8Array(b.UTF8BUFFSZ),r=b.luaO_utf8esc(t,function(e){var t=4;F(e),W(e,123===e.current,o("missing '{'",!0));var r=Q(e);for(F(e);g(e.current);)t++,r=(r<<4)+b.luaO_hexavalue(e.current),W(e,r<=1114111,o("UTF-8 value too large",!0)),F(e);return W(e,125===e.current,o("missing '}'",!0)),K(e),y(e.buff,t),r}(e));r>0;r--)G(e,t[b.UTF8BUFFSZ-r])},te=function(e){var t=0,r=void 0;for(r=0;r<3&&h(e.current);r++)t=10*t+e.current-48,F(e);return W(e,t<=255,o("decimal escape too large",!0)),y(e.buff,r),t},re=function(e,t,r){for(F(e);e.current!==t;)switch(e.current){case R:Y(e,o("unfinished string",!0),289);break;case 10:case 13:Y(e,o("unfinished string",!0),293);break;case 92:F(e);var a=void 0,n=void 0;switch(e.current){case 97:n=7,a="read_save";break;case 98:n=8,a="read_save";break;case 102:n=12,a="read_save";break;case 110:n=10,a="read_save";break;case 114:n=13,a="read_save";break;case 116:n=9,a="read_save";break;case 118:n=11,a="read_save";break;case 120:n=$(e),a="read_save";break;case 117:ee(e),a="no_save";break;case 10:case 13:H(e),n=10,a="only_save";break;case 92:case 34:case 39:n=e.current,a="read_save";break;case R:a="no_save";break;case 122:for(y(e.buff,1),K(e);A(e.current);)B(e)?H(e):K(e);a="no_save";break;default:W(e,h(e.current),o("invalid escape sequence",!0)),n=te(e),a="only_save"}"read_save"===a&&K(e),"read_save"!==a&&"only_save"!==a||(y(e.buff,1),G(e,n));break;default:F(e)}F(e),r.ts=j(e,e.buff.buffer.subarray(1,e.buff.n-1))},ae=Object.create(null);P.forEach(function(e,t){return ae[k(e)]=t});var ne=function(e,t){for(S(e.buff);;)switch(_("number"==typeof e.current),e.current){case 10:case 13:H(e);break;case 32:case 12:case 9:case 11:K(e);break;case 45:if(K(e),45!==e.current)return 45;if(K(e),91===e.current){var r=J(e);if(S(e.buff),r>=0){Z(e,null,r),S(e.buff);break}}for(;!B(e)&&e.current!==R;)K(e);break;case 91:var a=J(e);return a>=0?(Z(e,t,a),293):(-1!==a&&Y(e,o("invalid long string delimiter",!0),293),91);case 61:return K(e),X(e,61)?282:61;case 60:return K(e),X(e,61)?284:X(e,60)?286:60;case 62:return K(e),X(e,61)?283:X(e,62)?287:62;case 47:return K(e),X(e,47)?279:47;case 126:return K(e),X(e,61)?285:126;case 58:return K(e),X(e,58)?288:58;case 34:case 39:return re(e,e.current,t),293;case 46:return F(e),X(e,46)?X(e,46)?281:280:h(e.current)?q(e,t):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return q(e,t);case R:return 289;default:if(L(e.current)){do{F(e)}while(d(e.current));var n=j(e,N(e.buff));t.ts=n;var u=ae[O(n)];return void 0!==u&&u<=22?u+257:292}var s=e.current;return K(e),s}};e.exports.FIRST_RESERVED=257,e.exports.LUA_ENV=w,e.exports.LexState=function e(){a(this,e),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new C,this.lookahead=new C,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null},e.exports.RESERVED=M,e.exports.isreserved=function(e){var t=ae[O(e)];return void 0!==t&&t<=22},e.exports.luaX_lookahead=function(e){return _(289===e.lookahead.token),e.lookahead.token=ne(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=j,e.exports.luaX_next=function(e){e.lastline=e.linenumber,289!==e.lookahead.token?(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=289):e.t.token=ne(e,e.t.seminfo)},e.exports.luaX_setinput=function(e,t,r,a,n){t.t={token:0,seminfo:new D},t.L=e,t.current=n,t.lookahead={token:289,seminfo:new D},t.z=r,t.fs=null,t.linenumber=1,t.lastline=1,t.source=a,t.envn=x(e,w),I(e,t.buff,i)},e.exports.luaX_syntaxerror=function(e,t){Y(e,t,e.t.token)},e.exports.luaX_token2str=V,e.exports.luaX_tokens=P},function(e,t,r){"use strict";
/**
@license MIT

Copyright Â© 2017-2018 Benoit Giannangeli
Copyright Â© 2017-2018 Daurnimator
Copyright Â© 1994â2017 Lua.org, PUC-Rio.
*/var a=r(6);e.exports.FENGARI_AUTHORS=a.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=a.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=a.FENGARI_RELEASE,e.exports.FENGARI_VERSION=a.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=a.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=a.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=a.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=a.FENGARI_VERSION_RELEASE,e.exports.luastring_eq=a.luastring_eq,e.exports.luastring_indexOf=a.luastring_indexOf,e.exports.luastring_of=a.luastring_of,e.exports.to_jsstring=a.to_jsstring,e.exports.to_luastring=a.to_luastring,e.exports.to_uristring=a.to_uristring;var n=r(3),u=r(1),s=r(4),o=r(12);e.exports.luaconf=n,e.exports.lua=u,e.exports.lauxlib=s,e.exports.lualib=o},function(e,t,r){"use strict";var a=r(1),n=a.lua_pushinteger,u=a.lua_pushliteral,s=a.lua_setfield,o=r(4).luaL_newlib,l=r(6),i=l.FENGARI_AUTHORS,c=l.FENGARI_COPYRIGHT,_=l.FENGARI_RELEASE,f=l.FENGARI_VERSION,p=l.FENGARI_VERSION_MAJOR,v=l.FENGARI_VERSION_MINOR,h=l.FENGARI_VERSION_NUM,d=l.FENGARI_VERSION_RELEASE,L=l.to_luastring;e.exports.luaopen_fengari=function(e){return o(e,{}),u(e,i),s(e,-2,L("AUTHORS")),u(e,c),s(e,-2,L("COPYRIGHT")),u(e,_),s(e,-2,L("RELEASE")),u(e,f),s(e,-2,L("VERSION")),u(e,p),s(e,-2,L("VERSION_MAJOR")),u(e,v),s(e,-2,L("VERSION_MINOR")),n(e,h),s(e,-2,L("VERSION_NUM")),u(e,d),s(e,-2,L("VERSION_RELEASE")),1}},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_require=__webpack_require__(3),LUA_DIRSEP=_require.LUA_DIRSEP,LUA_EXEC_DIR=_require.LUA_EXEC_DIR,LUA_JSPATH_DEFAULT=_require.LUA_JSPATH_DEFAULT,LUA_PATH_DEFAULT=_require.LUA_PATH_DEFAULT,LUA_PATH_MARK=_require.LUA_PATH_MARK,LUA_PATH_SEP=_require.LUA_PATH_SEP,_require2=__webpack_require__(1),LUA_OK=_require2.LUA_OK,LUA_REGISTRYINDEX=_require2.LUA_REGISTRYINDEX,LUA_TNIL=_require2.LUA_TNIL,LUA_TTABLE=_require2.LUA_TTABLE,lua_callk=_require2.lua_callk,lua_createtable=_require2.lua_createtable,lua_getfield=_require2.lua_getfield,lua_insert=_require2.lua_insert,lua_isfunction=_require2.lua_isfunction,lua_isnil=_require2.lua_isnil,lua_isstring=_require2.lua_isstring,lua_newtable=_require2.lua_newtable,lua_pop=_require2.lua_pop,lua_pushboolean=_require2.lua_pushboolean,lua_pushcclosure=_require2.lua_pushcclosure,lua_pushcfunction=_require2.lua_pushcfunction,lua_pushfstring=_require2.lua_pushfstring,lua_pushglobaltable=_require2.lua_pushglobaltable,lua_pushlightuserdata=_require2.lua_pushlightuserdata,lua_pushliteral=_require2.lua_pushliteral,lua_pushlstring=_require2.lua_pushlstring,lua_pushnil=_require2.lua_pushnil,lua_pushstring=_require2.lua_pushstring,lua_pushvalue=_require2.lua_pushvalue,lua_rawgeti=_require2.lua_rawgeti,lua_rawgetp=_require2.lua_rawgetp,lua_rawseti=_require2.lua_rawseti,lua_rawsetp=_require2.lua_rawsetp,lua_remove=_require2.lua_remove,lua_setfield=_require2.lua_setfield,lua_setmetatable=_require2.lua_setmetatable,lua_settop=_require2.lua_settop,lua_toboolean=_require2.lua_toboolean,lua_tostring=_require2.lua_tostring,lua_touserdata=_require2.lua_touserdata,lua_upvalueindex=_require2.lua_upvalueindex,_require3=__webpack_require__(4),LUA_LOADED_TABLE=_require3.LUA_LOADED_TABLE,LUA_PRELOAD_TABLE=_require3.LUA_PRELOAD_TABLE,luaL_Buffer=_require3.luaL_Buffer,luaL_addvalue=_require3.luaL_addvalue,luaL_buffinit=_require3.luaL_buffinit,luaL_checkstring=_require3.luaL_checkstring,luaL_error=_require3.luaL_error,luaL_getsubtable=_require3.luaL_getsubtable,luaL_gsub=_require3.luaL_gsub,luaL_len=_require3.luaL_len,luaL_loadfile=_require3.luaL_loadfile,luaL_newlib=_require3.luaL_newlib,luaL_optstring=_require3.luaL_optstring,luaL_pushresult=_require3.luaL_pushresult,luaL_setfuncs=_require3.luaL_setfuncs,lualib=__webpack_require__(12),_require4=__webpack_require__(6),luastring_indexOf=_require4.luastring_indexOf,to_jsstring=_require4.to_jsstring,to_luastring=_require4.to_luastring,to_uristring=_require4.to_uristring,fengari=__webpack_require__(20),global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),JSLIBS=to_luastring("__JSLIBS__"),LUA_PATH_VAR="LUA_PATH",LUA_JSPATH_VAR="LUA_JSPATH",LUA_IGMARK="-",LUA_CSUBSEP=LUA_DIRSEP,LUA_LSUBSEP=LUA_DIRSEP,LUA_POF=to_luastring("luaopen_"),LUA_OFSEP=to_luastring("_"),LIB_FAIL="open",AUXMARK=to_luastring(""),lsys_load=void 0,pathlib;lsys_load=function(e,t,r){t=to_uristring(t);var a=new XMLHttpRequest;if(a.open("GET",t,!1),a.send(),a.status<200||a.status>=300)return lua_pushstring(e,to_luastring(a.status+": "+a.statusText)),null;var n=a.response;/\/\/[#@] sourceURL=/.test(n)||(n+=" //# sourceURL="+t);var u=void 0;try{u=Function("fengari",n)}catch(t){return lua_pushstring(e,to_luastring(t.name+": "+t.message)),null}var s=u(fengari);return"function"==typeof s||"object"===(void 0===s?"undefined":_typeof(s))&&null!==s?s:void 0===s?global_env:(lua_pushstring(e,to_luastring("library returned unexpected type ("+(void 0===s?"undefined":_typeof(s))+")")),null)};var lsys_sym=function(e,t,r){var a=t[to_jsstring(r)];return a&&"function"==typeof a?a:(lua_pushfstring(e,to_luastring("undefined symbol: %s"),r),null)},noenv=function(e){lua_getfield(e,LUA_REGISTRYINDEX,to_luastring("LUA_NOENV"));var t=lua_toboolean(e,-1);return lua_pop(e,1),t},readable=void 0,fs;readable=function(e){e=to_uristring(e);var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.status>=200&&t.status<=299};var ERRLIB=1,ERRFUNC=2,lookforfunc=function(e,t,r){var a=checkjslib(e,t);if(null===a){if(null===(a=lsys_load(e,t,r[0]==="*".charCodeAt(0))))return ERRLIB;addtojslib(e,t,a)}if(r[0]==="*".charCodeAt(0))return lua_pushboolean(e,1),0;var n=lsys_sym(e,a,r);return null===n?ERRFUNC:(lua_pushcfunction(e,n),0)},ll_loadlib=function(e){var t=luaL_checkstring(e,1),r=luaL_checkstring(e,2),a=lookforfunc(e,t,r);return 0===a?1:(lua_pushnil(e),lua_insert(e,-2),lua_pushliteral(e,a===ERRLIB?LIB_FAIL:"init"),3)},env=global_env,setpath=function(e,t,r,a){var n=""+r+lualib.LUA_VERSUFFIX;lua_pushstring(e,to_luastring(n));var u=env[n];void 0===u&&(u=env[r]),void 0===u||noenv(e)?lua_pushstring(e,a):(u=luaL_gsub(e,to_luastring(u),to_luastring(LUA_PATH_SEP+LUA_PATH_SEP,!0),to_luastring(LUA_PATH_SEP+to_jsstring(AUXMARK)+LUA_PATH_SEP,!0)),luaL_gsub(e,u,AUXMARK,a),lua_remove(e,-2)),lua_setfield(e,-3,t),lua_pop(e,1)},checkjslib=function(e,t){lua_rawgetp(e,LUA_REGISTRYINDEX,JSLIBS),lua_getfield(e,-1,t);var r=lua_touserdata(e,-1);return lua_pop(e,2),r},addtojslib=function(e,t,r){lua_rawgetp(e,LUA_REGISTRYINDEX,JSLIBS),lua_pushlightuserdata(e,r),lua_pushvalue(e,-1),lua_setfield(e,-3,t),lua_rawseti(e,-2,luaL_len(e,-2)+1),lua_pop(e,1)},pushnexttemplate=function(e,t){for(;t[0]===LUA_PATH_SEP.charCodeAt(0);)t=t.subarray(1);if(0===t.length)return null;var r=luastring_indexOf(t,LUA_PATH_SEP.charCodeAt(0));return r<0&&(r=t.length),lua_pushlstring(e,t,r),t.subarray(r)},searchpath=function(e,t,r,a,n){var u=new luaL_Buffer;for(luaL_buffinit(e,u),0!==a[0]&&(t=luaL_gsub(e,t,a,n));null!==(r=pushnexttemplate(e,r));){var s=luaL_gsub(e,lua_tostring(e,-1),to_luastring(LUA_PATH_MARK,!0),t);if(lua_remove(e,-2),readable(s))return s;lua_pushfstring(e,to_luastring("\n\tno file '%s'"),s),lua_remove(e,-2),luaL_addvalue(u)}return luaL_pushresult(u),null},ll_searchpath=function(e){return null!==searchpath(e,luaL_checkstring(e,1),luaL_checkstring(e,2),luaL_optstring(e,3,"."),luaL_optstring(e,4,LUA_DIRSEP))?1:(lua_pushnil(e),lua_insert(e,-2),2)},findfile=function(e,t,r,a){lua_getfield(e,lua_upvalueindex(1),r);var n=lua_tostring(e,-1);return null===n&&luaL_error(e,to_luastring("'package.%s' must be a string"),r),searchpath(e,t,n,to_luastring("."),a)},checkload=function(e,t,r){return t?(lua_pushstring(e,r),2):luaL_error(e,to_luastring("error loading module '%s' from file '%s':\n\t%s"),lua_tostring(e,1),r,lua_tostring(e,-1))},searcher_Lua=function(e){var t=luaL_checkstring(e,1),r=findfile(e,t,to_luastring("path",!0),to_luastring(LUA_LSUBSEP,!0));return null===r?1:checkload(e,luaL_loadfile(e,r)===LUA_OK,r)},loadfunc=function(e,t,r){var a=void 0;r=luaL_gsub(e,r,to_luastring("."),LUA_OFSEP);var n=luastring_indexOf(r,LUA_IGMARK.charCodeAt(0));if(n>=0){a=lua_pushlstring(e,r,n),a=lua_pushfstring(e,to_luastring("%s%s"),LUA_POF,a);var u=lookforfunc(e,t,a);if(u!==ERRFUNC)return u;r=n+1}return a=lua_pushfstring(e,to_luastring("%s%s"),LUA_POF,r),lookforfunc(e,t,a)},searcher_C=function(e){var t=luaL_checkstring(e,1),r=findfile(e,t,to_luastring("jspath",!0),to_luastring(LUA_CSUBSEP,!0));return null===r?1:checkload(e,0===loadfunc(e,r,t),r)},searcher_Croot=function(e){var t,r=luaL_checkstring(e,1),a=luastring_indexOf(r,".".charCodeAt(0));if(a<0)return 0;lua_pushlstring(e,r,a);var n=findfile(e,lua_tostring(e,-1),to_luastring("jspath",!0),to_luastring(LUA_CSUBSEP,!0));return null===n?1:0!==(t=loadfunc(e,n,r))?t!=ERRFUNC?checkload(e,0,n):(lua_pushstring(e,to_luastring("\n\tno module '%s' in file '%s'"),r,n),1):(lua_pushstring(e,n),2)},searcher_preload=function(e){var t=luaL_checkstring(e,1);return lua_getfield(e,LUA_REGISTRYINDEX,LUA_PRELOAD_TABLE),lua_getfield(e,-1,t)===LUA_TNIL&&lua_pushfstring(e,to_luastring("\n\tno field package.preload['%s']"),t),1},findloader=function(e,t,r,a){var n=new luaL_Buffer;return luaL_buffinit(e,n),lua_getfield(e,lua_upvalueindex(1),to_luastring("searchers",!0))!==LUA_TTABLE&&luaL_error(e,to_luastring("'package.searchers' must be a table")),findloader_cont(e,LUA_OK,{name:t,i:1,msg:n,ctx:r,k:a})},findloader_cont=function e(t,r,a){for(;r===LUA_OK?(lua_rawgeti(t,3,a.i)===LUA_TNIL&&(lua_pop(t,1),luaL_pushresult(a.msg),luaL_error(t,to_luastring("module '%s' not found:%s"),a.name,lua_tostring(t,-1))),lua_pushstring(t,a.name),lua_callk(t,1,2,a,e)):r=LUA_OK,!lua_isfunction(t,-2);a.i++)lua_isstring(t,-2)?(lua_pop(t,1),luaL_addvalue(a.msg)):lua_pop(t,2);return a.k(t,LUA_OK,a.ctx)},ll_require=function(e){var t=luaL_checkstring(e,1);return lua_settop(e,1),lua_getfield(e,LUA_REGISTRYINDEX,LUA_LOADED_TABLE),lua_getfield(e,2,t),lua_toboolean(e,-1)?1:(lua_pop(e,1),findloader(e,t,t,ll_require_cont))},ll_require_cont=function(e,t,r){return lua_pushstring(e,r),lua_insert(e,-2),lua_callk(e,2,1,r,ll_require_cont2),ll_require_cont2(e,LUA_OK,r)},ll_require_cont2=function(e,t,r){var a=r;return lua_isnil(e,-1)||lua_setfield(e,2,a),lua_getfield(e,2,a)==LUA_TNIL&&(lua_pushboolean(e,1),lua_pushvalue(e,-1),lua_setfield(e,2,a)),1},pk_funcs={loadlib:ll_loadlib,searchpath:ll_searchpath},ll_funcs={require:ll_require},createsearcherstable=function(e){var t=[searcher_preload,searcher_Lua,searcher_C,searcher_Croot,null];lua_createtable(e);for(var r=0;t[r];r++)lua_pushvalue(e,-2),lua_pushcclosure(e,t[r],1),lua_rawseti(e,-2,r+1);lua_setfield(e,-2,to_luastring("searchers",!0))},createjslibstable=function(e){lua_newtable(e),lua_createtable(e,0,1),lua_setmetatable(e,-2),lua_rawsetp(e,LUA_REGISTRYINDEX,JSLIBS)},luaopen_package=function(e){return createjslibstable(e),luaL_newlib(e,pk_funcs),createsearcherstable(e),setpath(e,to_luastring("path",!0),LUA_PATH_VAR,LUA_PATH_DEFAULT),setpath(e,to_luastring("jspath",!0),LUA_JSPATH_VAR,LUA_JSPATH_DEFAULT),lua_pushliteral(e,LUA_DIRSEP+"\n"+LUA_PATH_SEP+"\n"+LUA_PATH_MARK+"\n"+LUA_EXEC_DIR+"\n"+LUA_IGMARK+"\n"),lua_setfield(e,-2,to_luastring("config",!0)),luaL_getsubtable(e,LUA_REGISTRYINDEX,LUA_LOADED_TABLE),lua_setfield(e,-2,to_luastring("loaded",!0)),luaL_getsubtable(e,LUA_REGISTRYINDEX,LUA_PRELOAD_TABLE),lua_setfield(e,-2,to_luastring("preload",!0)),lua_pushglobaltable(e),lua_pushvalue(e,-2),luaL_setfuncs(e,ll_funcs,1),lua_pop(e,1),1};module.exports.luaopen_package=luaopen_package},function(e,t,r){"use strict";var a=r(1),n=a.LUA_MASKCALL,u=a.LUA_MASKCOUNT,s=a.LUA_MASKLINE,o=a.LUA_MASKRET,l=a.LUA_REGISTRYINDEX,i=a.LUA_TFUNCTION,c=a.LUA_TNIL,_=a.LUA_TTABLE,f=a.LUA_TUSERDATA,p=a.lua_Debug,v=a.lua_call,h=a.lua_checkstack,d=a.lua_gethook,L=a.lua_gethookcount,A=a.lua_gethookmask,g=a.lua_getinfo,b=a.lua_getlocal,T=a.lua_getmetatable,x=a.lua_getstack,k=a.lua_getupvalue,O=a.lua_getuservalue,E=a.lua_insert,m=a.lua_iscfunction,U=a.lua_isfunction,R=a.lua_isnoneornil,N=a.lua_isthread,y=a.lua_newtable,S=a.lua_pcall,I=a.lua_pop,w=a.lua_pushboolean,M=a.lua_pushfstring,P=a.lua_pushinteger,D=a.lua_pushlightuserdata,C=a.lua_pushliteral,G=a.lua_pushnil,V=a.lua_pushstring,B=a.lua_pushvalue,K=a.lua_rawgetp,F=a.lua_rawsetp,j=a.lua_rotate,H=a.lua_setfield,X=a.lua_sethook,z=a.lua_setlocal,q=a.lua_setmetatable,Y=a.lua_settop,J=a.lua_setupvalue,Z=a.lua_setuservalue,W=a.lua_tojsstring,Q=a.lua_toproxy,$=a.lua_tostring,ee=a.lua_tothread,te=a.lua_touserdata,re=a.lua_type,ae=a.lua_upvalueid,ne=a.lua_upvaluejoin,ue=a.lua_xmove,se=r(4),oe=se.luaL_argcheck,le=se.luaL_argerror,ie=se.luaL_checkany,ce=se.luaL_checkinteger,_e=se.luaL_checkstring,fe=se.luaL_checktype,pe=se.luaL_error,ve=se.luaL_loadbuffer,he=se.luaL_newlib,de=se.luaL_optinteger,Le=se.luaL_optstring,Ae=se.luaL_traceback,ge=se.lua_writestringerror,be=r(12),Te=r(6),xe=Te.luastring_indexOf,ke=Te.to_luastring,Oe=function(e,t,r){e===t||h(t,r)||pe(e,ke("stack overflow",!0))},Ee=function(e){return N(e,1)?{arg:1,thread:ee(e,1)}:{arg:0,thread:e}},me=function(e,t,r){V(e,r),H(e,-2,t)},Ue=function(e,t,r){P(e,r),H(e,-2,t)},Re=function(e,t,r){w(e,r),H(e,-2,t)},Ne=function(e,t,r){e==t?j(e,-2,1):ue(t,e,1),H(e,-2,r)},ye=function(e,t){var r=ce(e,2);fe(e,1,i);var a=t?k(e,1,r):J(e,1,r);return null===a?0:(V(e,a),E(e,-(t+1)),t+1)},Se=function(e,t,r){var a=ce(e,r);return fe(e,t,i),oe(e,null!==k(e,t,a),r,"invalid upvalue index"),a},Ie=ke("__hooks__",!0),we=["call","return","line","count","tail call"].map(function(e){return ke(e)}),Me=function(e,t){K(e,l,Ie);var r=te(e,-1).get(e);r&&(r(e),V(e,we[t.event]),t.currentline>=0?P(e,t.currentline):G(e),be.lua_assert(g(e,ke("lS"),t)),v(e,2,0))},Pe={gethook:function(e){var t=Ee(e).thread,r=new Uint8Array(5),a=A(t),u=d(t);null===u?G(e):u!==Me?C(e,"external hook"):(K(e,l,Ie),te(e,-1).get(t)(e));return V(e,function(e,t){var r=0;return e&n&&(t[r++]=99),e&o&&(t[r++]=114),e&s&&(t[r++]=108),t.subarray(0,r)}(a,r)),P(e,L(t)),3},getinfo:function(e){var t=new p,r=Ee(e),a=r.arg,n=r.thread,u=Le(e,a+2,"flnStu");if(Oe(e,n,3),U(e,a+1))u=M(e,ke(">%s"),u),B(e,a+1),ue(e,n,1);else if(!x(n,ce(e,a+1),t))return G(e),1;return g(n,u,t)||le(e,a+2,"invalid option"),y(e),xe(u,83)>-1&&(me(e,ke("source",!0),t.source),me(e,ke("short_src",!0),t.short_src),Ue(e,ke("linedefined",!0),t.linedefined),Ue(e,ke("lastlinedefined",!0),t.lastlinedefined),me(e,ke("what",!0),t.what)),xe(u,108)>-1&&Ue(e,ke("currentline",!0),t.currentline),xe(u,117)>-1&&(Ue(e,ke("nups",!0),t.nups),Ue(e,ke("nparams",!0),t.nparams),Re(e,ke("isvararg",!0),t.isvararg)),xe(u,110)>-1&&(me(e,ke("name",!0),t.name),me(e,ke("namewhat",!0),t.namewhat)),xe(u,116)>-1&&Re(e,ke("istailcall",!0),t.istailcall),xe(u,76)>-1&&Ne(e,n,ke("activelines",!0)),xe(u,102)>-1&&Ne(e,n,ke("func",!0)),1},getlocal:function(e){var t=Ee(e),r=t.thread,a=t.arg,n=new p,u=ce(e,a+2);if(U(e,a+1))return B(e,a+1),V(e,b(e,null,u)),1;var s=ce(e,a+1);if(!x(r,s,n))return le(e,a+1,"level out of range");Oe(e,r,1);var o=b(r,n,u);return o?(ue(r,e,1),V(e,o),j(e,-2,1),2):(G(e),1)},getmetatable:function(e){return ie(e,1),T(e,1)||G(e),1},getregistry:function(e){return B(e,l),1},getupvalue:function(e){return ye(e,1)},getuservalue:function(e){return re(e,1)!==f?G(e):O(e,1),1},sethook:function(e){var t=void 0,r=void 0,a=void 0,_=Ee(e),f=_.thread,p=_.arg;if(R(e,p+1))Y(e,p+1),a=null,t=0,r=0;else{var v=_e(e,p+2);fe(e,p+1,i),r=de(e,p+3,0),a=Me,t=function(e,t){var r=0;return xe(e,99)>-1&&(r|=n),xe(e,114)>-1&&(r|=o),xe(e,108)>-1&&(r|=s),t>0&&(r|=u),r}(v,r)}var h=void 0;K(e,l,Ie)===c?(h=new WeakMap,D(e,h),F(e,l,Ie)):h=te(e,-1);var d=Q(e,p+1);return h.set(f,d),X(f,a,t,r),0},setlocal:function(e){var t=Ee(e),r=t.thread,a=t.arg,n=new p,u=ce(e,a+1),s=ce(e,a+2);if(!x(r,u,n))return le(e,a+1,"level out of range");ie(e,a+3),Y(e,a+3),Oe(e,r,1),ue(e,r,1);var o=z(r,n,s);return null===o&&I(r,1),V(e,o),1},setmetatable:function(e){var t=re(e,2);return oe(e,t==c||t==_,2,"nil or table expected"),Y(e,2),q(e,1),1},setupvalue:function(e){return ie(e,3),ye(e,0)},setuservalue:function(e){return fe(e,1,f),ie(e,2),Y(e,2),Z(e,1),1},traceback:function(e){var t=Ee(e),r=t.thread,a=t.arg,n=$(e,a+1);if(null!==n||R(e,a+1)){var u=de(e,a+2,e===r?1:0);Ae(e,r,n,u)}else B(e,a+1);return 1},upvalueid:function(e){var t=Se(e,1,2);return D(e,ae(e,1,t)),1},upvaluejoin:function(e){var t=Se(e,1,2),r=Se(e,3,4);return oe(e,!m(e,1),1,"Lua function expected"),oe(e,!m(e,3),3,"Lua function expected"),ne(e,1,t,3,r),0}},De=void 0;"undefined"!=typeof window&&(De=function(){var e=prompt("lua_debug>","");return null!==e?e:""}),De&&(Pe.debug=function(e){for(;;){var t=De();if("cont"===t)return 0;if(0!==t.length){var r=ke(t);(ve(e,r,r.length,ke("=(debug command)",!0))||S(e,0,0,0))&&ge(W(e,-1),"\n"),Y(e,0)}}});e.exports.luaopen_debug=function(e){return he(e,Pe),1}},function(e,t,r){"use strict";var a=r(1),n=a.LUA_OPLT,u=a.LUA_TNUMBER,s=a.lua_compare,o=a.lua_gettop,l=a.lua_isinteger,i=a.lua_isnoneornil,c=a.lua_pushboolean,_=a.lua_pushinteger,f=a.lua_pushliteral,p=a.lua_pushnil,v=a.lua_pushnumber,h=a.lua_pushvalue,d=a.lua_setfield,L=a.lua_settop,A=a.lua_tointeger,g=a.lua_tointegerx,b=a.lua_type,T=r(4),x=T.luaL_argcheck,k=T.luaL_argerror,O=T.luaL_checkany,E=T.luaL_checkinteger,m=T.luaL_checknumber,U=T.luaL_error,R=T.luaL_newlib,N=T.luaL_optnumber,y=r(3),S=y.LUA_MAXINTEGER,I=y.LUA_MININTEGER,w=y.lua_numbertointeger,M=r(6).to_luastring,P=void 0,D=function(){return P=1103515245*P+12345&2147483647},C=function(e,t){var r=w(t);!1!==r?_(e,r):v(e,t)},G={abs:function(e){if(l(e,1)){var t=A(e,1);t<0&&(t=0|-t),_(e,t)}else v(e,Math.abs(m(e,1)));return 1},acos:function(e){return v(e,Math.acos(m(e,1))),1},asin:function(e){return v(e,Math.asin(m(e,1))),1},atan:function(e){var t=m(e,1),r=N(e,2,1);return v(e,Math.atan2(t,r)),1},ceil:function(e){return l(e,1)?L(e,1):C(e,Math.ceil(m(e,1))),1},cos:function(e){return v(e,Math.cos(m(e,1))),1},deg:function(e){return v(e,m(e,1)*(180/Math.PI)),1},exp:function(e){return v(e,Math.exp(m(e,1))),1},floor:function(e){return l(e,1)?L(e,1):C(e,Math.floor(m(e,1))),1},fmod:function(e){if(l(e,1)&&l(e,2)){var t=A(e,2);0===t?k(e,2,"zero"):_(e,A(e,1)%t|0)}else{var r=m(e,1),a=m(e,2);v(e,r%a)}return 1},log:function(e){var t=m(e,1),r=void 0;if(i(e,2))r=Math.log(t);else{var a=m(e,2);r=2===a?Math.log2(t):10===a?Math.log10(t):Math.log(t)/Math.log(a)}return v(e,r),1},max:function(e){var t=o(e),r=1;x(e,t>=1,1,"value expected");for(var a=2;a<=t;a++)s(e,r,a,n)&&(r=a);return h(e,r),1},min:function(e){var t=o(e),r=1;x(e,t>=1,1,"value expected");for(var a=2;a<=t;a++)s(e,a,r,n)&&(r=a);return h(e,r),1},modf:function(e){if(l(e,1))L(e,1),v(e,0);else{var t=m(e,1),r=t<0?Math.ceil(t):Math.floor(t);C(e,r),v(e,t===r?0:t-r)}return 2},rad:function(e){return v(e,m(e,1)*(Math.PI/180)),1},random:function(e){var t=void 0,r=void 0,a=void 0===P?Math.random():D()/2147483648;switch(o(e)){case 0:return v(e,a),1;case 1:t=1,r=E(e,1);break;case 2:t=E(e,1),r=E(e,2);break;default:return U(e,"wrong number of arguments")}return x(e,t<=r,1,"interval is empty"),x(e,t>=0||r<=S+t,1,"interval too large"),a*=r-t+1,_(e,Math.floor(a)+t),1},randomseed:function(e){var t;return t=m(e,1),0==(P=0|t)&&(P=1),D(),0},sin:function(e){return v(e,Math.sin(m(e,1))),1},sqrt:function(e){return v(e,Math.sqrt(m(e,1))),1},tan:function(e){return v(e,Math.tan(m(e,1))),1},tointeger:function(e){var t=g(e,1);return!1!==t?_(e,t):(O(e,1),p(e)),1},type:function(e){return b(e,1)===u?l(e,1)?f(e,"integer"):f(e,"float"):(O(e,1),p(e)),1},ult:function(e){var t=E(e,1),r=E(e,2);return c(e,t>=0?r<0||t<r:r<0&&t<r),1}};e.exports.luaopen_math=function(e){return R(e,G),v(e,Math.PI),d(e,-2,M("pi",!0)),v(e,1/0),d(e,-2,M("huge",!0)),_(e,S),d(e,-2,M("maxinteger",!0)),_(e,I),d(e,-2,M("mininteger",!0)),1}},function(e,t,r){"use strict";var a=r(1),n=a.lua_gettop,u=a.lua_pushcfunction,s=a.lua_pushfstring,o=a.lua_pushinteger,l=a.lua_pushnil,i=a.lua_pushstring,c=a.lua_pushvalue,_=a.lua_setfield,f=a.lua_tointeger,p=r(4),v=p.luaL_Buffer,h=p.luaL_addvalue,d=p.luaL_argcheck,L=p.luaL_buffinit,A=p.luaL_checkinteger,g=p.luaL_checkstack,b=p.luaL_checkstring,T=p.luaL_error,x=p.luaL_newlib,k=p.luaL_optinteger,O=p.luaL_pushresult,E=r(6),m=E.luastring_of,U=E.to_luastring,R=function(e){return 128===(192&e)},N=function(e,t){return e>=0?e:0-e>t?0:t+e+1},y=[255,127,2047,65535],S=function(e,t){var r=e[t],a=0;if(r<128)a=r;else{for(var n=0;64&r;){var u=e[t+ ++n];if(128!=(192&u))return null;a=a<<6|63&u,r<<=1}if(a|=(127&r)<<5*n,n>3||a>1114111||a<=y[n])return null;t+=n}return{code:a,pos:t+1}},I=U("%U"),w=function(e,t){var r=A(e,t);d(e,0<=r&&r<=1114111,t,"value out of range"),s(e,I,r)},M=function(e){var t=b(e,1),r=t.length,a=f(e,2)-1;if(a<0)a=0;else if(a<r)for(a++;R(t[a]);)a++;if(a>=r)return 0;var n=S(t,a);return null===n||R(t[n.pos])?T(e,U("invalid UTF-8 code",!0)):(o(e,a+1),o(e,n.code),2)},P={char:function(e){var t=n(e);if(1===t)w(e,1);else{var r=new v;L(e,r);for(var a=1;a<=t;a++)w(e,a),h(r);O(r)}return 1},codepoint:function(e){var t=b(e,1),r=N(k(e,2,1),t.length),a=N(k(e,3,r),t.length);if(d(e,r>=1,2,"out of range"),d(e,a<=t.length,3,"out of range"),r>a)return 0;if(a-r>=Number.MAX_SAFE_INTEGER)return T(e,"string slice too long");var n=a-r+1;for(g(e,n,"string slice too long"),n=0,r-=1;r<a;){var u=S(t,r);if(null===u)return T(e,"invalid UTF-8 code");o(e,u.code),r=u.pos,n++}return n},codes:function(e){return b(e,1),u(e,M),c(e,1),o(e,0),3},len:function(e){var t=0,r=b(e,1),a=r.length,n=N(k(e,2,1),a),u=N(k(e,3,-1),a);for(d(e,1<=n&&--n<=a,2,"initial position out of string"),d(e,--u<a,3,"final position out of string");n<=u;){var s=S(r,n);if(null===s)return l(e),o(e,n+1),2;n=s.pos,t++}return o(e,t),1},offset:function(e){var t=b(e,1),r=A(e,2),a=r>=0?1:t.length+1;if(a=N(k(e,3,a),t.length),d(e,1<=a&&--a<=t.length,3,"position out of range"),0===r)for(;a>0&&R(t[a]);)a--;else if(R(t[a])&&T(e,"initial position is a continuation byte"),r<0)for(;r<0&&a>0;){do{a--}while(a>0&&R(t[a]));r++}else for(r--;r>0&&a<t.length;){do{a++}while(R(t[a]));r--}return 0===r?o(e,a+1):l(e),1}},D=m(91,0,45,127,194,45,244,93,91,128,45,191,93,42);e.exports.luaopen_utf8=function(e){return x(e,P),i(e,D),_(e,-2,U("charpattern",!0)),1}},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=r(35).sprintf,u=r(3),s=u.LUA_INTEGER_FMT,o=u.LUA_INTEGER_FRMLEN,l=u.LUA_MININTEGER,i=u.LUA_NUMBER_FMT,c=u.LUA_NUMBER_FRMLEN,_=u.frexp,f=u.lua_getlocaledecpoint,p=r(1),v=p.LUA_TBOOLEAN,h=p.LUA_TFUNCTION,d=p.LUA_TNIL,L=p.LUA_TNUMBER,A=p.LUA_TSTRING,g=p.LUA_TTABLE,b=p.lua_call,T=p.lua_createtable,x=p.lua_dump,k=p.lua_gettable,O=p.lua_gettop,E=p.lua_isinteger,m=p.lua_isstring,U=p.lua_pop,R=p.lua_pushcclosure,N=p.lua_pushinteger,y=p.lua_pushlightuserdata,S=p.lua_pushliteral,I=p.lua_pushlstring,w=p.lua_pushnil,M=p.lua_pushnumber,P=p.lua_pushstring,D=p.lua_pushvalue,C=p.lua_remove,G=p.lua_setfield,V=p.lua_setmetatable,B=p.lua_settop,K=p.lua_toboolean,F=p.lua_tointeger,j=p.lua_tonumber,H=p.lua_tostring,X=p.lua_touserdata,z=p.lua_type,q=p.lua_upvalueindex,Y=r(4),J=Y.luaL_Buffer,Z=Y.luaL_addchar,W=Y.luaL_addlstring,Q=Y.luaL_addsize,$=Y.luaL_addstring,ee=Y.luaL_addvalue,te=Y.luaL_argcheck,re=Y.luaL_argerror,ae=Y.luaL_buffinit,ne=Y.luaL_buffinitsize,ue=Y.luaL_checkinteger,se=Y.luaL_checknumber,oe=Y.luaL_checkstack,le=Y.luaL_checkstring,ie=Y.luaL_checktype,ce=Y.luaL_error,_e=Y.luaL_newlib,fe=Y.luaL_optinteger,pe=Y.luaL_optstring,ve=Y.luaL_prepbuffsize,he=Y.luaL_pushresult,de=Y.luaL_pushresultsize,Le=Y.luaL_tolstring,Ae=Y.luaL_typename,ge=r(12),be=r(6),Te=be.luastring_indexOf,xe=be.to_jsstring,ke=be.to_luastring,Oe="%".charCodeAt(0),Ee=function(e){var t=Te(e,0);return t>-1?t:e.length},me=function(e,t){return e>=0?e:0-e>t?0:t+e+1},Ue=function(e,t,r,a){return W(a,t,r),0},Re=c.length+1,Ne=function(e,t,r){var a=function(e){if(Object.is(e,1/0))return ke("inf");if(Object.is(e,-1/0))return ke("-inf");if(Number.isNaN(e))return ke("nan");if(0===e){var t=n(i+"x0p+0",e);return Object.is(e,-0)&&(t="-"+t),ke(t)}var r="",a=_(e),u=a[0],s=a[1];return u<0&&(r+="-",u=-u),r+="0x",r+=(2*u).toString(16),r+=n("p%+d",s-=1),ke(r)}(r);if(65===t[Re])for(var u=0;u<a.length;u++){var s=a[u];s>=97&&(a[u]=223&s)}else 97!==t[Re]&&ce(e,ke("modifiers for format '%%a'/'%%A' not implemented"));return a},ye=ke("-+ #0"),Se=function(e){return 97<=e&&e<=122||65<=e&&e<=90},Ie=function(e){return 48<=e&&e<=57},we=function(e){return 0<=e&&e<=31||127===e},Me=function(e){return 33<=e&&e<=126},Pe=function(e){return 97<=e&&e<=122},De=function(e){return 65<=e&&e<=90},Ce=function(e){return 97<=e&&e<=122||65<=e&&e<=90||48<=e&&e<=57},Ge=function(e){return Me(e)&&!Ce(e)},Ve=function(e){return 32===e||e>=9&&e<=13},Be=function(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102},Ke=function(e,t,r){switch(z(e,r)){case A:var a=H(e,r);!function(e,t,r){Z(e,34);for(var a=0;r--;){if(34===t[a]||92===t[a]||10===t[a])Z(e,92),Z(e,t[a]);else if(we(t[a])){var n=""+t[a];Ie(t[a+1])&&(n="0".repeat(3-n.length)+n),$(e,ke("\\"+n))}else Z(e,t[a]);a++}Z(e,34)}(t,a,a.length);break;case L:var u=void 0;if(E(e,r)){var i=F(e,r);u=ke(n(i===l?"0x%"+o+"x":s,i))}else{var c=j(e,r);(function(e){if(Te(e,46)<0){var t=f(),r=Te(e,t);r&&(e[r]=46)}})(u=Ne(e,ke("%"+o+"a"),c))}$(t,u);break;case d:case v:Le(e,r),ee(t);break;default:re(e,r,ke("value has no literal form",!0))}},Fe=function(e,t,r,a){for(var n=r;0!==t[n]&&Te(ye,t[n])>=0;)n++;n-r>=ye.length&&ce(e,ke("invalid format (repeated flags)",!0)),Ie(t[n])&&n++,Ie(t[n])&&n++,46===t[n]&&(Ie(t[++n])&&n++,Ie(t[n])&&n++),Ie(t[n])&&ce(e,ke("invalid format (width or precision too long)",!0)),a[0]=37;for(var u=0;u<n-r+1;u++)a[u+1]=t[r+u];return n},je=function(e,t){for(var r=e.length,a=t.length,n=e[r-1],u=0;u<a;u++)e[u+r-1]=t[u];e[r+a-1]=n},He=function e(t){a(this,e),this.L=t,this.islittle=!0,this.maxalign=1},Xe=Ie,ze=function(e,t){if(e.off>=e.s.length||!Xe(e.s[e.off]))return t;var r=0;do{r=10*r+(e.s[e.off++]-48)}while(e.off<e.s.length&&Xe(e.s[e.off])&&r<=214748363.8);return r},qe=function(e,t,r){var a=ze(t,r);return(a>16||a<=0)&&ce(e.L,ke("integral size (%d) out of limits [1,%d]"),a,16),a},Ye=function(e,t){var r={opt:t.s[t.off++],size:0};switch(r.opt){case 98:return r.size=1,r.opt=0,r;case 66:return r.size=1,r.opt=1,r;case 104:return r.size=2,r.opt=0,r;case 72:return r.size=2,r.opt=1,r;case 108:return r.size=4,r.opt=0,r;case 76:return r.size=4,r.opt=1,r;case 106:return r.size=4,r.opt=0,r;case 74:case 84:return r.size=4,r.opt=1,r;case 102:return r.size=4,r.opt=2,r;case 100:case 110:return r.size=8,r.opt=2,r;case 105:return r.size=qe(e,t,4),r.opt=0,r;case 73:return r.size=qe(e,t,4),r.opt=1,r;case 115:return r.size=qe(e,t,4),r.opt=4,r;case 99:return r.size=ze(t,-1),-1===r.size&&ce(e.L,ke("missing size for format option 'c'")),r.opt=3,r;case 122:return r.opt=5,r;case 120:return r.size=1,r.opt=6,r;case 88:return r.opt=7,r;case 32:break;case 60:e.islittle=!0;break;case 62:e.islittle=!1;break;case 61:e.islittle=!0;break;case 33:e.maxalign=qe(e,t,8);break;default:ce(e.L,ke("invalid format option '%c'"),r.opt)}return r.opt=8,r},Je=function(e,t,r){var a={opt:NaN,size:NaN,ntoalign:NaN},n=Ye(e,r);a.size=n.size,a.opt=n.opt;var u=a.size;if(7===a.opt)if(r.off>=r.s.length||0===r.s[r.off])re(e.L,1,ke("invalid next option for option 'X'",!0));else{var s=Ye(e,r);u=s.size,3!==(s=s.opt)&&0!==u||re(e.L,1,ke("invalid next option for option 'X'",!0))}return u<=1||3===a.opt?a.ntoalign=0:(u>e.maxalign&&(u=e.maxalign),0!=(u&u-1)&&re(e.L,1,ke("format asks for alignment not power of 2",!0)),a.ntoalign=u-(t&u-1)&u-1),a},Ze=function(e,t,r,a,n){var u=ve(e,a);u[r?0:a-1]=255&t;for(var s=1;s<a;s++)t>>=8,u[r?s:a-1-s]=255&t;if(n&&a>4)for(var o=4;o<a;o++)u[r?o:a-1-o]=255;Q(e,a)},We=function(e,t,r,a,n){for(var u=0,s=a<=4?a:4,o=s-1;o>=0;o--)u<<=8,u|=t[r?o:a-1-o];if(a<4){if(n){var l=1<<8*a-1;u=(u^l)-l}}else if(a>4)for(var i=!n||u>=0?0:255,c=s;c<a;c++)t[r?c:a-1-c]!==i&&ce(e,ke("%d-byte integer does not fit into Lua Integer"),a);return u},Qe=function(e,t,r,a){ge.lua_assert(t.length>=a);for(var n=new DataView(new ArrayBuffer(a)),u=0;u<a;u++)n.setUint8(u,t[u],r);return 4==a?n.getFloat32(0,r):n.getFloat64(0,r)},$e=ke("^$*+?.([%-"),et=function e(t){a(this,e),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=t,this.matchdepth=NaN,this.level=NaN,this.capture=[]},tt=function(e,t){switch(e.p[t++]){case Oe:return t===e.p_end&&ce(e.L,ke("malformed pattern (ends with '%%')")),t+1;case 91:94===e.p[t]&&t++;do{t===e.p_end&&ce(e.L,ke("malformed pattern (missing ']')")),e.p[t++]===Oe&&t<e.p_end&&t++}while(93!==e.p[t]);return t+1;default:return t}},rt=function(e,t){switch(t){case 97:return Se(e);case 65:return!Se(e);case 99:return we(e);case 67:return!we(e);case 100:return Ie(e);case 68:return!Ie(e);case 103:return Me(e);case 71:return!Me(e);case 108:return Pe(e);case 76:return!Pe(e);case 112:return Ge(e);case 80:return!Ge(e);case 115:return Ve(e);case 83:return!Ve(e);case 117:return De(e);case 85:return!De(e);case 119:return Ce(e);case 87:return!Ce(e);case 120:return Be(e);case 88:return!Be(e);case 122:return 0===e;case 90:return 0!==e;default:return t===e}},at=function(e,t,r,a){var n=!0;for(94===e.p[r+1]&&(n=!1,r++);++r<a;)if(e.p[r]===Oe){if(r++,rt(t,e.p[r]))return n}else if(45===e.p[r+1]&&r+2<a){if(r+=2,e.p[r-2]<=t&&t<=e.p[r])return n}else if(e.p[r]===t)return n;return!n},nt=function(e,t,r,a){if(t>=e.src_end)return!1;var n=e.src[t];switch(e.p[r]){case 46:return!0;case Oe:return rt(n,e.p[r+1]);case 91:return at(e,n,r,a-1);default:return e.p[r]===n}},ut=function(e,t,r){if(r>=e.p_end-1&&ce(e.L,ke("malformed pattern (missing arguments to '%%b'")),e.src[t]!==e.p[r])return null;for(var a=e.p[r],n=e.p[r+1],u=1;++t<e.src_end;)if(e.src[t]===n){if(0==--u)return t+1}else e.src[t]===a&&u++;return null},st=function(e,t,r,a){for(var n=0;nt(e,t+n,r,a);)n++;for(;n>=0;){var u=_t(e,t+n,a+1);if(u)return u;n--}return null},ot=function(e,t,r,a){for(;;){var n=_t(e,t,a+1);if(null!==n)return n;if(!nt(e,t,r,a))return null;t++}},lt=function(e,t,r,a){var n=e.level;n>=32&&ce(e.L,ke("too many captures",!0)),e.capture[n]=e.capture[n]?e.capture[n]:{},e.capture[n].init=t,e.capture[n].len=a,e.level=n+1;var u;return null===(u=_t(e,t,r))&&e.level--,u},it=function(e,t,r){var a=function(e){var t=e.level;for(t--;t>=0;t--)if(-1===e.capture[t].len)return t;return ce(e.L,ke("invalid pattern capture"))}(e);e.capture[a].len=t-e.capture[a].init;var n;return null===(n=_t(e,t,r))&&(e.capture[a].len=-1),n},ct=function(e,t,r){r=function(e,t){return(t-=49)<0||t>=e.level||-1===e.capture[t].len?ce(e.L,ke("invalid capture index %%%d"),t+1):t}(e,r);var a=e.capture[r].len;return e.src_end-t>=a&&function(e,t,r,a,n){if(0===n)return!0;var u=t+n;e:for(;;){if(-1===(t=Te(e,r[a],t))||t>=u)return!1;for(var s=1;s<n;s++)if(e[t+s]!==r[a+s]){t++;continue e}return!0}}(e.src,e.capture[r].init,e.src,t,a)?t+a:null},_t=function e(t,r,a){var n=!1,u=!0;for(0==t.matchdepth--&&ce(t.L,ke("pattern too complex",!0));u||n;)if(u=!1,a!==t.p_end)switch(n?void 0:t.p[a]){case 40:r=41===t.p[a+1]?lt(t,r,a+2,-2):lt(t,r,a+1,-1);break;case 41:r=it(t,r,a+1);break;case 36:if(a+1!==t.p_end){n=!0;break}r=t.src.length-r==0?r:null;break;case Oe:switch(t.p[a+1]){case 98:null!==(r=ut(t,r,a+2))&&(a+=4,u=!0);break;case 102:a+=2,91!==t.p[a]&&ce(t.L,ke("missing '[' after '%%f' in pattern"));var s=tt(t,a),o=r===t.src_init?0:t.src[r-1];if(!at(t,o,a,s-1)&&at(t,r===t.src_end?0:t.src[r],a,s-1)){a=s,u=!0;break}r=null;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:null!==(r=ct(t,r,t.p[a+1]))&&(a+=2,u=!0);break;default:n=!0}break;default:n=!1;var l=tt(t,a);if(nt(t,r,a,l))switch(t.p[l]){case 63:var i;null!==(i=e(t,r+1,l+1))?r=i:(a=l+1,u=!0);break;case 43:r++;case 42:r=st(t,r,a,l);break;case 45:r=ot(t,r,a,l);break;default:r++,a=l,u=!0}else{if(42===t.p[l]||63===t.p[l]||45===t.p[l]){a=l+1,u=!0;break}r=null}}return t.matchdepth++,r},ft=function(e,t,r,a){if(t>=e.level)0===t?I(e.L,e.src.subarray(r,a),a-r):ce(e.L,ke("invalid capture index %%%d"),t+1);else{var n=e.capture[t].len;-1===n&&ce(e.L,ke("unfinished capture",!0)),-2===n?N(e.L,e.capture[t].init-e.src_init+1):I(e.L,e.src.subarray(e.capture[t].init),n)}},pt=function(e,t,r){var a=0===e.level&&e.src.subarray(t)?1:e.level;oe(e.L,a,ke("too many catpures",!0));for(var n=0;n<a;n++)ft(e,n,t,r);return a},vt=function(e,t,r,a,n,u){e.L=t,e.matchdepth=200,e.src=r,e.src_init=0,e.src_end=a,e.p=n,e.p_end=u},ht=function(e){e.level=0,ge.lua_assert(200===e.matchdepth)},dt=function(e,t){var r=le(e,1),a=le(e,2),n=r.length,u=a.length,s=me(fe(e,3,1),n);if(s<1)s=1;else if(s>n+1)return w(e),1;if(t&&(K(e,4)||function(e,t){for(var r=0;r<t;r++)if(-1!==Te($e,e[r]))return!1;return!0}(a,u))){var o=function(e,t,r){var a=r>>>0,n=t.length;if(0===n)return a;e:for(;-1!==(a=e.indexOf(t[0],a));){for(var u=1;u<n;u++)if(e[a+u]!==t[u]){a++;continue e}return a}return-1}(r.subarray(s-1),a,0);if(o>-1)return N(e,s+o),N(e,s+o+u-1),2}else{var l=new et(e),i=s-1,c=94===a[0];c&&(a=a.subarray(1),u--),vt(l,e,r,n,a,u);do{var _;if(ht(l),null!==(_=_t(l,i,0)))return t?(N(e,i+1),N(e,_),pt(l,null,0)+2):pt(l,i,_)}while(i++<l.src_end&&!c)}return w(e),1},Lt=function(e){var t=X(e,q(3));t.ms.L=e;for(var r=t.src;r<=t.ms.src_end;r++){ht(t.ms);var a;if(null!==(a=_t(t.ms,r,t.p))&&a!==t.lastmatch)return t.src=t.lastmatch=a,pt(t.ms,r,a)}return 0},At=function(e,t,r,a,n){var u=e.L;switch(n){case h:D(u,3);var s=pt(e,r,a);b(u,s,1);break;case g:ft(e,0,r,a),k(u,3);break;default:return void function(e,t,r,a){for(var n=e.L,u=H(n,3),s=u.length,o=0;o<s;o++)u[o]!==Oe?Z(t,u[o]):Ie(u[++o])?48===u[o]?W(t,e.src.subarray(r,a),a-r):(ft(e,u[o]-49,r,a),Le(n,-1),C(n,-2),ee(t)):(u[o]!==Oe&&ce(n,ke("invalid use of '%c' in replacement string"),Oe),Z(t,u[o]))}(e,t,r,a)}K(u,-1)?m(u,-1)||ce(u,ke("invalid replacement value (a %s)"),Ae(u,-1)):(U(u,1),I(u,e.src.subarray(r,a),a-r)),ee(t)},gt={byte:function(e){var t=le(e,1),r=t.length,a=me(fe(e,2,1),r),n=me(fe(e,3,a),r);if(a<1&&(a=1),n>r&&(n=r),a>n)return 0;if(n-a>=Number.MAX_SAFE_INTEGER)return ce(e,"string slice too long");var u=n-a+1;oe(e,u,"string slice too long");for(var s=0;s<u;s++)N(e,t[a+s-1]);return u},char:function(e){for(var t=O(e),r=new J,a=ne(e,r,t),n=1;n<=t;n++){var u=ue(e,n);te(e,u>=0&&u<=255,"value out of range"),a[n-1]=u}return de(r,t),1},dump:function(e){var t=new J,r=K(e,2);return ie(e,1,h),B(e,1),ae(e,t),0!==x(e,Ue,t,r)?ce(e,ke("unable to dump given function")):(he(t),1)},find:function(e){return dt(e,1)},format:function(e){var t=O(e),r=1,a=le(e,r),u=0,s=new J;for(ae(e,s);u<a.length;)if(a[u]!==Oe)Z(s,a[u++]);else if(a[++u]===Oe)Z(s,a[u++]);else{var l=[];switch(++r>t&&re(e,r,ke("no value",!0)),u=Fe(e,a,u,l),String.fromCharCode(a[u++])){case"c":Z(s,ue(e,r));break;case"d":case"i":case"o":case"u":case"x":case"X":var i=ue(e,r);je(l,ke(o,!0)),$(s,ke(n(String.fromCharCode.apply(String,l),i)));break;case"a":case"A":je(l,ke(o,!0)),$(s,Ne(e,l,se(e,r)));break;case"e":case"E":case"f":case"g":case"G":var c=se(e,r);je(l,ke(o,!0)),$(s,ke(n(String.fromCharCode.apply(String,l),c)));break;case"q":Ke(e,s,r);break;case"s":var _=Le(e,r);l.length<=2||0===l[2]?ee(s):(te(e,_.length===Ee(_),r,"string contains zeros"),Te(l,46)<0&&_.length>=100?ee(s):($(s,ke(n(String.fromCharCode.apply(String,l),xe(_)))),U(e,1)));break;default:return ce(e,ke("invalid option '%%%c' to 'format'"),a[u-1])}}return he(s),1},gmatch:function(e){var t=le(e,1),r=le(e,2),n=t.length,u=r.length;B(e,2);var s=new function e(){a(this,e),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new et};return y(e,s),vt(s.ms,e,t,n,r,u),s.src=0,s.p=0,s.lastmatch=null,R(e,Lt,3),1},gsub:function(e){var t=le(e,1),r=t.length,a=le(e,2),n=a.length,u=null,s=z(e,3),o=fe(e,4,r+1),l=94===a[0],i=0,c=new et(e),_=new J;for(te(e,s===L||s===A||s===h||s===g,3,"string/function/table expected"),ae(e,_),l&&(a=a.subarray(1),n--),vt(c,e,t,r,a,n),t=0,a=0;i<o;){var f;if(ht(c),null!==(f=_t(c,t,a))&&f!==u)i++,At(c,_,t,f,s),t=u=f;else{if(!(t<c.src_end))break;Z(_,c.src[t++])}if(l)break}return W(_,c.src.subarray(t,c.src_end),c.src_end-t),he(_),N(e,i),2},len:function(e){return N(e,le(e,1).length),1},lower:function(e){for(var t=le(e,1),r=t.length,a=new Uint8Array(r),n=0;n<r;n++){var u=t[n];De(u)&&(u|=32),a[n]=u}return P(e,a),1},match:function(e){return dt(e,0)},pack:function(e){var t=new J,r=new He(e),a={s:le(e,1),off:0},n=1,u=0;for(w(e),ae(e,t);a.off<a.s.length;){var s=Je(r,u,a),o=s.opt,l=s.size,i=s.ntoalign;for(u+=i+l;i-- >0;)Z(t,0);switch(n++,o){case 0:var c=ue(e,n);if(l<4){var _=1<<8*l-1;te(e,-_<=c&&c<_,n,"integer overflow")}Ze(t,c,r.islittle,l,c<0);break;case 1:var f=ue(e,n);l<4&&te(e,f>>>0<1<<8*l,n,"unsigned overflow"),Ze(t,f>>>0,r.islittle,l,!1);break;case 2:var p=ve(t,l),v=se(e,n),h=new DataView(p.buffer,p.byteOffset,p.byteLength);4===l?h.setFloat32(0,v,r.islittle):h.setFloat64(0,v,r.islittle),Q(t,l);break;case 3:var d=le(e,n),L=d.length;for(te(e,L<=l,n,"string longer than given size"),W(t,d,L);L++<l;)Z(t,0);break;case 4:var A=le(e,n),g=A.length;te(e,l>=4||g<1<<8*l,n,"string length does not fit in given size"),Ze(t,g,r.islittle,l,0),W(t,A,g),u+=g;break;case 5:var b=le(e,n),T=b.length;te(e,Te(b,0)<0,n,"strings contains zeros"),W(t,b,T),Z(t,0),u+=T+1;break;case 6:Z(t,0);case 7:case 8:n--}}return he(t),1},packsize:function(e){for(var t=new He(e),r={s:le(e,1),off:0},a=0;r.off<r.s.length;){var n=Je(t,a,r),u=n.opt,s=n.size,o=n.ntoalign;switch(te(e,a<=2147483647-(s+=o),1,"format result too large"),a+=s,u){case 4:case 5:re(e,1,"variable-length format")}}return N(e,a),1},rep:function(e){var t=le(e,1),r=t.length,a=ue(e,2),n=pe(e,3,""),u=n.length;if(a<=0)S(e,"");else{if(r+u<r||r+u>2147483647/a)return ce(e,ke("resulting string too large"));for(var s=a*r+(a-1)*u,o=new J,l=ne(e,o,s),i=0;a-- >1;)l.set(t,i),i+=r,u>0&&(l.set(n,i),i+=u);l.set(t,i),de(o,s)}return 1},reverse:function(e){for(var t=le(e,1),r=t.length,a=new Uint8Array(r),n=0;n<r;n++)a[n]=t[r-1-n];return P(e,a),1},sub:function(e){var t=le(e,1),r=t.length,a=me(ue(e,2),r),n=me(fe(e,3,-1),r);return a<1&&(a=1),n>r&&(n=r),a<=n?P(e,t.subarray(a-1,a-1+(n-a+1))):S(e,""),1},unpack:function(e){var t=new He(e),r={s:le(e,1),off:0},a=le(e,2),n=a.length,u=me(fe(e,3,1),n)-1,s=0;for(te(e,u<=n&&u>=0,3,"initial position out of string");r.off<r.s.length;){var o=Je(t,u,r),l=o.opt,i=o.size,c=o.ntoalign;switch(u+c+i>n&&re(e,2,ke("data string too short",!0)),u+=c,oe(e,2,ke("too many results",!0)),s++,l){case 0:case 1:var _=We(e,a.subarray(u),t.islittle,i,0===l);N(e,_);break;case 2:var f=Qe(0,a.subarray(u),t.islittle,i);M(e,f);break;case 3:P(e,a.subarray(u,u+i));break;case 4:var p=We(e,a.subarray(u),t.islittle,i,0);te(e,u+p+i<=n,2,"data string too short"),P(e,a.subarray(u+i,u+i+p)),u+=p;break;case 5:var v=Te(a,0,u);-1===v&&(v=a.length-u),P(e,a.subarray(u,v)),u=v+1;break;case 7:case 6:case 8:s--}u+=i}return N(e,u+1),s+1},upper:function(e){for(var t=le(e,1),r=t.length,a=new Uint8Array(r),n=0;n<r;n++){var u=t[n];Pe(u)&&(u&=223),a[n]=u}return P(e,a),1}};e.exports.luaopen_string=function(e){return _e(e,gt),function(e){T(e,0,1),S(e,""),D(e,-2),V(e,-2),U(e,1),D(e,-2),G(e,-2,ke("__index",!0)),U(e,1)}(e),1}},function(e,t,r){"use strict";var a=r(1),n=a.LUA_TNIL,u=a.LUA_TTABLE,s=(a.lua_close,a.lua_createtable),o=a.lua_getfield,l=(a.lua_isboolean,a.lua_isnoneornil),i=a.lua_pop,c=(a.lua_pushboolean,a.lua_pushfstring),_=a.lua_pushinteger,f=(a.lua_pushliteral,a.lua_pushnil,a.lua_pushnumber),p=(a.lua_pushstring,a.lua_setfield),v=a.lua_settop,h=(a.lua_toboolean,a.lua_tointegerx),d=r(4),L=d.luaL_Buffer,A=d.luaL_addchar,g=d.luaL_addstring,b=d.luaL_argerror,T=d.luaL_buffinit,x=d.luaL_checkinteger,k=(d.luaL_checkstring,d.luaL_checktype),O=d.luaL_error,E=(d.luaL_execresult,d.luaL_fileresult,d.luaL_newlib),m=d.luaL_opt,U=(d.luaL_optinteger,d.luaL_optlstring),R=(d.luaL_optstring,d.luaL_pushresult),N=r(6),y=N.luastring_indexOf,S=N.to_jsstring,I=N.to_luastring,w=r(36),M=I("aAbBcdHIjmMpSUwWxXyYZ%"),P=function(e,t,r){_(e,r),p(e,-2,I(t,!0))},D=function(e,t,r){P(e,"sec",r?t.getUTCSeconds():t.getSeconds()),P(e,"min",r?t.getUTCMinutes():t.getMinutes()),P(e,"hour",r?t.getUTCHours():t.getHours()),P(e,"day",r?t.getUTCDate():t.getDate()),P(e,"month",r?t.getUTCMonth():t.getMonth()),P(e,"year",r?t.getUTCFullYear():t.getFullYear()),P(e,"wday",r?t.getUTCDay():t.getDay());var a=new Date;P(e,"yday",Math.floor((a-new Date(a.getFullYear(),0,0))/864e5))},C=Number.MAX_SAFE_INTEGER/2,G=function(e,t,r,a){var u=o(e,-1,I(t,!0)),s=h(e,-1);if(!1===s){if(u!==n)return O(e,I("field '%s' is not an integer"),t);if(r<0)return O(e,I("field '%s' missing in date table"),t);s=r}else{if(!(-C<=s&&s<=C))return O(e,I("field '%s' is out-of-bound"),t);s-=a}return i(e,1),s},V=function(e,t,r,a,n){for(var u=0;u<n;u++)if(e[t+u]!==r[a+u])return!1;return!0},B=function(e,t,r,a){for(var n=M,u=0,s=1;u<n.length&&s<=t.length-r;u+=s)if(n[u]==="|".charCodeAt(0))s++;else if(V(t,r,n,u,s))return a.set(t.subarray(r,r+s)),r+s;b(e,1,c(e,I("invalid conversion specifier '%%%s'"),t))},K=function(e,t){return x(e,t)},F={date:function(e){var t=U(e,1,"%c"),r=1e3*m(e,K,2,(new Date).getTime()/1e3),a=new Date(r),n=!1,u=0;if(t[u]==="!".charCodeAt(0)&&(n=!0,u++),null===a&&O(e,I("time result cannot be represented in this installation",!0)),t[u]==="*".charCodeAt(0)&&t[u+1]==="t".charCodeAt(0))s(e,0,9),D(e,a,n);else{var o=new Uint8Array(4);o[0]="%".charCodeAt(0);var l=new L;for(T(e,l);u<t.length;)if(t[u]!=="%".charCodeAt(0))A(l,t[u++]);else{u=B(e,t,++u,o.subarray(1));var i=y(o,0);-1!==i&&(o=o.subarray(0,i));var c=w(S(o),a);g(l,I(c))}R(l)}return 1},difftime:function(e){var t=K(e,1),r=K(e,2);return f(e,new Date(t)-new Date(r)),1},time:function(e){var t=new Date;return l(e,1)||(k(e,1,u),v(e,1),t.setSeconds(G(e,"sec",0,0)),t.setMinutes(G(e,"min",0,0)),t.setHours(G(e,"hour",12,0)),t.setDate(G(e,"day",-1,0)),t.setMonth(G(e,"month",-1,1)),t.setFullYear(G(e,"year",-1,0)),D(e,t)),_(e,Math.floor(t/1e3)),1}};F.clock=function(e){return f(e,performance.now()/1e3),1};e.exports.luaopen_os=function(e){return E(e,F),1}},function(e,t,r){"use strict";var a=r(3).LUA_MAXINTEGER,n=r(1),u=n.LUA_OPEQ,s=n.LUA_OPLT,o=n.LUA_TFUNCTION,l=n.LUA_TNIL,i=n.LUA_TTABLE,c=n.lua_call,_=n.lua_checkstack,f=n.lua_compare,p=n.lua_createtable,v=n.lua_geti,h=n.lua_getmetatable,d=n.lua_gettop,L=n.lua_insert,A=n.lua_isnil,g=n.lua_isnoneornil,b=n.lua_isstring,T=n.lua_pop,x=n.lua_pushinteger,k=n.lua_pushnil,O=n.lua_pushstring,E=n.lua_pushvalue,m=n.lua_rawget,U=n.lua_setfield,R=n.lua_seti,N=n.lua_settop,y=n.lua_toboolean,S=n.lua_type,I=r(4),w=I.luaL_Buffer,M=I.luaL_addlstring,P=I.luaL_addvalue,D=I.luaL_argcheck,C=I.luaL_buffinit,G=I.luaL_checkinteger,V=I.luaL_checktype,B=I.luaL_error,K=I.luaL_len,F=I.luaL_newlib,j=I.luaL_opt,H=I.luaL_optinteger,X=I.luaL_optlstring,z=I.luaL_pushresult,q=I.luaL_typename,Y=r(12),J=r(6).to_luastring,Z=function(e,t,r){return O(e,t),m(e,-r)!==l},W=function(e,t,r){if(S(e,t)!==i){var a=1;!h(e,t)||1&r&&!Z(e,J("__index",!0),++a)||2&r&&!Z(e,J("__newindex",!0),++a)||4&r&&!Z(e,J("__len",!0),++a)?V(e,t,i):T(e,a)}},Q=function(e,t,r){return W(e,t,4|r),K(e,t)},$=function(e,t,r){v(e,1,r),b(e,-1)||B(e,J("invalid value (%s) at index %d in table for 'concat'"),q(e,-1),r),P(t)},ee=function(e,t,r){R(e,1,t),R(e,1,r)},te=function(e,t,r){if(A(e,2))return f(e,t,r,s);E(e,2),E(e,t-1),E(e,r-2),c(e,2,1);var a=y(e,-1);return T(e,1),a},re=function(e,t,r){for(var a=t,n=r-1;;){for(;v(e,1,++a),te(e,-1,-2);)a==r-1&&B(e,J("invalid order function for sorting")),T(e,1);for(;v(e,1,--n),te(e,-3,-1);)n<a&&B(e,J("invalid order function for sorting")),T(e,1);if(n<a)return T(e,1),ee(e,r-1,a),a;ee(e,a,n)}},ae=function(e,t,r){var a=Math.floor((t-e)/4),n=r%(2*a)+(e+a);return Y.lua_assert(e+a<=n&&n<=t-a),n},ne={concat:function(e){var t=Q(e,1,1),r=X(e,2,""),a=r.length,n=H(e,3,1);t=H(e,4,t);var u=new w;for(C(e,u);n<t;n++)$(e,u,n),M(u,r,a);return n===t&&$(e,u,n),z(u),1},insert:function(e){var t=Q(e,1,3)+1,r=void 0;switch(d(e)){case 2:r=t;break;case 3:r=G(e,2),D(e,1<=r&&r<=t,2,"position out of bounds");for(var a=t;a>r;a--)v(e,1,a-1),R(e,1,a);break;default:return B(e,"wrong number of arguments to 'insert'")}return R(e,1,r),0},move:function(e){var t=G(e,2),r=G(e,3),n=G(e,4),s=g(e,5)?1:5;if(W(e,1,1),W(e,s,2),r>=t){D(e,t>0||r<a+t,3,"too many elements to move");var o=r-t+1;if(D(e,n<=a-o+1,4,"destination wrap around"),n>r||n<=t||1!==s&&1!==f(e,1,s,u))for(var l=0;l<o;l++)v(e,1,t+l),R(e,s,n+l);else for(var i=o-1;i>=0;i--)v(e,1,t+i),R(e,s,n+i)}return E(e,s),1},pack:function(e){var t=d(e);p(e,t,1),L(e,1);for(var r=t;r>=1;r--)R(e,1,r);return x(e,t),U(e,1,J("n")),1},remove:function(e){var t=Q(e,1,3),r=H(e,2,t);for(r!==t&&D(e,1<=r&&r<=t+1,1,"position out of bounds"),v(e,1,r);r<t;r++)v(e,1,r+1),R(e,1,r);return k(e),R(e,1,r),1},sort:function(e){var t=Q(e,1,3);return t>1&&(D(e,t<a,1,"array too big"),g(e,2)||V(e,2,o),N(e,2),function e(t,r,a,n){for(;r<a;){if(v(t,1,r),v(t,1,a),te(t,-1,-2)?ee(t,r,a):T(t,2),a-r==1)return;var u=void 0;if(u=a-r<100||0===n?Math.floor((r+a)/2):ae(r,a,n),v(t,1,u),v(t,1,r),te(t,-2,-1)?ee(t,u,r):(T(t,1),v(t,1,a),te(t,-1,-2)?ee(t,u,a):T(t,2)),a-r==2)return;v(t,1,u),E(t,-1),v(t,1,a-1),ee(t,u,a-1);var s=void 0;(u=re(t,r,a))-r<a-u?(e(t,r,u-1,n),s=u-r,r=u+1):(e(t,u+1,a,n),s=a-u,a=u-1),(a-r)/128>s&&(n=Math.floor(1*Math.random()<<32))}}(e,1,t,0)),0},unpack:function(e){var t=H(e,2,1),r=j(e,G,3,K(e,1));if(t>r)return 0;var a=r-t;if(a>=Number.MAX_SAFE_INTEGER||!_(e,++a))return B(e,J("too many results to unpack",!0));for(;t<r;t++)v(e,1,t);return v(e,1,r),a}};e.exports.luaopen_table=function(e){return F(e,ne),1}},function(e,t,r){"use strict";var a=r(1),n=a.LUA_OK,u=a.LUA_TFUNCTION,s=a.LUA_TSTRING,o=a.LUA_YIELD,l=a.lua_Debug,i=a.lua_checkstack,c=a.lua_concat,_=a.lua_error,f=a.lua_getstack,p=a.lua_gettop,v=a.lua_insert,h=a.lua_isyieldable,d=a.lua_newthread,L=a.lua_pop,A=a.lua_pushboolean,g=a.lua_pushcclosure,b=a.lua_pushliteral,T=a.lua_pushthread,x=a.lua_pushvalue,k=a.lua_resume,O=a.lua_status,E=a.lua_tothread,m=a.lua_type,U=a.lua_upvalueindex,R=a.lua_xmove,N=a.lua_yield,y=r(4),S=y.luaL_argcheck,I=y.luaL_checktype,w=y.luaL_newlib,M=y.luaL_where,P=function(e){var t=E(e,1);return S(e,t,1,"thread expected"),t},D=function(e,t,r){if(!i(t,r))return b(e,"too many arguments to resume"),-1;if(O(t)===n&&0===p(t))return b(e,"cannot resume dead coroutine"),-1;R(e,t,r);var a=k(t,e,r);if(a===n||a===o){var u=p(t);return i(e,u+1)?(R(t,e,u),u):(L(t,u),b(e,"too many results to resume"),-1)}return R(t,e,1),-1},C=function(e){var t=E(e,U(1)),r=D(e,t,p(e));return r<0?(m(e,-1)===s&&(M(e,1),v(e,-2),c(e,2)),_(e)):r},G=function(e){I(e,1,u);var t=d(e);return x(e,1),R(e,t,1),1},V={create:G,isyieldable:function(e){return A(e,h(e)),1},resume:function(e){var t=P(e),r=D(e,t,p(e)-1);return r<0?(A(e,0),v(e,-2),2):(A(e,1),v(e,-(r+1)),r+1)},running:function(e){return A(e,T(e)),2},status:function(e){var t=P(e);if(e===t)b(e,"running");else switch(O(t)){case o:b(e,"suspended");break;case n:var r=new l;f(t,0,r)>0?b(e,"normal"):0===p(t)?b(e,"dead"):b(e,"suspended");break;default:b(e,"dead")}return 1},wrap:function(e){return G(e),g(e,C,1),1},yield:function(e){return N(e,p(e))}};e.exports.luaopen_coroutine=function(e){return w(e,V),1}},function(e,t,r){"use strict";var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=r(0),s=u.LUA_MULTRET,o=u.to_luastring,l=r(39),i=l.BinOpr,c=i.OPR_ADD,_=i.OPR_AND,f=i.OPR_BAND,p=i.OPR_BOR,v=i.OPR_BXOR,h=i.OPR_CONCAT,d=i.OPR_DIV,L=i.OPR_EQ,A=i.OPR_GE,g=i.OPR_GT,b=i.OPR_IDIV,T=i.OPR_LE,x=i.OPR_LT,k=i.OPR_MOD,O=i.OPR_MUL,E=i.OPR_NE,m=i.OPR_NOBINOPR,U=i.OPR_OR,R=i.OPR_POW,N=i.OPR_SHL,y=i.OPR_SHR,S=i.OPR_SUB,I=l.UnOpr,w=I.OPR_BNOT,M=I.OPR_LEN,P=I.OPR_MINUS,D=I.OPR_NOT,C=I.OPR_NOUNOPR,G=l.NO_JUMP,V=l.getinstruction,B=l.luaK_checkstack,K=l.luaK_codeABC,F=l.luaK_codeABx,j=l.luaK_codeAsBx,H=l.luaK_codek,X=l.luaK_concat,z=l.luaK_dischargevars,q=l.luaK_exp2RK,Y=l.luaK_exp2anyreg,J=l.luaK_exp2anyregup,Z=l.luaK_exp2nextreg,W=l.luaK_exp2val,Q=l.luaK_fixline,$=l.luaK_getlabel,ee=l.luaK_goiffalse,te=l.luaK_goiftrue,re=l.luaK_indexed,ae=l.luaK_infix,ne=l.luaK_intK,ue=l.luaK_jump,se=l.luaK_jumpto,oe=l.luaK_nil,le=l.luaK_patchclose,ie=l.luaK_patchlist,ce=l.luaK_patchtohere,_e=l.luaK_posfix,fe=l.luaK_prefix,pe=l.luaK_reserveregs,ve=l.luaK_ret,he=l.luaK_self,de=l.luaK_setlist,Le=l.luaK_setmultret,Ae=l.luaK_setoneret,ge=l.luaK_setreturns,be=l.luaK_storevar,Te=l.luaK_stringK,xe=r(7),ke=r(16),Oe=r(19),Ee=r(2),me=Ee.LUAI_MAXCCALLS,Ue=Ee.MAX_INT,Re=Ee.lua_assert,Ne=r(5),ye=r(13),Se=ye.OpCodesI,Ie=Se.OP_CALL,we=Se.OP_CLOSURE,Me=Se.OP_FORLOOP,Pe=Se.OP_FORPREP,De=Se.OP_GETUPVAL,Ce=Se.OP_MOVE,Ge=Se.OP_NEWTABLE,Ve=Se.OP_SETTABLE,Be=Se.OP_TAILCALL,Ke=Se.OP_TFORCALL,Fe=Se.OP_TFORLOOP,je=Se.OP_VARARG,He=ye.LFIELDS_PER_FLUSH,Xe=ye.SETARG_B,ze=ye.SETARG_C,qe=ye.SET_OPCODE,Ye=r(8),Je=Ye.luaS_eqlngstr,Ze=Ye.luaS_new,We=Ye.luaS_newliteral,Qe=r(9),$e=ke.Proto,et=Oe.RESERVED,tt=function(e){return e===nt.VCALL||e===nt.VVARARG},rt=function(e,t){return Je(e,t)},at=function e(){n(this,e),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN},nt={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},ut=function(){function e(){n(this,e),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return a(e,[{key:"to",value:function(e){this.k=e.k,this.u=e.u,this.t=e.t,this.f=e.f}}]),e}(),st=function e(){n(this,e),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN},ot=function e(){n(this,e),this.arr=[],this.n=NaN,this.size=NaN},lt=function(e,t){e.t.token=0,Oe.luaX_syntaxerror(e,t)},it=function(e,t){Oe.luaX_syntaxerror(e,Ne.luaO_pushfstring(e.L,o("%s expected",!0),Oe.luaX_token2str(e,t)))},ct=function(e,t,r,a){t>r&&function(e,t,r){var a=e.ls.L,n=e.f.linedefined,u=0===n?o("main function",!0):Ne.luaO_pushfstring(a,o("function at line %d",!0),n),s=Ne.luaO_pushfstring(a,o("too many %s (limit is %d) in %s",!0),r,t,u);Oe.luaX_syntaxerror(e.ls,s)}(e,r,a)},_t=function(e,t){return e.t.token===t&&(Oe.luaX_next(e),!0)},ft=function(e,t){e.t.token!==t&&it(e,t)},pt=function(e,t){ft(e,t),Oe.luaX_next(e)},vt=function(e,t,r){t||Oe.luaX_syntaxerror(e,r)},ht=function(e,t,r,a){_t(e,t)||(a===e.linenumber?it(e,t):Oe.luaX_syntaxerror(e,Ne.luaO_pushfstring(e.L,o("%s expected (to close %s at line %d)"),Oe.luaX_token2str(e,t),Oe.luaX_token2str(e,r),a)))},dt=function(e){ft(e,et.TK_NAME);var t=e.t.seminfo.ts;return Oe.luaX_next(e),t},Lt=function(e,t,r){e.f=e.t=G,e.k=t,e.u.info=r},At=function(e,t,r){Lt(t,nt.VK,Te(e.fs,r))},gt=function(e,t){At(e,t,dt(e))},bt=function(e,t){var r=e.fs,a=e.dyd,u=function(e,t){var r=e.fs,a=r.f;return a.locvars[r.nlocvars]=new Ne.LocVar,a.locvars[r.nlocvars].varname=t,r.nlocvars++}(e,t);ct(r,a.actvar.n+1-r.firstlocal,200,o("local variables",!0)),a.actvar.arr[a.actvar.n]=new function e(){n(this,e),this.idx=NaN},a.actvar.arr[a.actvar.n].idx=u,a.actvar.n++},Tt=function(e,t){bt(e,Oe.luaX_newstring(e,o(t,!0)))},xt=function(e,t){var r=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return Re(r<e.nlocvars),e.f.locvars[r]},kt=function(e,t){var r=e.fs;for(r.nactvar=r.nactvar+t;t;t--)xt(r,r.nactvar-t).startpc=r.pc},Ot=function(e,t,r){var a=e.f;return ct(e,e.nups+1,ke.MAXUPVAL,o("upvalues",!0)),a.upvalues[e.nups]={instack:r.k===nt.VLOCAL,idx:r.u.info,name:t},e.nups++},Et=function e(t,r,a,n){if(null===t)Lt(a,nt.VVOID,0);else{var u=function(e,t){for(var r=e.nactvar-1;r>=0;r--)if(rt(t,xt(e,r).varname))return r;return-1}(t,r);if(u>=0)Lt(a,nt.VLOCAL,u),n||function(e,t){for(var r=e.bl;r.nactvar>t;)r=r.previous;r.upval=1}(t,u);else{var s=function(e,t){for(var r=e.f.upvalues,a=0;a<e.nups;a++)if(rt(r[a].name,t))return a;return-1}(t,r);if(s<0){if(e(t.prev,r,a,0),a.k===nt.VVOID)return;s=Ot(t,r,a)}Lt(a,nt.VUPVAL,s)}}},mt=function(e,t){var r=dt(e),a=e.fs;if(Et(a,r,t,1),t.k===nt.VVOID){var n=new ut;Et(a,e.envn,t,1),Re(t.k!==nt.VVOID),At(e,n,r),re(a,t,n)}},Ut=function(e,t,r,a){var n=e.fs,u=t-r;if(tt(a.k))++u<0&&(u=0),ge(n,a,u),u>1&&pe(n,u-1);else if(a.k!==nt.VVOID&&Z(n,a),u>0){var s=n.freereg;pe(n,u),oe(n,s,u)}r>t&&(e.fs.freereg-=r-t)},Rt=function(e){var t=e.L;++t.nCcalls,ct(e.fs,t.nCcalls,me,o("JS levels",!0))},Nt=function(e){return e.L.nCcalls--},yt=function(e,t,r){var a=e.fs,n=e.dyd.gt,u=n.arr[t];if(Re(rt(u.name,r.name)),u.nactvar<r.nactvar){var s=xt(a,u.nactvar).varname,l=Ne.luaO_pushfstring(e.L,o("<goto %s> at line %d jumps into the scope of local '%s'"),u.name.getstr(),u.line,s.getstr());lt(e,l)}ie(a,u.pc,r.pc);for(var i=t;i<n.n-1;i++)n.arr[i]=n.arr[i+1];n.n--},St=function(e,t){for(var r=e.fs.bl,a=e.dyd,n=a.gt.arr[t],u=r.firstlabel;u<a.label.n;u++){var s=a.label.arr[u];if(rt(s.name,n.name))return n.nactvar>s.nactvar&&(r.upval||a.label.n>r.firstlabel)&&le(e.fs,n.pc,s.nactvar),yt(e,t,s),!0}return!1},It=function(e,t,r,a,u){var s=t.n;return t.arr[s]=new function e(){n(this,e),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN},t.arr[s].name=r,t.arr[s].line=a,t.arr[s].nactvar=e.fs.nactvar,t.arr[s].pc=u,t.n=s+1,s},wt=function(e,t){for(var r=e.dyd.gt,a=e.fs.bl.firstgoto;a<r.n;)rt(r.arr[a].name,t.name)?yt(e,a,t):a++},Mt=function(e,t,r){t.isloop=r,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,Re(e.freereg===e.nactvar)},Pt=function(e,t,r){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=G,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;var a=new $e(e.L);(a=t.f).source=e.source,a.maxstacksize=2,Mt(t,r,!1)},Dt=function(e){var t=e.bl,r=e.ls;if(t.previous&&t.upval){var a=ue(e);le(e,a,t.nactvar),ce(e,a)}t.isloop&&function(e){var t=We(e.L,"break"),r=It(e,e.dyd.label,t,0,e.fs.pc);wt(e,e.dyd.label.arr[r])}(r),e.bl=t.previous,function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)xt(e,--e.nactvar).endpc=e.pc}(e,t.nactvar),Re(t.nactvar===e.nactvar),e.freereg=e.nactvar,r.dyd.label.n=t.firstlabel,t.previous?function(e,t){for(var r=t.firstgoto,a=e.ls.dyd.gt;r<a.n;){var n=a.arr[r];n.nactvar>t.nactvar&&(t.upval&&le(e,n.pc,t.nactvar),n.nactvar=t.nactvar),St(e.ls,r)||r++}}(e,t):t.firstgoto<r.dyd.gt.n&&function(e,t){var r=Oe.isreserved(t.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";r=Ne.luaO_pushfstring(e.L,o(r),t.name.getstr(),t.line),lt(e,r)}(r,r.dyd.gt.arr[t.firstgoto])},Ct=function(e){var t=e.fs;ve(t,0,0),Dt(t),Re(null===t.bl),e.fs=t.prev},Gt=function(e,t){switch(e.t.token){case et.TK_ELSE:case et.TK_ELSEIF:case et.TK_END:case et.TK_EOS:return!0;case et.TK_UNTIL:return t;default:return!1}},Vt=function(e){for(;!Gt(e,1);){if(e.t.token===et.TK_RETURN)return void _r(e);_r(e)}},Bt=function(e,t){var r=e.fs,a=new ut;J(r,t),Oe.luaX_next(e),gt(e,a),re(r,t,a)},Kt=function(e,t){Oe.luaX_next(e),$t(e,t),W(e.fs,t),pt(e,93)},Ft=function(e,t){var r=e.fs,a=e.fs.freereg,n=new ut,u=new ut;e.t.token===et.TK_NAME?(ct(r,t.nh,Ue,o("items in a constructor",!0)),gt(e,n)):Kt(e,n),t.nh++,pt(e,61);var s=q(r,n);$t(e,u),K(r,Ve,t.t.u.info,s,q(r,u)),r.freereg=a},jt=function(e,t){t.v.k!==nt.VVOID&&(Z(e,t.v),t.v.k=nt.VVOID,t.tostore===He&&(de(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},Ht=function(e,t){$t(e,t.v),ct(e.fs,t.na,Ue,o("items in a constructor",!0)),t.na++,t.tostore++},Xt=function(e,t){switch(e.t.token){case et.TK_NAME:61!==Oe.luaX_lookahead(e)?Ht(e,t):Ft(e,t);break;case 91:Ft(e,t);break;default:Ht(e,t)}},zt=function(e,t){var r=e.fs,a=e.linenumber,u=K(r,Ge,0,0,0),o=new function e(){n(this,e),this.v=new ut,this.t=new ut,this.nh=NaN,this.na=NaN,this.tostore=NaN};o.na=o.nh=o.tostore=0,o.t=t,Lt(t,nt.VRELOCABLE,u),Lt(o.v,nt.VVOID,0),Z(e.fs,t),pt(e,123);do{if(Re(o.v.k===nt.VVOID||o.tostore>0),125===e.t.token)break;jt(r,o),Xt(e,o)}while(_t(e,44)||_t(e,59));ht(e,125,123,a),function(e,t){0!==t.tostore&&(tt(t.v.k)?(Le(e,t.v),de(e,t.t.u.info,t.na,s),t.na--):(t.v.k!==nt.VVOID&&Z(e,t.v),de(e,t.t.u.info,t.na,t.tostore)))}(r,o),Xe(r.f.code[u],Ne.luaO_int2fb(o.na)),ze(r.f.code[u],Ne.luaO_int2fb(o.nh))},qt=function(e,t,r,a){var n=new st,u=new at;n.f=function(e){var t=e.L,r=new $e(t),a=e.fs;return a.f.p[a.np++]=r,r}(e),n.f.linedefined=a,Pt(e,n,u),pt(e,40),r&&(Tt(e,"self"),kt(e,1)),function(e){var t=e.fs,r=t.f,a=0;if(r.is_vararg=!1,41!==e.t.token)do{switch(e.t.token){case et.TK_NAME:bt(e,dt(e)),a++;break;case et.TK_DOTS:Oe.luaX_next(e),r.is_vararg=!0;break;default:Oe.luaX_syntaxerror(e,o("<name> or '...' expected",!0))}}while(!r.is_vararg&&_t(e,44));kt(e,a),r.numparams=t.nactvar,pe(t,t.nactvar)}(e),pt(e,41),Vt(e),n.f.lastlinedefined=e.linenumber,ht(e,et.TK_END,et.TK_FUNCTION,a),function(e,t){var r=e.fs.prev;Lt(t,nt.VRELOCABLE,F(r,we,0,r.np-1)),Z(r,t)}(e,t),Ct(e)},Yt=function(e,t){var r=1;for($t(e,t);_t(e,44);)Z(e.fs,t),$t(e,t),r++;return r},Jt=function(e,t,r){var a=e.fs,n=new ut;switch(e.t.token){case 40:Oe.luaX_next(e),41===e.t.token?n.k=nt.VVOID:(Yt(e,n),Le(a,n)),ht(e,41,40,r);break;case 123:zt(e,n);break;case et.TK_STRING:At(e,n,e.t.seminfo.ts),Oe.luaX_next(e);break;default:Oe.luaX_syntaxerror(e,o("function arguments expected",!0))}Re(t.k===nt.VNONRELOC);var u=void 0,l=t.u.info;tt(n.k)?u=s:(n.k!==nt.VVOID&&Z(a,n),u=a.freereg-(l+1)),Lt(t,nt.VCALL,K(a,Ie,l,u+1,2)),Q(a,r),a.freereg=l+1},Zt=function(e,t){var r=e.fs,a=e.linenumber;for(!function(e,t){switch(e.t.token){case 40:var r=e.linenumber;return Oe.luaX_next(e),$t(e,t),ht(e,41,40,r),void z(e.fs,t);case et.TK_NAME:return void mt(e,t);default:Oe.luaX_syntaxerror(e,o("unexpected symbol",!0))}}(e,t);;)switch(e.t.token){case 46:Bt(e,t);break;case 91:var n=new ut;J(r,t),Kt(e,n),re(r,t,n);break;case 58:var u=new ut;Oe.luaX_next(e),gt(e,u),he(r,t,u),Jt(e,t,a);break;case 40:case et.TK_STRING:case 123:Z(r,t),Jt(e,t,a);break;default:return}},Wt=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Qt=function e(t,r,a){Rt(t);var n=function(e){switch(e){case et.TK_NOT:return D;case 45:return P;case 126:return w;case 35:return M;default:return C}}(t.t.token);if(n!==C){var u=t.linenumber;Oe.luaX_next(t),e(t,r,12),fe(t.fs,n,r,u)}else!function(e,t){switch(e.t.token){case et.TK_FLT:Lt(t,nt.VKFLT,0),t.u.nval=e.t.seminfo.r;break;case et.TK_INT:Lt(t,nt.VKINT,0),t.u.ival=e.t.seminfo.i;break;case et.TK_STRING:At(e,t,e.t.seminfo.ts);break;case et.TK_NIL:Lt(t,nt.VNIL,0);break;case et.TK_TRUE:Lt(t,nt.VTRUE,0);break;case et.TK_FALSE:Lt(t,nt.VFALSE,0);break;case et.TK_DOTS:var r=e.fs;vt(e,r.f.is_vararg,o("cannot use '...' outside a vararg function",!0)),Lt(t,nt.VVARARG,K(r,je,0,1,0));break;case 123:return void zt(e,t);case et.TK_FUNCTION:return Oe.luaX_next(e),void qt(e,t,0,e.linenumber);default:return void Zt(e,t)}Oe.luaX_next(e)}(t,r);for(var s=function(e){switch(e){case 43:return c;case 45:return S;case 42:return O;case 37:return k;case 94:return R;case 47:return d;case et.TK_IDIV:return b;case 38:return f;case 124:return p;case 126:return v;case et.TK_SHL:return N;case et.TK_SHR:return y;case et.TK_CONCAT:return h;case et.TK_NE:return E;case et.TK_EQ:return L;case 60:return x;case et.TK_LE:return T;case 62:return g;case et.TK_GE:return A;case et.TK_AND:return _;case et.TK_OR:return U;default:return m}}(t.t.token);s!==m&&Wt[s].left>a;){var l=new ut,i=t.linenumber;Oe.luaX_next(t),ae(t.fs,s,r);var I=e(t,l,Wt[s].right);_e(t.fs,s,r,l,i),s=I}return Nt(t),s},$t=function(e,t){Qt(e,t,0)},er=function(e){var t=e.fs,r=new at;Mt(t,r,0),Vt(e),Dt(t)},tr=function e(){n(this,e),this.prev=null,this.v=new ut},rr=function e(t,r,a){var n,u=new ut;if(vt(t,(n=r.v.k,nt.VLOCAL<=n&&n<=nt.VINDEXED),o("syntax error",!0)),_t(t,44)){var s=new tr;s.prev=r,Zt(t,s.v),s.v.k!==nt.VINDEXED&&function(e,t,r){for(var a=e.fs,n=a.freereg,u=!1;t;t=t.prev)t.v.k===nt.VINDEXED&&(t.v.u.ind.vt===r.k&&t.v.u.ind.t===r.u.info&&(u=!0,t.v.u.ind.vt=nt.VLOCAL,t.v.u.ind.t=n),r.k===nt.VLOCAL&&t.v.u.ind.idx===r.u.info&&(u=!0,t.v.u.ind.idx=n));if(u){var s=r.k===nt.VLOCAL?Ce:De;K(a,s,n,r.u.info,0),pe(a,1)}}(t,r,s.v),ct(t.fs,a+t.L.nCcalls,me,o("JS levels",!0)),e(t,s,a+1)}else{pt(t,61);var l=Yt(t,u);if(l===a)return Ae(t.fs,u),void be(t.fs,r.v,u);Ut(t,a,l,u)}Lt(u,nt.VNONRELOC,t.fs.freereg-1),be(t.fs,r.v,u)},ar=function(e){var t=new ut;return $t(e,t),t.k===nt.VNIL&&(t.k=nt.VFALSE),te(e.fs,t),t.f},nr=function(e,t){var r=e.linenumber,a=void 0;_t(e,et.TK_GOTO)?a=dt(e):(Oe.luaX_next(e),a=We(e.L,"break"));var n=It(e,e.dyd.gt,a,r,t);St(e,n)},ur=function(e,t,r){var a,n=e.fs,u=e.dyd.label;!function(e,t,r){for(var a=e.bl.firstlabel;a<t.n;a++)if(rt(r,t.arr[a].name)){var n=Ne.luaO_pushfstring(e.ls.L,o("label '%s' already defined on line %d",!0),r.getstr(),t.arr[a].line);lt(e.ls,n)}}(n,u,t),pt(e,et.TK_DBCOLON),a=It(e,u,t,r,$(n)),function(e){for(;59===e.t.token||e.t.token===et.TK_DBCOLON;)_r(e)}(e),Gt(e,0)&&(u.arr[a].nactvar=n.bl.nactvar),wt(e,u.arr[a])},sr=function(e){var t=new ut;return $t(e,t),Z(e.fs,t),Re(t.k===nt.VNONRELOC),t.u.info},or=function(e,t,r,a,n){var u=new at,s=e.fs,o=void 0;kt(e,3),pt(e,et.TK_DO);var l=n?j(s,Pe,t,G):ue(s);Mt(s,u,0),kt(e,a),pe(s,a),er(e),Dt(s),ce(s,l),n?o=j(s,Me,t,G):(K(s,Ke,t,0,a),Q(s,r),o=j(s,Fe,t+2,G)),ie(s,o,l+1),Q(s,r)},lr=function(e,t){var r=e.fs,a=new at;Mt(r,a,1),Oe.luaX_next(e);var n=dt(e);switch(e.t.token){case 61:!function(e,t,r){var a=e.fs,n=a.freereg;Tt(e,"(for index)"),Tt(e,"(for limit)"),Tt(e,"(for step)"),bt(e,t),pt(e,61),sr(e),pt(e,44),sr(e),_t(e,44)?sr(e):(H(a,a.freereg,ne(a,1)),pe(a,1)),or(e,n,r,1,1)}(e,n,t);break;case 44:case et.TK_IN:!function(e,t){var r=e.fs,a=new ut,n=4,u=r.freereg;for(Tt(e,"(for generator)"),Tt(e,"(for state)"),Tt(e,"(for control)"),bt(e,t);_t(e,44);)bt(e,dt(e)),n++;pt(e,et.TK_IN);var s=e.linenumber;Ut(e,3,Yt(e,a),a),B(r,3),or(e,u,s,n-3,0)}(e,n);break;default:Oe.luaX_syntaxerror(e,o("'=' or 'in' expected",!0))}ht(e,et.TK_END,et.TK_FOR,t),Dt(r)},ir=function(e,t){var r=new at,a=e.fs,n=new ut,u=void 0;if(Oe.luaX_next(e),$t(e,n),pt(e,et.TK_THEN),e.t.token===et.TK_GOTO||e.t.token===et.TK_BREAK){for(ee(e.fs,n),Mt(a,r,!1),nr(e,n.t);_t(e,59););if(Gt(e,0))return Dt(a),t;u=ue(a)}else te(e.fs,n),Mt(a,r,!1),u=n.f;return Vt(e),Dt(a),e.t.token!==et.TK_ELSE&&e.t.token!==et.TK_ELSEIF||(t=X(a,t,ue(a))),ce(a,u),t},cr=function(e,t){var r=new ut,a=new ut;Oe.luaX_next(e);var n=function(e,t){var r=0;for(mt(e,t);46===e.t.token;)Bt(e,t);return 58===e.t.token&&(r=1,Bt(e,t)),r}(e,r);qt(e,a,n,t),be(e.fs,r,a),Q(e.fs,t)},_r=function(e){var t=e.linenumber;switch(Rt(e),e.t.token){case 59:Oe.luaX_next(e);break;case et.TK_IF:!function(e,t){var r=e.fs,a=G;for(a=ir(e,a);e.t.token===et.TK_ELSEIF;)a=ir(e,a);_t(e,et.TK_ELSE)&&er(e),ht(e,et.TK_END,et.TK_IF,t),ce(r,a)}(e,t);break;case et.TK_WHILE:!function(e,t){var r=e.fs,a=new at;Oe.luaX_next(e);var n=$(r),u=ar(e);Mt(r,a,1),pt(e,et.TK_DO),er(e),se(r,n),ht(e,et.TK_END,et.TK_WHILE,t),Dt(r),ce(r,u)}(e,t);break;case et.TK_DO:Oe.luaX_next(e),er(e),ht(e,et.TK_END,et.TK_DO,t);break;case et.TK_FOR:lr(e,t);break;case et.TK_REPEAT:!function(e,t){var r=e.fs,a=$(r),n=new at,u=new at;Mt(r,n,1),Mt(r,u,0),Oe.luaX_next(e),Vt(e),ht(e,et.TK_UNTIL,et.TK_REPEAT,t);var s=ar(e);u.upval&&le(r,s,u.nactvar),Dt(r),ie(r,s,a),Dt(r)}(e,t);break;case et.TK_FUNCTION:cr(e,t);break;case et.TK_LOCAL:Oe.luaX_next(e),_t(e,et.TK_FUNCTION)?function(e){var t=new ut,r=e.fs;bt(e,dt(e)),kt(e,1),qt(e,t,0,e.linenumber),xt(r,t.u.info).startpc=r.pc}(e):function(e){var t=0,r=void 0,a=new ut;do{bt(e,dt(e)),t++}while(_t(e,44));_t(e,61)?r=Yt(e,a):(a.k=nt.VVOID,r=0),Ut(e,t,r,a),kt(e,t)}(e);break;case et.TK_DBCOLON:Oe.luaX_next(e),ur(e,dt(e),t);break;case et.TK_RETURN:Oe.luaX_next(e),function(e){var t=e.fs,r=new ut,a=void 0,n=void 0;Gt(e,1)||59===e.t.token?a=n=0:(n=Yt(e,r),tt(r.k)?(Le(t,r),r.k===nt.VCALL&&1===n&&(qe(V(t,r),Be),Re(V(t,r).A===t.nactvar)),a=t.nactvar,n=s):1===n?a=Y(t,r):(Z(t,r),a=t.nactvar,Re(n===t.freereg-a))),ve(t,a,n),_t(e,59)}(e);break;case et.TK_BREAK:case et.TK_GOTO:nr(e,ue(e.fs));break;default:!function(e){var t=e.fs,r=new tr;Zt(e,r.v),61===e.t.token||44===e.t.token?(r.prev=null,rr(e,r,1)):(vt(e,r.v.k===nt.VCALL,o("syntax error",!0)),ze(V(t,r.v),1))}(e)}Re(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,Nt(e)};e.exports.Dyndata=function e(){n(this,e),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new ot,this.label=new ot},e.exports.expkind=nt,e.exports.expdesc=ut,e.exports.luaY_parser=function(e,t,r,a,n,u){var s,o,l,i,c=new Oe.LexState,_=new st,f=ke.luaF_newLclosure(e,1);return xe.luaD_inctop(e),e.stack[e.top-1].setclLvalue(f),c.h=Qe.luaH_new(e),xe.luaD_inctop(e),e.stack[e.top-1].sethvalue(c.h),_.f=f.p=new $e(e),_.f.source=Ze(e,n),c.buff=r,c.dyd=a,a.actvar.n=a.gt.n=a.label.n=0,Oe.luaX_setinput(e,c,t,_.f.source,u),s=c,o=_,l=new at,i=new ut,Pt(s,o,l),o.f.is_vararg=!0,Lt(i,nt.VLOCAL,0),Ot(o,s.envn,i),Oe.luaX_next(s),Vt(s),ft(s,et.TK_EOS),Ct(s),Re(!_.prev&&1===_.nups&&!c.fs),Re(0===a.actvar.n&&0===a.gt.n&&0===a.label.n),delete e.stack[--e.top],f},e.exports.vkisinreg=function(e){return e===nt.VNONRELOC||e===nt.VLOCAL}},function(e,t,r){"use strict";var a=(0,r(0).luastring_of)(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e.exports.lisdigit=function(e){return 0!=(2&a[e+1])},e.exports.lislalnum=function(e){return 0!=(3&a[e+1])},e.exports.lislalpha=function(e){return 0!=(1&a[e+1])},e.exports.lisprint=function(e){return 0!=(4&a[e+1])},e.exports.lisspace=function(e){return 0!=(8&a[e+1])},e.exports.lisxdigit=function(e){return 0!=(16&a[e+1])}},function(module,exports,__webpack_require__){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_require=__webpack_require__(20),lua=_require.lua,lauxlib=_require.lauxlib,lualib=_require.lualib,to_luastring=_require.to_luastring,LUA_MULTRET=lua.LUA_MULTRET,LUA_OK=lua.LUA_OK,LUA_REGISTRYINDEX=lua.LUA_REGISTRYINDEX,LUA_RIDX_MAINTHREAD=lua.LUA_RIDX_MAINTHREAD,LUA_TBOOLEAN=lua.LUA_TBOOLEAN,LUA_TFUNCTION=lua.LUA_TFUNCTION,LUA_TLIGHTUSERDATA=lua.LUA_TLIGHTUSERDATA,LUA_TNIL=lua.LUA_TNIL,LUA_TNONE=lua.LUA_TNONE,LUA_TNUMBER=lua.LUA_TNUMBER,LUA_TSTRING=lua.LUA_TSTRING,LUA_TTABLE=lua.LUA_TTABLE,LUA_TTHREAD=lua.LUA_TTHREAD,LUA_TUSERDATA=lua.LUA_TUSERDATA,lua_atnativeerror=lua.lua_atnativeerror,lua_call=lua.lua_call,lua_getfield=lua.lua_getfield,lua_gettable=lua.lua_gettable,lua_gettop=lua.lua_gettop,lua_isnil=lua.lua_isnil,lua_isproxy=lua.lua_isproxy,lua_newuserdata=lua.lua_newuserdata,lua_pcall=lua.lua_pcall,lua_pop=lua.lua_pop,lua_pushboolean=lua.lua_pushboolean,lua_pushcfunction=lua.lua_pushcfunction,lua_pushinteger=lua.lua_pushinteger,lua_pushlightuserdata=lua.lua_pushlightuserdata,lua_pushliteral=lua.lua_pushliteral,lua_pushnil=lua.lua_pushnil,lua_pushnumber=lua.lua_pushnumber,lua_pushstring=lua.lua_pushstring,lua_pushvalue=lua.lua_pushvalue,lua_rawgeti=lua.lua_rawgeti,lua_rawgetp=lua.lua_rawgetp,lua_rawsetp=lua.lua_rawsetp,lua_rotate=lua.lua_rotate,lua_setfield=lua.lua_setfield,lua_settable=lua.lua_settable,lua_settop=lua.lua_settop,lua_toboolean=lua.lua_toboolean,lua_tojsstring=lua.lua_tojsstring,lua_tonumber=lua.lua_tonumber,lua_toproxy=lua.lua_toproxy,lua_tothread=lua.lua_tothread,lua_touserdata=lua.lua_touserdata,lua_type=lua.lua_type,luaL_argerror=lauxlib.luaL_argerror,luaL_checkany=lauxlib.luaL_checkany,luaL_checkoption=lauxlib.luaL_checkoption,luaL_checkstack=lauxlib.luaL_checkstack,luaL_checkudata=lauxlib.luaL_checkudata,luaL_error=lauxlib.luaL_error,luaL_getmetafield=lauxlib.luaL_getmetafield,luaL_newlib=lauxlib.luaL_newlib,luaL_newmetatable=lauxlib.luaL_newmetatable,luaL_requiref=lauxlib.luaL_requiref,luaL_setfuncs=lauxlib.luaL_setfuncs,luaL_setmetatable=lauxlib.luaL_setmetatable,luaL_testudata=lauxlib.luaL_testudata,luaL_tolstring=lauxlib.luaL_tolstring,luaopen_base=lualib.luaopen_base,FENGARI_INTEROP_VERSION_MAJOR="0",FENGARI_INTEROP_VERSION_MINOR="1",FENGARI_INTEROP_VERSION_NUM=1,FENGARI_INTEROP_VERSION_RELEASE="0",FENGARI_INTEROP_VERSION=FENGARI_INTEROP_VERSION_MAJOR+"."+FENGARI_INTEROP_VERSION_MINOR,FENGARI_INTEROP_RELEASE=FENGARI_INTEROP_VERSION+"."+FENGARI_INTEROP_VERSION_RELEASE,custom_inspect_symbol=void 0;var global_env=function(){return"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:eval("this")}(),apply=void 0,construct=void 0,Reflect_deleteProperty=void 0;if("undefined"!=typeof Reflect)apply=Reflect.apply,construct=Reflect.construct,Reflect_deleteProperty=Reflect.deleteProperty;else{var fApply=Function.apply,bind=Function.bind;apply=function(e,t,r){return fApply.call(e,t,r)},construct=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(bind.apply(e,r))},Reflect_deleteProperty=Function("t","k","delete t[k]")}var toString=String.prototype.concat.bind(""),isobject=function(e){return"object"===(void 0===e?"undefined":_typeof(e))?null!==e:"function"==typeof e},js_tname=to_luastring("js object"),js_library_not_loaded="js library not loaded into lua_State",testjs=function(e,t){var r=luaL_testudata(e,t,js_tname);return r?r.data:void 0},checkjs=function(e,t){return luaL_checkudata(e,t,js_tname).data},pushjs=function(e,t){lua_newuserdata(e).data=t,luaL_setmetatable(e,js_tname)},getmainthread=function(e){lua_rawgeti(e,LUA_REGISTRYINDEX,LUA_RIDX_MAINTHREAD);var t=lua_tothread(e,-1);return lua_pop(e,1),t},states=new WeakMap,push=function(e,t){switch(void 0===t?"undefined":_typeof(t)){case"undefined":lua_pushnil(e);break;case"number":lua_pushnumber(e,t);break;case"string":lua_pushstring(e,to_luastring(t));break;case"boolean":lua_pushboolean(e,t);break;case"symbol":lua_pushlightuserdata(e,t);break;case"function":if(lua_isproxy(t,e)){t(e);break}case"object":if(null===t){if(lua_rawgetp(e,LUA_REGISTRYINDEX,null)!==LUA_TUSERDATA)throw Error(js_library_not_loaded);break}default:var r=states.get(getmainthread(e));if(!r)throw Error(js_library_not_loaded);var a=r.get(t);a?a(e):(pushjs(e,t),a=lua_toproxy(e,-1),r.set(t,a))}},atnativeerror=function(e){var t=lua_touserdata(e,1);return push(e,t),1},tojs=function(e,t){switch(lua_type(e,t)){case LUA_TNONE:case LUA_TNIL:return;case LUA_TBOOLEAN:return lua_toboolean(e,t);case LUA_TLIGHTUSERDATA:return lua_touserdata(e,t);case LUA_TNUMBER:return lua_tonumber(e,t);case LUA_TSTRING:return lua_tojsstring(e,t);case LUA_TUSERDATA:var r=testjs(e,t);if(void 0!==r)return r;case LUA_TTABLE:case LUA_TFUNCTION:case LUA_TTHREAD:default:return wrap(e,lua_toproxy(e,t))}},jscall=function(e,t){var r=lua_pcall(e,t,1,0),a=tojs(e,-1);switch(lua_pop(e,1),r){case LUA_OK:return a;default:throw a}},invoke=function(e,t,r,a,n){if(!isobject(a))throw new TypeError("`args` argument must be an object");var u=+a.length;u>=0||(u=0),luaL_checkstack(e,2+u,null);var s=lua_gettop(e);t(e),push(e,r);for(var o=0;o<u;o++)push(e,a[o]);switch(lua_pcall(e,1+u,n,0)){case LUA_OK:for(var l=lua_gettop(e)-s,i=new Array(l),c=0;c<l;c++)i[c]=tojs(e,s+c+1);return lua_settop(e,s),i;default:var _=tojs(e,-1);throw lua_settop(e,s),_}},gettable=function(e){return lua_gettable(e,1),1},_get=function(e,t,r){return luaL_checkstack(e,3,null),lua_pushcfunction(e,gettable),t(e),push(e,r),jscall(e,2)},_has=function(e,t,r){switch(luaL_checkstack(e,3,null),lua_pushcfunction(e,gettable),t(e),push(e,r),lua_pcall(e,2,1,0)){case LUA_OK:var a=lua_isnil(e,-1);return lua_pop(e,1),!a;default:var n=tojs(e,-1);throw lua_pop(e,1),n}},_set=function(e,t,r,a){switch(luaL_checkstack(e,4,null),lua_pushcfunction(e,function(e){return lua_settable(e,1),0}),t(e),push(e,r),push(e,a),lua_pcall(e,3,0,0)){case LUA_OK:return;default:var n=tojs(e,-1);throw lua_pop(e,1),n}},_deleteProperty=function(e,t,r){switch(luaL_checkstack(e,4,null),lua_pushcfunction(e,function(e){return lua_settable(e,1),0}),t(e),push(e,r),lua_pushnil(e),lua_pcall(e,3,0,0)){case LUA_OK:return;default:var a=tojs(e,-1);throw lua_pop(e,1),a}},tostring=function(e,t){return luaL_checkstack(e,2,null),lua_pushcfunction(e,function(e){return luaL_tolstring(e,1),1}),t(e),jscall(e,1)},iter_next=function(){var e=this.L;luaL_checkstack(e,3,null);var t=lua_gettop(e);switch(this.iter(e),this.state(e),this.last(e),lua_pcall(e,2,LUA_MULTRET,0)){case LUA_OK:this.last=lua_toproxy(e,t+1);var r=void 0;if(lua_isnil(e,-1))r={done:!0,value:void 0};else{for(var a=lua_gettop(e)-t,n=new Array(a),u=0;u<a;u++)n[u]=tojs(e,t+u+1);r={done:!1,value:n}}return lua_settop(e,t),r;default:var s=tojs(e,-1);throw lua_pop(e,1),s}},jsiterator=function(e,t){switch(luaL_checkstack(e,1,null),lua_pushcfunction(e,function(e){return luaL_requiref(e,to_luastring("_G"),luaopen_base,0),lua_getfield(e,-1,to_luastring("pairs")),t(e),lua_call(e,1,3),3}),lua_pcall(e,0,3,0)){case LUA_OK:var r=lua_toproxy(e,-3),a=lua_toproxy(e,-2),n=lua_toproxy(e,-1);return lua_pop(e,3),{L:e,iter:r,state:a,last:n,next:iter_next};default:var u=tojs(e,-1);throw lua_pop(e,1),u}},wrap=function(e,t){var r=getmainthread(e),a=function(){return invoke(r,t,this,arguments,1)[0]};a.apply=function(e,a){return invoke(r,t,e,a,1)[0]},a.invoke=function(e,a){return invoke(r,t,e,a,LUA_MULTRET)},a.get=function(e){return _get(r,t,e)},a.has=function(e){return _has(r,t,e)},a.set=function(e,a){return _set(r,t,e,a)},a.delete=function(e){return _deleteProperty(r,t,e)},a.toString=function(){return tostring(r,t)},"function"==typeof Symbol&&(a[Symbol.toStringTag]="Fengari object",a[Symbol.iterator]=function(){return jsiterator(r,t)},Symbol.toPrimitive&&(a[Symbol.toPrimitive]=function(e){if("string"===e)return tostring(r,t)})),custom_inspect_symbol&&(a[custom_inspect_symbol]=a.toString);var n=states.get(r);if(!n)throw Error(js_library_not_loaded);return n.set(a,t),a},jslib={new:function(e){for(var t=tojs(e,1),r=lua_gettop(e)-1,a=new Array(r),n=0;n<r;n++)a[n]=tojs(e,n+2);return push(e,construct(t,a)),1},tonumber:function(e){var t=tojs(e,1);return lua_pushnumber(e,+t),1},tostring:function(e){var t=tojs(e,1);return lua_pushliteral(e,toString(t)),1},instanceof:function(e){var t=tojs(e,1),r=tojs(e,2);return lua_pushboolean(e,t instanceof r),1},typeof:function e(t){var r=tojs(t,1);return lua_pushliteral(t,void 0===r?"undefined":e(r)),1}};if("function"==typeof Symbol&&Symbol.iterator){var get_iterator=function(e,t){var r=checkjs(e,t),a=r[Symbol.iterator];a||luaL_argerror(e,t,to_luastring("object not iterable"));var n=apply(a,r,[]);return isobject(n)||luaL_argerror(e,t,to_luastring("Result of the Symbol.iterator method is not an object")),n},next=function(e){var t=tojs(e,1).next();return t.done?0:(push(e,t.value),1)};jslib.of=function(e){var t=get_iterator(e,1);return lua_pushcfunction(e,next),push(e,t),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){var L_symbol=Symbol("lua_State"),p_symbol=Symbol("fengari-proxy"),proxy_handlers={apply:function(e,t,r){return invoke(e[L_symbol],e[p_symbol],t,r,1)[0]},construct:function(e,t){var r=e[L_symbol],a=e[p_symbol],n=t.length;luaL_checkstack(r,2+n,null),a(r);var u=lua_gettop(r);if(luaL_getmetafield(r,u,to_luastring("construct"))===LUA_TNIL)throw lua_pop(r,1),new TypeError("not a constructor");lua_rotate(r,u,1);for(var s=0;s<n;s++)push(r,t[s]);return jscall(r,1+n)},defineProperty:function(e,t,r){var a=e[L_symbol],n=e[p_symbol];return luaL_checkstack(a,4,null),n(a),luaL_getmetafield(a,-1,to_luastring("defineProperty"))===LUA_TNIL?(lua_pop(a,1),!1):(lua_rotate(a,-2,1),push(a,t),push(a,r),jscall(a,3))},deleteProperty:function(e,t){return _deleteProperty(e[L_symbol],e[p_symbol],t)},get:function(e,t){return _get(e[L_symbol],e[p_symbol],t)},getOwnPropertyDescriptor:function(e,t){var r=e[L_symbol],a=e[p_symbol];if(luaL_checkstack(r,3,null),a(r),luaL_getmetafield(r,-1,to_luastring("getOwnPropertyDescriptor"))!==LUA_TNIL)return lua_rotate(r,-2,1),push(r,t),jscall(r,2);lua_pop(r,1)},getPrototypeOf:function(e){var t=e[L_symbol],r=e[p_symbol];return luaL_checkstack(t,2,null),r(t),luaL_getmetafield(t,-1,to_luastring("getPrototypeOf"))===LUA_TNIL?(lua_pop(t,1),null):(lua_rotate(t,-2,1),jscall(t,1))},has:function(e,t){return _has(e[L_symbol],e[p_symbol],t)},ownKeys:function(e){var t=e[L_symbol],r=e[p_symbol];if(luaL_checkstack(t,2,null),r(t),luaL_getmetafield(t,-1,to_luastring("ownKeys"))===LUA_TNIL)throw lua_pop(t,1),Error("ownKeys unknown for fengari object");return lua_rotate(t,-2,1),jscall(t,1)},set:function(e,t,r){return _set(e[L_symbol],e[p_symbol],t,r),!0},setPrototypeOf:function(e,t){var r=e[L_symbol],a=e[p_symbol];return luaL_checkstack(r,3,null),a(r),luaL_getmetafield(r,-1,to_luastring("setPrototypeOf"))===LUA_TNIL?(lua_pop(r,1),!1):(lua_rotate(r,-2,1),push(r,t),jscall(r,2))}},raw_function=function(){var e=function(){};return delete e.length,delete e.name,e},make_arrow_function=Function("return ()=>void 0;"),raw_arrow_function=function(){var e=make_arrow_function();return delete e.length,delete e.name,e},createproxy=function(e,t,r){var a=getmainthread(e),n=void 0;switch(r){case"function":n=raw_function();break;case"arrow_function":n=raw_arrow_function();break;case"object":n={};break;default:throw TypeError("invalid type to createproxy")}return n[p_symbol]=t,n[L_symbol]=a,new Proxy(n,proxy_handlers)},valid_types=["function","arrow_function","object"],valid_types_as_luastring=valid_types.map(function(e){return to_luastring(e)});jslib.createproxy=function(e){luaL_checkany(e,1);var t=valid_types[luaL_checkoption(e,2,valid_types_as_luastring[0],valid_types_as_luastring)],r=createproxy(e,lua_toproxy(e,1),t);return push(e,r),1}}var jsmt={__index:function(e){var t=checkjs(e,1),r=tojs(e,2);return push(e,t[r]),1},__newindex:function(e){var t=checkjs(e,1),r=tojs(e,2),a=tojs(e,3);return void 0===a?Reflect_deleteProperty(t,r):t[r]=a,0},__tostring:function(e){var t=checkjs(e,1),r=toString(t);return lua_pushstring(e,to_luastring(r)),1},__call:function(e){var t=checkjs(e,1),r=lua_gettop(e)-1,a=void 0,n=new Array(Math.max(0,r-1));if(r>0&&(a=tojs(e,2),r-- >0))for(var u=0;u<r;u++)n[u]=tojs(e,u+3);return push(e,apply(t,a,n)),1},__pairs:function(e){var t=checkjs(e,1),r=void 0;"function"==typeof Symbol&&void 0!==(r=t[Symbol.for("__pairs")])||luaL_argerror(e,1,to_luastring("js object has no __pairs Symbol"));var a=apply(r,t,[]);void 0===a&&luaL_error(e,to_luastring("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)"));var n=a.iter;return void 0===n&&luaL_error(e,to_luastring("bad '__pairs' result (object.iter is missing)")),lua_pushcfunction(e,function(){var t=tojs(e,1),r=tojs(e,2),a=n.call(t,r);if(void 0===a)return 0;Array.isArray(a)||luaL_error(e,to_luastring("bad iterator result (Array or undefined expected)")),luaL_checkstack(e,a.length,null);for(var u=0;u<a.length;u++)push(e,a[u]);return a.length}),push(e,a.state),push(e,a.first),3},__len:function(e){var t=checkjs(e,1),r=void 0;"function"==typeof Symbol&&void 0!==(r=t[Symbol.for("__len")])||luaL_argerror(e,1,to_luastring("js object has no __len Symbol"));var a=apply(r,t,[]);return push(e,a),1}};if("function"==typeof Symbol){Object.prototype[Symbol.for("__pairs")]=function(){return{iter:function(e){if(!(this.index>=this.keys.length)){var t=this.keys[this.index++];return[t,this.object[t]]}},state:{object:this,keys:Object.keys(this),index:0}}};var arraylikes=[Array,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];"undefined"!=typeof NodeList&&arraylikes.push(NodeList),"undefined"!=typeof DOMTokenList&&arraylikes.push(DOMTokenList);var __len=function(){return this.length};arraylikes.forEach(function(e){e.prototype[Symbol.for("__len")]=__len})}var luaopen_js=function(e){return states.set(getmainthread(e),new WeakMap),lua_atnativeerror(e,atnativeerror),luaL_newlib(e,jslib),lua_pushliteral(e,FENGARI_INTEROP_VERSION),lua_setfield(e,-2,to_luastring("_VERSION")),lua_pushinteger(e,FENGARI_INTEROP_VERSION_NUM),lua_setfield(e,-2,to_luastring("_VERSION_NUM")),lua_pushliteral(e,FENGARI_INTEROP_RELEASE),lua_setfield(e,-2,to_luastring("_RELEASE")),luaL_newmetatable(e,js_tname),luaL_setfuncs(e,jsmt,0),lua_pop(e,1),pushjs(e,null),lua_pushvalue(e,-1),lua_rawsetp(e,LUA_REGISTRYINDEX,null),lua_setfield(e,-2,to_luastring("null")),push(e,global_env),lua_setfield(e,-2,to_luastring("global")),1};module.exports.FENGARI_INTEROP_VERSION=FENGARI_INTEROP_VERSION,module.exports.FENGARI_INTEROP_VERSION_NUM=FENGARI_INTEROP_VERSION_NUM,module.exports.FENGARI_INTEROP_RELEASE=FENGARI_INTEROP_RELEASE,module.exports.checkjs=checkjs,module.exports.testjs=testjs,module.exports.pushjs=pushjs,module.exports.push=push,module.exports.tojs=tojs,module.exports.luaopen_js=luaopen_js},function(e,t,r){"use strict";var a=r(1),n=a.LUA_MULTRET,u=a.LUA_OK,s=a.LUA_TFUNCTION,o=a.LUA_TNIL,l=a.LUA_TNONE,i=a.LUA_TNUMBER,c=a.LUA_TSTRING,_=a.LUA_TTABLE,f=a.LUA_VERSION,p=a.LUA_YIELD,v=a.lua_call,h=a.lua_callk,d=a.lua_concat,L=a.lua_error,A=a.lua_getglobal,g=a.lua_geti,b=a.lua_getmetatable,T=a.lua_gettop,x=a.lua_insert,k=a.lua_isnil,O=a.lua_isnone,E=a.lua_isstring,m=a.lua_load,U=a.lua_next,R=a.lua_pcallk,N=a.lua_pop,y=a.lua_pushboolean,S=a.lua_pushcfunction,I=a.lua_pushglobaltable,w=a.lua_pushinteger,M=a.lua_pushliteral,P=a.lua_pushnil,D=a.lua_pushstring,C=a.lua_pushvalue,G=a.lua_rawequal,V=a.lua_rawget,B=a.lua_rawlen,K=a.lua_rawset,F=a.lua_remove,j=a.lua_replace,H=a.lua_rotate,X=a.lua_setfield,z=a.lua_setmetatable,q=a.lua_settop,Y=a.lua_setupvalue,J=a.lua_stringtonumber,Z=a.lua_toboolean,W=a.lua_tolstring,Q=a.lua_tostring,$=a.lua_type,ee=a.lua_typename,te=r(4),re=te.luaL_argcheck,ae=te.luaL_checkany,ne=te.luaL_checkinteger,ue=te.luaL_checkoption,se=te.luaL_checkstack,oe=te.luaL_checktype,le=te.luaL_error,ie=te.luaL_getmetafield,ce=te.luaL_loadbufferx,_e=te.luaL_loadfile,fe=te.luaL_loadfilex,pe=te.luaL_optinteger,ve=te.luaL_optstring,he=te.luaL_setfuncs,de=te.luaL_tolstring,Le=te.luaL_where,Ae=r(6),ge=Ae.to_jsstring,be=Ae.to_luastring,Te=void 0,xe=void 0;if("function"==typeof TextDecoder){var ke="",Oe=new TextDecoder("utf-8");Te=function(e){ke+=Oe.decode(e,{stream:!0})};var Ee=new Uint8Array(0);xe=function(){ke+=Oe.decode(Ee),console.log(ke),ke=""}}else{var me=[];Te=function(e){try{e=ge(e)}catch(r){var t=new Uint8Array(e.length);t.set(e),e=t}me.push(e)},xe=function(){console.log.apply(console.log,me),me=[]}}var Ue=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(function(e){return be(e)}),Re=function(e){return oe(e,1,_),q(e,2),U(e,1)?2:(P(e),1)},Ne=function(e){var t=ne(e,2)+1;return w(e,t),g(e,1,t)===o?1:2},ye=function(e){var t=pe(e,2,1);return q(e,1),$(e,1)===c&&t>0&&(Le(e,t),C(e,1),d(e,2)),L(e)},Se=function(e,t,r){return t!==u&&t!==p?(y(e,0),C(e,-2),2):T(e)-r},Ie=function(e,t,r){return t===u?(0!==r&&(C(e,r),Y(e,-2,1)||N(e,1)),1):(P(e),x(e,-2),2)},we=function(e,t){return se(e,2,be("too many nested functions",!0)),C(e,1),v(e,0,1),k(e,-1)?(N(e,1),null):(E(e,-1)||le(e,be("reader function must return a string",!0)),j(e,5),Q(e,5))},Me=function(e,t,r){return T(e)-1},Pe={assert:function(e){return Z(e,1)?T(e):(ae(e,1),F(e,1),M(e,"assertion failed!"),q(e,1),ye(e))},collectgarbage:function(e){ue(e,1,"collect",Ue),pe(e,2,0),le(e,be("lua_gc not implemented"))},dofile:function(e){var t=ve(e,1,null);return q(e,1),_e(e,t)!==u?L(e):(h(e,0,n,0,Me),Me(e))},error:ye,getmetatable:function(e){return ae(e,1),b(e,1)?(ie(e,1,be("__metatable",!0)),1):(P(e),1)},ipairs:function(e){return ae(e,1),S(e,Ne),C(e,1),w(e,0),3},load:function(e){var t=Q(e,1),r=ve(e,3,"bt"),a=O(e,4)?0:4,n=void 0;if(null!==t){var u=ve(e,2,t);n=ce(e,t,t.length,u,r)}else{var o=ve(e,2,"=(load)");oe(e,1,s),q(e,5),n=m(e,we,null,o,r)}return Ie(e,n,a)},loadfile:function(e){var t=ve(e,1,null),r=ve(e,2,null),a=O(e,3)?0:3,n=fe(e,t,r);return Ie(e,n,a)},next:Re,pairs:function(e){return function(e,t,r,a){return ae(e,1),ie(e,1,t)===o?(S(e,a),C(e,1),r?w(e,0):P(e)):(C(e,1),v(e,1,3)),3}(e,be("__pairs",!0),0,Re)},pcall:function(e){ae(e,1),y(e,1),x(e,1);var t=R(e,T(e)-2,n,0,0,Se);return Se(e,t,0)},print:function(e){var t=T(e);A(e,be("tostring",!0));for(var r=1;r<=t;r++){C(e,-1),C(e,r),v(e,1,1);var a=W(e,-1);if(null===a)return le(e,be("'tostring' must return a string to 'print'"));r>1&&Te(be("\t")),Te(a),N(e,1)}return xe(),0},rawequal:function(e){return ae(e,1),ae(e,2),y(e,G(e,1,2)),1},rawget:function(e){return oe(e,1,_),ae(e,2),q(e,2),V(e,1),1},rawlen:function(e){var t=$(e,1);return re(e,t===_||t===c,1,"table or string expected"),w(e,B(e,1)),1},rawset:function(e){return oe(e,1,_),ae(e,2),ae(e,3),q(e,3),K(e,1),1},select:function(e){var t=T(e);if($(e,1)===c&&35===Q(e,1)[0])return w(e,t-1),1;var r=ne(e,1);return r<0?r=t+r:r>t&&(r=t),re(e,1<=r,1,"index out of range"),t-r},setmetatable:function(e){var t=$(e,2);return oe(e,1,_),re(e,t===o||t===_,2,"nil or table expected"),ie(e,1,be("__metatable",!0))!==o?le(e,be("cannot change a protected metatable")):(q(e,2),z(e,1),1)},tonumber:function(e){if($(e,2)<=0){if(ae(e,1),$(e,1)===i)return q(e,1),1;var t=Q(e,1);if(null!==t&&J(e,t)===t.length+1)return 1}else{var r=ne(e,2);oe(e,1,c);var a=Q(e,1);re(e,2<=r&&r<=36,2,"base out of range");var n=function(e,t){try{e=ge(e)}catch(e){return null}var r=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(e);if(!r)return null;var a=parseInt(r[1]+r[2],t);return isNaN(a)?null:0|a}(a,r);if(null!==n)return w(e,n),1}return P(e),1},tostring:function(e){return ae(e,1),de(e,1),1},type:function(e){var t=$(e,1);return re(e,t!==l,1,"value expected"),D(e,ee(e,t)),1},xpcall:function(e){var t=T(e);oe(e,2,s),y(e,1),C(e,1),H(e,3,2);var r=R(e,t-2,n,2,2,Se);return Se(e,r,2)}};e.exports.luaopen_base=function(e){return I(e),he(e,Pe,0),C(e,-1),X(e,-2,be("_G")),M(e,f),X(e,-2,be("_VERSION")),1}},function(e,t,r){"use strict";var a=r(1).lua_pop,n=r(4).luaL_requiref,u=r(6).to_luastring,s={};e.exports.luaL_openlibs=function(e){for(var t in s)n(e,u(t),s[t],1),a(e,1)};var o=r(12),l=r(33).luaopen_base,i=r(29).luaopen_coroutine,c=r(23).luaopen_debug,_=r(24).luaopen_math,f=r(22).luaopen_package,p=r(27).luaopen_os,v=r(26).luaopen_string,h=r(28).luaopen_table,d=r(25).luaopen_utf8;s._G=l,s[o.LUA_LOADLIBNAME]=f,s[o.LUA_COLIBNAME]=i,s[o.LUA_TABLIBNAME]=h,s[o.LUA_OSLIBNAME]=p,s[o.LUA_STRLIBNAME]=v,s[o.LUA_MATHLIBNAME]=_,s[o.LUA_UTF8LIBNAME]=d,s[o.LUA_DBLIBNAME]=c;var L=r(21).luaopen_fengari;s[o.LUA_FENGARILIBNAME]=L},function(e,t,r){"use strict";var a;!function(){var n={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function u(e){return function(e,t){var r,a,s,o,l,i,c,_,f,p=1,v=e.length,h="";for(a=0;a<v;a++)if("string"==typeof e[a])h+=e[a];else if(Array.isArray(e[a])){if((o=e[a])[2])for(r=t[p],s=0;s<o[2].length;s++){if(!r.hasOwnProperty(o[2][s]))throw new Error(u('[sprintf] property "%s" does not exist',o[2][s]));r=r[o[2][s]]}else r=o[1]?t[o[1]]:t[p++];if(n.not_type.test(o[8])&&n.not_primitive.test(o[8])&&r instanceof Function&&(r=r()),n.numeric_arg.test(o[8])&&"number"!=typeof r&&isNaN(r))throw new TypeError(u("[sprintf] expecting number but found %T",r));switch(n.number.test(o[8])&&(_=r>=0),o[8]){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,o[6]?parseInt(o[6]):0);break;case"e":r=o[7]?parseFloat(r).toExponential(o[7]):parseFloat(r).toExponential();break;case"f":r=o[7]?parseFloat(r).toFixed(o[7]):parseFloat(r);break;case"g":r=o[7]?String(Number(r.toPrecision(o[7]))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=o[7]?r.substring(0,o[7]):r;break;case"t":r=String(!!r),r=o[7]?r.substring(0,o[7]):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=o[7]?r.substring(0,o[7]):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=o[7]?r.substring(0,o[7]):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}n.json.test(o[8])?h+=r:(!n.number.test(o[8])||_&&!o[3]?f="":(f=_?"+":"-",r=r.toString().replace(n.sign,"")),i=o[4]?"0"===o[4]?"0":o[4].charAt(1):" ",c=o[6]-(f+r).length,l=o[6]&&c>0?i.repeat(c):"",h+=o[5]?f+r+l:"0"===i?f+l+r:l+f+r)}return h}(function(e){if(o[e])return o[e];var t,r=e,a=[],u=0;for(;r;){if(null!==(t=n.text.exec(r)))a.push(t[0]);else if(null!==(t=n.modulo.exec(r)))a.push("%");else{if(null===(t=n.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){u|=1;var s=[],l=t[2],i=[];if(null===(i=n.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(i[1]);""!==(l=l.substring(i[0].length));)if(null!==(i=n.key_access.exec(l)))s.push(i[1]);else{if(null===(i=n.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(i[1])}t[2]=s}else u|=2;if(3===u)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push(t)}r=r.substring(t[0].length)}return o[e]=a}(e),arguments)}function s(e,t){return u.apply(null,[e].concat(t||[]))}var o=Object.create(null);t.sprintf=u,t.vsprintf=s,"undefined"!=typeof window&&(window.sprintf=u,window.vsprintf=s,void 0===(a=function(){return{sprintf:u,vsprintf:s}}.call(t,r,t,e))||(e.exports=a))}()},function(e,t,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var t={de_DE:{days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d.%m.%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},en_CA:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},en_US:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ordinalSuffixes:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},es_MX:{days:["domingo","lunes","martes","miÃ©rcoles","jueves","viernes","sÃ¡bado"],shortDays:["dom","lun","mar","miÃ©","jue","vie","sÃ¡b"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre"," diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},fr_FR:{days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fÃ©vrier","mars","avril","mai","juin","juillet","aoÃ»t","septembre","octobre","novembre","dÃ©cembre"],shortMonths:["janv.","fÃ©vr.","mars","avril","mai","juin","juil.","aoÃ»t","sept.","oct.","nov.","dÃ©c."],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},it_IT:{days:["domenica","lunedÃ¬","martedÃ¬","mercoledÃ¬","giovedÃ¬","venerdÃ¬","sabato"],shortDays:["dom","lun","mar","mer","gio","ven","sab"],months:["gennaio","febbraio","marzo","aprile","maggio","giugno","luglio","agosto","settembre","ottobre","novembre","dicembre"],shortMonths:["pr","mag","giu","lug","ago","set","ott","nov","dic"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},nl_NL:{days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},pt_BR:{days:["domingo","segunda","terÃ§a","quarta","quinta","sexta","sÃ¡bado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","SÃ¡b"],months:["janeiro","fevereiro","marÃ§o","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},ru_RU:{days:["ÐÐ¾ÑÐºÑÐµÑÐµÐ½ÑÐµ","ÐÐ¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº","ÐÑÐ¾ÑÐ½Ð¸Ðº","Ð¡ÑÐµÐ´Ð°","Ð§ÐµÑÐ²ÐµÑÐ³","ÐÑÑÐ½Ð¸ÑÐ°","Ð¡ÑÐ±Ð±Ð¾ÑÐ°"],shortDays:["ÐÑ","ÐÐ½","ÐÑ","Ð¡Ñ","Ð§Ñ","ÐÑ","Ð¡Ð±"],months:["Ð¯Ð½Ð²Ð°ÑÑ","Ð¤ÐµÐ²ÑÐ°Ð»Ñ","ÐÐ°ÑÑ","ÐÐ¿ÑÐµÐ»Ñ","ÐÐ°Ð¹","ÐÑÐ½Ñ","ÐÑÐ»Ñ","ÐÐ²Ð³ÑÑÑ","Ð¡ÐµÐ½ÑÑÐ±ÑÑ","ÐÐºÑÑÐ±ÑÑ","ÐÐ¾ÑÐ±ÑÑ","ÐÐµÐºÐ°Ð±ÑÑ"],shortMonths:["ÑÐ½Ð²","ÑÐµÐ²","Ð¼Ð°Ñ","Ð°Ð¿Ñ","Ð¼Ð°Ð¹","Ð¸ÑÐ½","Ð¸ÑÐ»","Ð°Ð²Ð³","ÑÐµÐ½","Ð¾ÐºÑ","Ð½Ð¾Ñ","Ð´ÐµÐº"],AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X",D:"%d.%m.%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},tr_TR:{days:["Pazar","Pazartesi","SalÄ±","ÃarÅamba","PerÅembe","Cuma","Cumartesi"],shortDays:["Paz","Pzt","Sal","ÃrÅ","PrÅ","Cum","Cts"],months:["Ocak","Åubat","Mart","Nisan","MayÄ±s","Haziran","Temmuz","AÄustos","EylÃ¼l","Ekim","KasÄ±m","AralÄ±k"],shortMonths:["Oca","Åub","Mar","Nis","May","Haz","Tem","AÄu","Eyl","Eki","Kas","Ara"],AM:"ÃÃ",PM:"ÃS",am:"ÃÃ",pm:"ÃS",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},zh_CN:{days:["æææ¥","ææä¸","ææäº","ææä¸","ææå","ææäº","ææå­"],shortDays:["æ¥","ä¸","äº","ä¸","å","äº","å­"],months:["ä¸æä»½","äºæä»½","ä¸æä»½","åæä»½","äºæä»½","å­æä»½","ä¸æä»½","å«æä»½","ä¹æä»½","åæä»½","åä¸æä»½","åäºæä»½"],shortMonths:["ä¸æ","äºæ","ä¸æ","åæ","äºæ","å­æ","ä¸æ","å«æ","ä¹æ","åæ","åä¸æ","åäºæ"],AM:"ä¸å",PM:"ä¸å",am:"ä¸å",pm:"ä¸å",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}}},r=t.en_US,n=new function e(n,f,p){var v,h=n||r,d=f||0,L=p||!1,A=0;var g=function(e,t){var r;if(t){if(r=t.getTime(),L){var a=c(t);if(c(t=new Date(r+a+d))!==a){var n=c(t);t=new Date(r+n+d)}}}else{var f=Date.now();f>A?(A=f,v=new Date(A),r=A,L&&(v=new Date(A+c(v)+d))):r=A,t=v}return function e(t,r,a,n){var c="",f=null,p=!1,v=t.length,h=!1;for(var A=0;A<v;A++){var g=t.charCodeAt(A);if(!0!==p)37!==g?c+=t[A]:p=!0;else{if(45===g){f="";continue}if(95===g){f=" ";continue}if(48===g){f="0";continue}if(58===g){h&&_("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),h=!0;continue}switch(g){case 37:c+="%";break;case 65:c+=a.days[r.getDay()];break;case 66:c+=a.months[r.getMonth()];break;case 67:c+=u(Math.floor(r.getFullYear()/100),f);break;case 68:c+=e(a.formats.D,r,a,n);break;case 70:c+=e(a.formats.F,r,a,n);break;case 72:c+=u(r.getHours(),f);break;case 73:c+=u(o(r.getHours()),f);break;case 76:c+=s(Math.floor(n%1e3));break;case 77:c+=u(r.getMinutes(),f);break;case 80:c+=r.getHours()<12?a.am:a.pm;break;case 82:c+=e(a.formats.R,r,a,n);break;case 83:c+=u(r.getSeconds(),f);break;case 84:c+=e(a.formats.T,r,a,n);break;case 85:c+=u(l(r,"sunday"),f);break;case 87:c+=u(l(r,"monday"),f);break;case 88:c+=e(a.formats.X,r,a,n);break;case 89:c+=r.getFullYear();break;case 90:if(L&&0===d)c+="GMT";else{var b=r.toString().match(/\(([\w\s]+)\)/);c+=b&&b[1]||""}break;case 97:c+=a.shortDays[r.getDay()];break;case 98:c+=a.shortMonths[r.getMonth()];break;case 99:c+=e(a.formats.c,r,a,n);break;case 100:c+=u(r.getDate(),f);break;case 101:c+=u(r.getDate(),null==f?" ":f);break;case 104:c+=a.shortMonths[r.getMonth()];break;case 106:var T=new Date(r.getFullYear(),0,1),x=Math.ceil((r.getTime()-T.getTime())/864e5);c+=s(x);break;case 107:c+=u(r.getHours(),null==f?" ":f);break;case 108:c+=u(o(r.getHours()),null==f?" ":f);break;case 109:c+=u(r.getMonth()+1,f);break;case 110:c+="\n";break;case 111:var x=r.getDate();a.ordinalSuffixes?c+=String(x)+(a.ordinalSuffixes[x-1]||i(x)):c+=String(x)+i(x);break;case 112:c+=r.getHours()<12?a.AM:a.PM;break;case 114:c+=e(a.formats.r,r,a,n);break;case 115:c+=Math.floor(n/1e3);break;case 116:c+="\t";break;case 117:var x=r.getDay();c+=0===x?7:x;break;case 118:c+=e(a.formats.v,r,a,n);break;case 119:c+=r.getDay();break;case 120:c+=e(a.formats.x,r,a,n);break;case 121:c+=(""+r.getFullYear()).slice(2);break;case 122:if(L&&0===d)c+=h?"+00:00":"+0000";else{var k,O=(k=0!==d?d/6e4:-r.getTimezoneOffset())<0?"-":"+",E=h?":":"",m=Math.floor(Math.abs(k/60)),U=Math.abs(k%60);c+=O+u(m)+E+u(U)}break;default:p&&(c+="%"),c+=t[A]}f=null,p=!1}}return c}(e,t,h,r)};g.localize=function(t){return new e(t||h,d,L)};g.localizeByIdentifier=function(e){var r=t[e];return r?g.localize(r):(_('[WARNING] No locale found with identifier "'+e+'".'),g)};g.timezone=function(t){var r=d,n=L,u=void 0===t?"undefined":a(t);if("number"===u||"string"===u)if(n=!0,"string"===u){var s="-"===t[0]?-1:1,o=parseInt(t.slice(1,3),10),l=parseInt(t.slice(3,5),10);r=s*(60*o+l)*60*1e3}else"number"===u&&(r=60*t*1e3);return new e(h,r,n)};g.utc=function(){return new e(h,d,!0)};return g}(r,0,!1);function u(e,t){return""===t||e>9?e:(null==t&&(t="0"),t+e)}function s(e){return e>99?e:e>9?"0"+e:"00"+e}function o(e){return 0===e?12:e>12?e-12:e}function l(e,t){t=t||"sunday";var r=e.getDay();"monday"===t&&(0===r?r=6:r--);var a=Date.UTC(e.getFullYear(),0,1),n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),u=(Math.floor((n-a)/864e5)+7-r)/7;return Math.floor(u)}function i(e){var t=e%10,r=e%100;if(r>=11&&r<=13||0===t||t>=4)return"th";switch(t){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function c(e){return 6e4*(e.getTimezoneOffset()||0)}function _(e){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e)}void 0!==e?e.exports=n:(function(){return this||(0,eval)("this")}()).strftime=n,"function"!=typeof Date.now&&(Date.now=function(){return+new Date})}()},function(e,t,r){"use strict";var a=r(0),n=a.LUA_SIGNATURE,u=a.LUA_VERSION_MAJOR,s=a.LUA_VERSION_MINOR,o=a.constant_types,l=o.LUA_TBOOLEAN,i=o.LUA_TLNGSTR,c=o.LUA_TNIL,_=o.LUA_TNUMFLT,f=o.LUA_TNUMINT,p=o.LUA_TSHRSTR,v=a.luastring_of,h=v(25,147,13,10,26,10),d=16*Number(u)+Number(s),L=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN},A=function(e,t,r){0===r.status&&t>0&&(r.status=r.writer(r.L,e,t,r.data))},g=function(e,t){A(v(e),1,t)},b=function(e,t){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,e,!0);var a=new Uint8Array(r);A(a,4,t)},T=function(e,t){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,e,!0);var a=new Uint8Array(r);A(a,4,t)},x=function(e,t){var r=new ArrayBuffer(8);new DataView(r).setFloat64(0,e,!0);var a=new Uint8Array(r);A(a,8,t)},k=function(e,t){if(null===e)g(0,t);else{var r=e.tsslen()+1,a=e.getstr();r<255?g(r,t):(g(255,t),T(r,t)),A(a,r-1,t)}},O=function(e,t){var r=e.p.length;b(r,t);for(var a=0;a<r;a++)E(e.p[a],e.source,t)},E=function(e,t,r){r.strip||e.source===t?k(null,r):k(e.source,r),b(e.linedefined,r),b(e.lastlinedefined,r),g(e.numparams,r),g(e.is_vararg?1:0,r),g(e.maxstacksize,r),function(e,t){var r=e.code.map(function(e){return e.code});b(r.length,t);for(var a=0;a<r.length;a++)b(r[a],t)}(e,r),function(e,t){var r=e.k.length;b(r,t);for(var a=0;a<r;a++){var n=e.k[a];switch(g(n.ttype(),t),n.ttype()){case c:break;case l:g(n.value?1:0,t);break;case _:x(n.value,t);break;case f:T(n.value,t);break;case p:case i:k(n.tsvalue(),t)}}}(e,r),function(e,t){var r=e.upvalues.length;b(r,t);for(var a=0;a<r;a++)g(e.upvalues[a].instack?1:0,t),g(e.upvalues[a].idx,t)}(e,r),O(e,r),function(e,t){var r=t.strip?0:e.lineinfo.length;b(r,t);for(var a=0;a<r;a++)b(e.lineinfo[a],t);r=t.strip?0:e.locvars.length,b(r,t);for(var n=0;n<r;n++)k(e.locvars[n].varname,t),b(e.locvars[n].startpc,t),b(e.locvars[n].endpc,t);r=t.strip?0:e.upvalues.length,b(r,t);for(var u=0;u<r;u++)k(e.upvalues[u].name,t)}(e,r)};e.exports.luaU_dump=function(e,t,r,a,u){var s=new L;return s.L=e,s.writer=r,s.data=a,s.strip=u,s.status=0,function(e){A(n,n.length,e),g(d,e),g(0,e),A(h,h.length,e),g(4,e),g(4,e),g(4,e),g(4,e),g(8,e),T(22136,e),x(370.5,e)}(s),g(t.upvalues.length,s),E(t,null,s),s.status}},function(e,t,r){"use strict";var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();var n=r(0),u=n.LUA_SIGNATURE,s=n.constant_types,o=s.LUA_TBOOLEAN,l=s.LUA_TLNGSTR,i=s.LUA_TNIL,c=s.LUA_TNUMFLT,_=s.LUA_TNUMINT,f=s.LUA_TSHRSTR,p=n.thread_status.LUA_ERRSYNTAX,v=n.is_luastring,h=n.luastring_eq,d=n.to_luastring,L=r(7),A=r(16),g=r(5),b=r(13),T=b.MAXARG_sBx,x=b.POS_A,k=b.POS_Ax,O=b.POS_B,E=b.POS_Bx,m=b.POS_C,U=b.POS_OP,R=b.SIZE_A,N=b.SIZE_Ax,y=b.SIZE_B,S=b.SIZE_Bx,I=b.SIZE_C,w=b.SIZE_OP,M=r(2).lua_assert,P=r(8).luaS_bless,D=r(17),C=D.luaZ_read,G=D.ZIO,V=[25,147,13,10,26,10],B=function(){function e(t,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,M(r instanceof G,"BytecodeParser only operates on a ZIO"),M(v(a)),64===a[0]||61===a[0]?this.name=a.subarray(1):a[0]==u[0]?this.name=d("binary string",!0):this.name=a,this.L=t,this.Z=r,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}return a(e,[{key:"read",value:function(e){var t=new Uint8Array(e);return 0!==C(this.Z,t,0,e)&&this.error("truncated"),t}},{key:"readByte",value:function(){return 0!==C(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}},{key:"readInteger",value:function(){return 0!==C(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readSize_t",value:function(){return this.readInteger()}},{key:"readInt",value:function(){return 0!==C(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"readNumber",value:function(){return 0!==C(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"readString",value:function(){var e=Math.max(this.readByte()-1,0);return e+1===255&&(e=this.readSize_t()-1),0===e?null:P(this.L,this.read(e))}},{key:"readInstruction",value:function(){return 0!==C(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated"),this.dv.getUint32(0,!0)}},{key:"readCode",value:function(t){for(var r=this.readInt(),a=e,n=0;n<r;n++){var u=this.readInstruction();t.code[n]={code:u,opcode:u>>U&a.MASK1(w,0),A:u>>x&a.MASK1(R,0),B:u>>O&a.MASK1(y,0),C:u>>m&a.MASK1(I,0),Bx:u>>E&a.MASK1(S,0),Ax:u>>k&a.MASK1(N,0),sBx:(u>>E&a.MASK1(S,0))-T}}}},{key:"readUpvalues",value:function(e){for(var t=this.readInt(),r=0;r<t;r++)e.upvalues[r]={name:null,instack:this.readByte(),idx:this.readByte()}}},{key:"readConstants",value:function(e){for(var t=this.readInt(),r=0;r<t;r++){var a=this.readByte();switch(a){case i:e.k.push(new g.TValue(i,null));break;case o:e.k.push(new g.TValue(o,0!==this.readByte()));break;case c:e.k.push(new g.TValue(c,this.readNumber()));break;case _:e.k.push(new g.TValue(_,this.readInteger()));break;case f:case l:e.k.push(new g.TValue(l,this.readString()));break;default:this.error("unrecognized constant '"+a+"'")}}}},{key:"readProtos",value:function(e){for(var t=this.readInt(),r=0;r<t;r++)e.p[r]=new A.Proto(this.L),this.readFunction(e.p[r],e.source)}},{key:"readDebug",value:function(e){for(var t=this.readInt(),r=0;r<t;r++)e.lineinfo[r]=this.readInt();t=this.readInt();for(var a=0;a<t;a++)e.locvars[a]={varname:this.readString(),startpc:this.readInt(),endpc:this.readInt()};t=this.readInt();for(var n=0;n<t;n++)e.upvalues[n].name=this.readString()}},{key:"readFunction",value:function(e,t){e.source=this.readString(),null===e.source&&(e.source=t),e.linedefined=this.readInt(),e.lastlinedefined=this.readInt(),e.numparams=this.readByte(),e.is_vararg=0!==this.readByte(),e.maxstacksize=this.readByte(),this.readCode(e),this.readConstants(e),this.readUpvalues(e),this.readProtos(e),this.readDebug(e)}},{key:"checkliteral",value:function(e,t){var r=this.read(e.length);h(r,e)||this.error(t)}},{key:"checkHeader",value:function(){this.checkliteral(u.subarray(1),"not a"),83!==this.readByte()&&this.error("version mismatch in"),0!==this.readByte()&&this.error("format mismatch in"),this.checkliteral(V,"corrupted"),this.intSize=this.readByte(),this.size_tSize=this.readByte(),this.instructionSize=this.readByte(),this.integerSize=this.readByte(),this.numberSize=this.readByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.readInteger()&&this.error("endianness mismatch in"),370.5!==this.readNumber()&&this.error("float format mismatch in")}},{key:"error",value:function(e){g.luaO_pushfstring(this.L,d("%s: %s precompiled chunk"),this.name,d(e)),L.luaD_throw(this.L,p)}},{key:"checksize",value:function(e,t,r){e!==t&&this.error(r+" size mismatch in")}}],[{key:"MASK1",value:function(e,t){return~(-1<<e)<<t}},{key:"MASK0",value:function(t,r){return~e.MASK1(t,r)}}]),e}();e.exports.luaU_undump=function(e,t,r){var a=new B(e,t,r);a.checkHeader();var n=A.luaF_newLclosure(e,a.readByte());return L.luaD_inctop(e),e.stack[e.top-1].setclLvalue(n),n.p=new A.Proto(e),a.readFunction(n.p,null),M(n.nupvalues===n.p.upvalues.length),n}},function(e,t,r){"use strict";var a=r(0),n=a.LUA_MULTRET,u=a.LUA_OPADD,s=a.LUA_OPBAND,o=a.LUA_OPBNOT,l=a.LUA_OPBOR,i=a.LUA_OPBXOR,c=a.LUA_OPDIV,_=a.LUA_OPIDIV,f=a.LUA_OPMOD,p=a.LUA_OPSHL,v=a.LUA_OPSHR,h=a.LUA_OPUNM,d=a.constant_types,L=d.LUA_TBOOLEAN,A=d.LUA_TLIGHTUSERDATA,g=d.LUA_TLNGSTR,b=d.LUA_TNIL,T=d.LUA_TNUMFLT,x=d.LUA_TNUMINT,k=d.LUA_TTABLE,O=a.to_luastring,E=r(2).lua_assert,m=r(19),U=r(5),R=r(13),N=r(30),y=r(9),S=r(14),I=R.OpCodesI,w=U.TValue,M={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},P={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},D=function(e){return e.t!==e.f},C=function(e,t){var r=N.expkind;if(D(e))return!1;switch(e.k){case r.VKINT:return!t||new w(x,e.u.ival);case r.VKFLT:return!t||new w(T,e.u.nval);default:return!1}},G=function(e,t,r){var a=void 0,n=t+r-1;if(e.pc>e.lasttarget&&(a=e.f.code[e.pc-1]).opcode===I.OP_LOADNIL){var u=a.A,s=u+a.B;if(u<=t&&t<=s+1||t<=u&&u<=n+1)return u<t&&(t=u),s>n&&(n=s),R.SETARG_A(a,t),void R.SETARG_B(a,n-t)}ee(e,I.OP_LOADNIL,t,r-1,0)},V=function(e,t){return e.f.code[t.u.info]},B=function(e,t){var r=e.f.code[t].sBx;return-1===r?-1:t+1+r},K=function(e,t,r){var a=e.f.code[t],n=r-(t+1);E(-1!==r),Math.abs(n)>R.MAXARG_sBx&&m.luaX_syntaxerror(e.ls,O("control structure too long",!0)),R.SETARG_sBx(a,n)},F=function(e,t,r){if(-1===r)return t;if(-1===t)t=r;else{for(var a=t,n=B(e,a);-1!==n;)n=B(e,a=n);K(e,a,r)}return t},j=function(e){var t=e.jpc;e.jpc=-1;var r=re(e,I.OP_JMP,0,-1);return r=F(e,r,t)},H=function(e,t,r,a,n){return ee(e,t,r,a,n),j(e)},X=function(e){return e.lasttarget=e.pc,e.pc},z=function(e,t){return t>=1&&R.testTMode(e.f.code[t-1].opcode)?t-1:t},q=function(e,t){return e.f.code[z(e,t)]},Y=function(e,t,r){var a=z(e,t),n=e.f.code[a];return n.opcode===I.OP_TESTSET&&(r!==R.NO_REG&&r!==n.B?R.SETARG_A(n,r):e.f.code[a]=R.CREATE_ABC(I.OP_TEST,n.B,0,n.C),!0)},J=function(e,t){for(;-1!==t;t=B(e,t))Y(e,t,R.NO_REG)},Z=function(e,t,r,a,n){for(;-1!==t;){var u=B(e,t);Y(e,t,a)?K(e,t,r):K(e,t,n),t=u}},W=function(e,t){X(e),e.jpc=F(e,e.jpc,t)},Q=function(e,t,r){r===e.pc?W(e,t):(E(r<e.pc),Z(e,t,r,R.NO_REG,r))},$=function(e,t){var r=e.f;return function(e){Z(e,e.jpc,e.pc,R.NO_REG,e.pc),e.jpc=-1}(e),r.code[e.pc]=t,r.lineinfo[e.pc]=e.ls.lastline,e.pc++},ee=function(e,t,r,a,n){return E(R.getOpMode(t)===R.iABC),E(R.getBMode(t)!==R.OpArgN||0===a),E(R.getCMode(t)!==R.OpArgN||0===n),E(r<=R.MAXARG_A&&a<=R.MAXARG_B&&n<=R.MAXARG_C),$(e,R.CREATE_ABC(t,r,a,n))},te=function(e,t,r,a){return E(R.getOpMode(t)===R.iABx||R.getOpMode(t)===R.iAsBx),E(R.getCMode(t)===R.OpArgN),E(r<=R.MAXARG_A&&a<=R.MAXARG_Bx),$(e,R.CREATE_ABx(t,r,a))},re=function(e,t,r,a){return te(e,t,r,a+R.MAXARG_sBx)},ae=function(e,t){return E(t<=R.MAXARG_Ax),$(e,R.CREATE_Ax(I.OP_EXTRAARG,t))},ne=function(e,t,r){if(r<=R.MAXARG_Bx)return te(e,I.OP_LOADK,t,r);var a=te(e,I.OP_LOADKX,t,0);return ae(e,r),a},ue=function(e,t){var r=e.freereg+t;r>e.f.maxstacksize&&(r>=255&&m.luaX_syntaxerror(e.ls,O("function or expression needs too many registers",!0)),e.f.maxstacksize=r)},se=function(e,t){ue(e,t),e.freereg+=t},oe=function(e,t){!R.ISK(t)&&t>=e.nactvar&&(e.freereg--,E(t===e.freereg))},le=function(e,t){t.k===N.expkind.VNONRELOC&&oe(e,t.u.info)},ie=function(e,t,r){var a=t.k===N.expkind.VNONRELOC?t.u.info:-1,n=r.k===N.expkind.VNONRELOC?r.u.info:-1;a>n?(oe(e,a),oe(e,n)):(oe(e,n),oe(e,a))},ce=function(e,t,r){var a=e.f,n=y.luaH_set(e.L,e.ls.h,t);if(n.ttisinteger()){var u=n.value;if(u<e.nk&&a.k[u].ttype()===r.ttype()&&a.k[u].value===r.value)return u}var s=e.nk;return n.setivalue(s),a.k[s]=r,e.nk++,s},_e=function(e,t){var r=new w(A,t),a=new w(x,t);return ce(e,r,a)},fe=function(e,t){var r=new w(T,t);return ce(e,r,r)},pe=function(e,t){var r=new w(L,t);return ce(e,r,r)},ve=function(e,t,r){var a=N.expkind;if(t.k===a.VCALL)R.SETARG_C(V(e,t),r+1);else if(t.k===a.VVARARG){var u=V(e,t);R.SETARG_B(u,r+1),R.SETARG_A(u,e.freereg),se(e,1)}else E(r===n)},he=function(e,t){var r=N.expkind;t.k===r.VCALL?(E(2===V(e,t).C),t.k=r.VNONRELOC,t.u.info=V(e,t).A):t.k===r.VVARARG&&(R.SETARG_B(V(e,t),2),t.k=r.VRELOCABLE)},de=function(e,t){var r=N.expkind;switch(t.k){case r.VLOCAL:t.k=r.VNONRELOC;break;case r.VUPVAL:t.u.info=ee(e,I.OP_GETUPVAL,0,t.u.info,0),t.k=r.VRELOCABLE;break;case r.VINDEXED:var a=void 0;oe(e,t.u.ind.idx),t.u.ind.vt===r.VLOCAL?(oe(e,t.u.ind.t),a=I.OP_GETTABLE):(E(t.u.ind.vt===r.VUPVAL),a=I.OP_GETTABUP),t.u.info=ee(e,a,0,t.u.ind.t,t.u.ind.idx),t.k=r.VRELOCABLE;break;case r.VVARARG:case r.VCALL:he(e,t)}},Le=function(e,t,r,a){return X(e),ee(e,I.OP_LOADBOOL,t,r,a)},Ae=function(e,t,r){var a=N.expkind;switch(de(e,t),t.k){case a.VNIL:G(e,r,1);break;case a.VFALSE:case a.VTRUE:ee(e,I.OP_LOADBOOL,r,t.k===a.VTRUE,0);break;case a.VK:ne(e,r,t.u.info);break;case a.VKFLT:ne(e,r,fe(e,t.u.nval));break;case a.VKINT:ne(e,r,_e(e,t.u.ival));break;case a.VRELOCABLE:var n=V(e,t);R.SETARG_A(n,r);break;case a.VNONRELOC:r!==t.u.info&&ee(e,I.OP_MOVE,r,t.u.info,0);break;default:return void E(t.k===a.VJMP)}t.u.info=r,t.k=a.VNONRELOC},ge=function(e,t){t.k!==N.expkind.VNONRELOC&&(se(e,1),Ae(e,t,e.freereg-1))},be=function(e,t){for(;-1!==t;t=B(e,t)){if(q(e,t).opcode!==I.OP_TESTSET)return!0}return!1},Te=function(e,t,r){var a=N.expkind;if(Ae(e,t,r),t.k===a.VJMP&&(t.t=F(e,t.t,t.u.info)),D(t)){var n,u=-1,s=-1;if(be(e,t.t)||be(e,t.f)){var o=t.k===a.VJMP?-1:j(e);u=Le(e,r,0,1),s=Le(e,r,1,0),W(e,o)}n=X(e),Z(e,t.f,n,r,u),Z(e,t.t,n,r,s)}t.f=t.t=-1,t.u.info=r,t.k=a.VNONRELOC},xe=function(e,t){de(e,t),le(e,t),se(e,1),Te(e,t,e.freereg-1)},ke=function(e,t){if(de(e,t),t.k===N.expkind.VNONRELOC){if(!D(t))return t.u.info;if(t.u.info>=e.nactvar)return Te(e,t,t.u.info),t.u.info}return xe(e,t),t.u.info},Oe=function(e,t){D(t)?ke(e,t):de(e,t)},Ee=function(e,t){var r=N.expkind,a=!1;switch(Oe(e,t),t.k){case r.VTRUE:t.u.info=pe(e,!0),a=!0;break;case r.VFALSE:t.u.info=pe(e,!1),a=!0;break;case r.VNIL:t.u.info=function(e){var t=new w(b,null),r=new w(k,e.ls.h);return ce(e,r,t)}(e),a=!0;break;case r.VKINT:t.u.info=_e(e,t.u.ival),a=!0;break;case r.VKFLT:t.u.info=fe(e,t.u.nval),a=!0;break;case r.VK:a=!0}return a&&(t.k=r.VK,t.u.info<=R.MAXINDEXRK)?R.RKASK(t.u.info):ke(e,t)},me=function(e,t){var r=q(e,t.u.info);E(R.testTMode(r.opcode)&&r.opcode!==I.OP_TESTSET&&r.opcode!==I.OP_TEST),R.SETARG_A(r,!r.A)},Ue=function(e,t,r){if(t.k===N.expkind.VRELOCABLE){var a=V(e,t);if(a.opcode===I.OP_NOT)return e.pc--,H(e,I.OP_TEST,a.B,0,!r)}return ge(e,t),le(e,t),H(e,I.OP_TESTSET,R.NO_REG,t.u.info,r)},Re=function(e,t){var r=N.expkind,a=void 0;switch(de(e,t),t.k){case r.VJMP:me(e,t),a=t.u.info;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:a=-1;break;default:a=Ue(e,t,0)}t.f=F(e,t.f,a),W(e,t.t),t.t=-1},Ne=function(e,t){var r=N.expkind,a=void 0;switch(de(e,t),t.k){case r.VJMP:a=t.u.info;break;case r.VNIL:case r.VFALSE:a=-1;break;default:a=Ue(e,t,1)}t.t=F(e,t.t,a),W(e,t.f),t.f=-1},ye=function(e,t,r){var a,n=N.expkind,u=void 0;if(!(a=C(t,!0))||!(u=C(r,!0))||!function(e,t,r){switch(e){case s:case l:case i:case p:case v:case o:return!1!==S.tointeger(t)&&!1!==S.tointeger(r);case c:case _:case f:return 0!==r.value;default:return 1}}(e,a,u))return 0;var h=new w;if(U.luaO_arith(null,e,a,u,h),h.ttisinteger())t.k=n.VKINT,t.u.ival=h.value;else{var d=h.value;if(isNaN(d)||0===d)return!1;t.k=n.VKFLT,t.u.nval=d}return!0},Se=function(e,t,r,a,n){var u=Ee(e,a),s=Ee(e,r);ie(e,r,a),r.u.info=ee(e,t,0,s,u),r.k=N.expkind.VRELOCABLE,Ie(e,n)},Ie=function(e,t){e.f.lineinfo[e.pc-1]=t};e.exports.BinOpr=M,e.exports.NO_JUMP=-1,e.exports.UnOpr=P,e.exports.getinstruction=V,e.exports.luaK_checkstack=ue,e.exports.luaK_code=$,e.exports.luaK_codeABC=ee,e.exports.luaK_codeABx=te,e.exports.luaK_codeAsBx=re,e.exports.luaK_codek=ne,e.exports.luaK_concat=F,e.exports.luaK_dischargevars=de,e.exports.luaK_exp2RK=Ee,e.exports.luaK_exp2anyreg=ke,e.exports.luaK_exp2anyregup=function(e,t){(t.k!==N.expkind.VUPVAL||D(t))&&ke(e,t)},e.exports.luaK_exp2nextreg=xe,e.exports.luaK_exp2val=Oe,e.exports.luaK_fixline=Ie,e.exports.luaK_getlabel=X,e.exports.luaK_goiffalse=Ne,e.exports.luaK_goiftrue=Re,e.exports.luaK_indexed=function(e,t,r){var a=N.expkind;E(!D(t)&&(N.vkisinreg(t.k)||t.k===a.VUPVAL)),t.u.ind.t=t.u.info,t.u.ind.idx=Ee(e,r),t.u.ind.vt=t.k===a.VUPVAL?a.VUPVAL:a.VLOCAL,t.k=a.VINDEXED},e.exports.luaK_infix=function(e,t,r){switch(t){case M.OPR_AND:Re(e,r);break;case M.OPR_OR:Ne(e,r);break;case M.OPR_CONCAT:xe(e,r);break;case M.OPR_ADD:case M.OPR_SUB:case M.OPR_MUL:case M.OPR_DIV:case M.OPR_IDIV:case M.OPR_MOD:case M.OPR_POW:case M.OPR_BAND:case M.OPR_BOR:case M.OPR_BXOR:case M.OPR_SHL:case M.OPR_SHR:C(r,!1)||Ee(e,r);break;default:Ee(e,r)}},e.exports.luaK_intK=_e,e.exports.luaK_jump=j,e.exports.luaK_jumpto=function(e,t){return Q(e,j(e),t)},e.exports.luaK_nil=G,e.exports.luaK_numberK=fe,e.exports.luaK_patchclose=function(e,t,r){for(r++;-1!==t;t=B(e,t)){var a=e.f.code[t];E(a.opcode===I.OP_JMP&&(0===a.A||a.A>=r)),R.SETARG_A(a,r)}},e.exports.luaK_patchlist=Q,e.exports.luaK_patchtohere=W,e.exports.luaK_posfix=function(e,t,r,a,n){var s=N.expkind;switch(t){case M.OPR_AND:E(-1===r.t),de(e,a),a.f=F(e,a.f,r.f),r.to(a);break;case M.OPR_OR:E(-1===r.f),de(e,a),a.t=F(e,a.t,r.t),r.to(a);break;case M.OPR_CONCAT:Oe(e,a);var o=V(e,a);a.k===s.VRELOCABLE&&o.opcode===I.OP_CONCAT?(E(r.u.info===o.B-1),le(e,r),R.SETARG_B(o,r.u.info),r.k=s.VRELOCABLE,r.u.info=a.u.info):(xe(e,a),Se(e,I.OP_CONCAT,r,a,n));break;case M.OPR_ADD:case M.OPR_SUB:case M.OPR_MUL:case M.OPR_DIV:case M.OPR_IDIV:case M.OPR_MOD:case M.OPR_POW:case M.OPR_BAND:case M.OPR_BOR:case M.OPR_BXOR:case M.OPR_SHL:case M.OPR_SHR:ye(t+u,r,a)||Se(e,t+I.OP_ADD,r,a,n);break;case M.OPR_EQ:case M.OPR_LT:case M.OPR_LE:case M.OPR_NE:case M.OPR_GT:case M.OPR_GE:!function(e,t,r,a){var n=N.expkind,u=void 0;r.k===n.VK?u=R.RKASK(r.u.info):(E(r.k===n.VNONRELOC),u=r.u.info);var s=Ee(e,a);switch(ie(e,r,a),t){case M.OPR_NE:r.u.info=H(e,I.OP_EQ,0,u,s);break;case M.OPR_GT:case M.OPR_GE:var o=t-M.OPR_NE+I.OP_EQ;r.u.info=H(e,o,1,s,u);break;default:var l=t-M.OPR_EQ+I.OP_EQ;r.u.info=H(e,l,1,u,s)}r.k=n.VJMP}(e,t,r,a)}return r},e.exports.luaK_prefix=function(e,t,r,a){var n=new N.expdesc;switch(n.k=N.expkind.VKINT,n.u.ival=n.u.nval=n.u.info=0,n.t=-1,n.f=-1,t){case P.OPR_MINUS:case P.OPR_BNOT:if(ye(t+h,r,n))break;case P.OPR_LEN:!function(e,t,r,a){var n=ke(e,r);le(e,r),r.u.info=ee(e,t,0,n,0),r.k=N.expkind.VRELOCABLE,Ie(e,a)}(e,t+I.OP_UNM,r,a);break;case P.OPR_NOT:!function(e,t){var r=N.expkind;switch(de(e,t),t.k){case r.VNIL:case r.VFALSE:t.k=r.VTRUE;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:t.k=r.VFALSE;break;case r.VJMP:me(e,t);break;case r.VRELOCABLE:case r.VNONRELOC:ge(e,t),le(e,t),t.u.info=ee(e,I.OP_NOT,0,t.u.info,0),t.k=r.VRELOCABLE}var a=t.f;t.f=t.t,t.t=a,J(e,t.f),J(e,t.t)}(e,r)}},e.exports.luaK_reserveregs=se,e.exports.luaK_ret=function(e,t,r){ee(e,I.OP_RETURN,t,r+1,0)},e.exports.luaK_self=function(e,t,r){ke(e,t);var a=t.u.info;le(e,t),t.u.info=e.freereg,t.k=N.expkind.VNONRELOC,se(e,2),ee(e,I.OP_SELF,t.u.info,a,Ee(e,r)),le(e,r)},e.exports.luaK_setlist=function(e,t,r,a){var u=(r-1)/R.LFIELDS_PER_FLUSH+1,s=a===n?0:a;E(0!==a&&a<=R.LFIELDS_PER_FLUSH),u<=R.MAXARG_C?ee(e,I.OP_SETLIST,t,s,u):u<=R.MAXARG_Ax?(ee(e,I.OP_SETLIST,t,s,0),ae(e,u)):m.luaX_syntaxerror(e.ls,O("constructor too long",!0)),e.freereg=t+1},e.exports.luaK_setmultret=function(e,t){ve(e,t,n)},e.exports.luaK_setoneret=he,e.exports.luaK_setreturns=ve,e.exports.luaK_storevar=function(e,t,r){var a=N.expkind;switch(t.k){case a.VLOCAL:return le(e,r),void Te(e,r,t.u.info);case a.VUPVAL:var n=ke(e,r);ee(e,I.OP_SETUPVAL,n,t.u.info,0);break;case a.VINDEXED:var u=t.u.ind.vt===a.VLOCAL?I.OP_SETTABLE:I.OP_SETTABUP,s=Ee(e,r);ee(e,u,t.u.ind.t,t.u.ind.idx,s)}le(e,r)},e.exports.luaK_stringK=function(e,t){var r=new w(g,t);return ce(e,r,r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.L=t.interop=t.lualib=t.lauxlib=t.lua=t.to_uristring=t.to_luastring=t.to_jsstring=t.luastring_of=t.luastring_indexOf=t.luastring_eq=t.FENGARI_VERSION_RELEASE=t.FENGARI_VERSION_NUM=t.FENGARI_VERSION_MINOR=t.FENGARI_VERSION_MAJOR=t.FENGARI_VERSION=t.FENGARI_RELEASE=t.FENGARI_COPYRIGHT=t.FENGARI_AUTHORS=void 0,t.load=function(e,t){if("string"==typeof e)e=(0,a.to_luastring)(e);else if(!(e instanceof Uint8Array))throw new TypeError("expects an array of bytes or javascript string");t=t?(0,a.to_luastring)(t):null;var r=x(N,e,null,t),n=void 0;n=r===s?new SyntaxError(T(N,-1)):R(N,-1);if(d(N,1),r!==o)throw n;return n};var a=r(20),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(32));var u=a.lua.LUA_ERRRUN,s=a.lua.LUA_ERRSYNTAX,o=a.lua.LUA_OK,l=a.lua.LUA_VERSION_MAJOR,i=a.lua.LUA_VERSION_MINOR,c=a.lua.lua_Debug,_=a.lua.lua_getinfo,f=a.lua.lua_getstack,p=a.lua.lua_gettop,v=a.lua.lua_insert,h=a.lua.lua_pcall,d=a.lua.lua_pop,L=a.lua.lua_pushcfunction,A=a.lua.lua_pushstring,g=a.lua.lua_remove,b=a.lua.lua_setglobal,T=a.lua.lua_tojsstring,x=a.lauxlib.luaL_loadbuffer,k=a.lauxlib.luaL_newstate,O=a.lauxlib.luaL_requiref,E=n.checkjs,m=n.luaopen_js,U=n.push,R=n.tojs;t.FENGARI_AUTHORS=a.FENGARI_AUTHORS,t.FENGARI_COPYRIGHT=a.FENGARI_COPYRIGHT,t.FENGARI_RELEASE=a.FENGARI_RELEASE,t.FENGARI_VERSION=a.FENGARI_VERSION,t.FENGARI_VERSION_MAJOR=a.FENGARI_VERSION_MAJOR,t.FENGARI_VERSION_MINOR=a.FENGARI_VERSION_MINOR,t.FENGARI_VERSION_NUM=a.FENGARI_VERSION_NUM,t.FENGARI_VERSION_RELEASE=a.FENGARI_VERSION_RELEASE,t.luastring_eq=a.luastring_eq,t.luastring_indexOf=a.luastring_indexOf,t.luastring_of=a.luastring_of,t.to_jsstring=a.to_jsstring,t.to_luastring=a.to_luastring,t.to_uristring=a.to_uristring,t.lua=a.lua,t.lauxlib=a.lauxlib,t.lualib=a.lualib,t.interop=n;var N=t.L=k();if(a.lualib.luaL_openlibs(N),O(N,(0,a.to_luastring)("js"),m,1),d(N,1),A(N,(0,a.to_luastring)(a.FENGARI_COPYRIGHT)),b(N,(0,a.to_luastring)("_COPYRIGHT")),"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{var y=function(e){var t=new c;return f(e,2,t)&&_(e,(0,a.to_luastring)("Sl"),t),U(e,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:T(e,1),error:R(e,1),filename:t.short_src?(0,a.to_jsstring)(t.short_src):void 0,lineno:t.currentline>0?t.currentline:void 0})),1},S=function(e,t,r){var a=x(N,t,null,r),n=void 0;if(a===s){var l=T(N,-1),i=e.src?e.src:document.location,c=new SyntaxError(l,i,void 0);n=new ErrorEvent("error",{message:l,error:c,filename:i,lineno:void 0})}else if(a===o){var _=p(N);L(N,y),v(N,_),Object.defineProperty(document,"currentScript",{value:e,configurable:!0}),a=h(N,0,0,_),delete document.currentScript,g(N,_),a===u&&(n=E(N,-1))}a!==o&&(void 0===n&&(n=new ErrorEvent("error",{message:T(N,-1),error:R(N,-1)})),d(N,1),window.dispatchEvent(n)&&console.error("uncaught exception",n.error))},I=function(e,t,r){if(e.status>=200&&e.status<300){var n=e.response;n="string"==typeof n?(0,a.to_luastring)(e.response):new Uint8Array(n),S(t,n,r)}else t.dispatchEvent(new Event("error"))},w=/^(.*?\/.*?)([\t ]*;.*)?$/,M=/^(\d+)\.(\d+)$/,P=function(e){if("SCRIPT"===e.tagName){var t=w.exec(e.type);if(t){var r=t[1];if("application/lua"===r||"text/lua"===r){if(e.hasAttribute("lua-version")){var n=M.exec(e.getAttribute("lua-version"));if(!n||n[1]!==l||n[2]!==i)return}!function(e){if(e.src){var t=(0,a.to_luastring)("@"+e.src);if("complete"===document.readyState||e.async)if("function"==typeof fetch)fetch(e.src,{method:"GET",credentials:function(e){switch(e){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}}(e.crossorigin),redirect:"follow",integrity:e.integrity}).then(function(e){if(e.ok)return e.arrayBuffer();throw new Error("unable to fetch")}).then(function(r){var a=new Uint8Array(r);S(e,a,t)}).catch(function(t){e.dispatchEvent(new Event("error"))});else{var r=new XMLHttpRequest;r.open("GET",e.src,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){4===r.readyState&&I(r,e,t)},r.send()}else{var n=new XMLHttpRequest;n.open("GET",e.src,!1),n.send(),I(n,e,t)}}else{var u=(0,a.to_luastring)(e.innerHTML),s=e.id?(0,a.to_luastring)("="+e.id):u;S(e,u,s)}}(e)}}}};new MutationObserver(function(e,t){for(var r=0;r<e.length;r++)for(var a=e[r],n=0;n<a.addedNodes.length;n++)P(a.addedNodes[n])}).observe(document,{childList:!0,subtree:!0});Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"] script[type^="text/lua"]'),P)}}])});